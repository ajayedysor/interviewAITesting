"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@elevenlabs";
exports.ids = ["vendor-chunks/@elevenlabs"];
exports.modules = {

/***/ "(ssr)/./node_modules/@elevenlabs/client/dist/lib.modern.js":
/*!************************************************************!*\
  !*** ./node_modules/@elevenlabs/client/dist/lib.modern.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AudioFormat: () => (/* binding */ O),\n/* harmony export */   CommitStrategy: () => (/* binding */ U),\n/* harmony export */   Conversation: () => (/* binding */ N),\n/* harmony export */   Input: () => (/* binding */ M),\n/* harmony export */   Output: () => (/* binding */ R),\n/* harmony export */   RealtimeConnection: () => (/* binding */ P),\n/* harmony export */   RealtimeEvents: () => (/* binding */ F),\n/* harmony export */   Scribe: () => (/* binding */ L),\n/* harmony export */   TextConversation: () => (/* binding */ k),\n/* harmony export */   VoiceConversation: () => (/* binding */ A),\n/* harmony export */   WebRTCConnection: () => (/* binding */ b),\n/* harmony export */   WebSocketConnection: () => (/* binding */ m),\n/* harmony export */   createConnection: () => (/* binding */ y),\n/* harmony export */   postOverallFeedback: () => (/* binding */ T)\n/* harmony export */ });\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/livekit-client/dist/livekit-client.esm.mjs\");\nfunction a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a.apply(null,arguments)}const i=new Uint8Array(0);class r{static getFullOptions(e){return a({clientTools:{},onConnect:()=>{},onDebug:()=>{},onDisconnect:()=>{},onError:()=>{},onMessage:()=>{},onAudio:()=>{},onModeChange:()=>{},onStatusChange:()=>{},onCanSendFeedbackChange:()=>{},onInterruption:()=>{}},e)}constructor(e,t){var n=this;this.options=void 0,this.connection=void 0,this.lastInterruptTimestamp=0,this.mode=\"listening\",this.status=\"connecting\",this.volume=1,this.currentEventId=1,this.lastFeedbackEventId=0,this.canSendFeedback=!1,this.endSessionWithDetails=async function(e){\"connected\"!==n.status&&\"connecting\"!==n.status||(n.updateStatus(\"disconnecting\"),await n.handleEndSession(),n.updateStatus(\"disconnected\"),n.options.onDisconnect&&n.options.onDisconnect(e))},this.onMessage=async function(e){switch(e.type){case\"interruption\":return void n.handleInterruption(e);case\"agent_response\":return void n.handleAgentResponse(e);case\"user_transcript\":return void n.handleUserTranscript(e);case\"internal_tentative_agent_response\":return void n.handleTentativeAgentResponse(e);case\"client_tool_call\":try{await n.handleClientToolCall(e)}catch(t){n.onError(`Unexpected error in client tool call handling: ${t instanceof Error?t.message:String(t)}`,{clientToolName:e.client_tool_call.tool_name,toolCallId:e.client_tool_call.tool_call_id})}return;case\"audio\":return void n.handleAudio(e);case\"vad_score\":return void n.handleVadScore(e);case\"ping\":return void n.connection.sendMessage({type:\"pong\",event_id:e.ping_event.event_id});case\"mcp_tool_call\":return void n.handleMCPToolCall(e);case\"mcp_connection_status\":return void n.handleMCPConnectionStatus(e);case\"agent_tool_request\":return void n.handleAgentToolRequest(e);case\"agent_tool_response\":return void n.handleAgentToolResponse(e);case\"conversation_initiation_metadata\":return void n.handleConversationMetadata(e);case\"asr_initiation_metadata\":return void n.handleAsrInitiationMetadata(e);case\"agent_chat_response_part\":return void n.handleAgentChatResponsePart(e);case\"error\":return void n.handleErrorEvent(e);default:return void(n.options.onDebug&&n.options.onDebug(e))}},this.setVolume=({volume:e})=>{this.volume=e},this.options=e,this.connection=t,this.options.onConnect&&this.options.onConnect({conversationId:t.conversationId}),this.connection.onMessage(this.onMessage),this.connection.onDisconnect(this.endSessionWithDetails),this.connection.onModeChange(e=>this.updateMode(e)),this.updateStatus(\"connected\")}endSession(){return this.endSessionWithDetails({reason:\"user\"})}async handleEndSession(){this.connection.close()}updateMode(e){e!==this.mode&&(this.mode=e,this.options.onModeChange&&this.options.onModeChange({mode:e}))}updateStatus(e){e!==this.status&&(this.status=e,this.options.onStatusChange&&this.options.onStatusChange({status:e}))}updateCanSendFeedback(){const e=this.currentEventId!==this.lastFeedbackEventId;this.canSendFeedback!==e&&(this.canSendFeedback=e,this.options.onCanSendFeedbackChange&&this.options.onCanSendFeedbackChange({canSendFeedback:e}))}handleInterruption(e){e.interruption_event&&(this.lastInterruptTimestamp=e.interruption_event.event_id,this.options.onInterruption&&this.options.onInterruption({event_id:e.interruption_event.event_id}))}handleAgentResponse(e){this.options.onMessage&&this.options.onMessage({source:\"ai\",role:\"agent\",message:e.agent_response_event.agent_response})}handleUserTranscript(e){this.options.onMessage&&this.options.onMessage({source:\"user\",role:\"user\",message:e.user_transcription_event.user_transcript})}handleTentativeAgentResponse(e){this.options.onDebug&&this.options.onDebug({type:\"tentative_agent_response\",response:e.tentative_agent_response_internal_event.tentative_agent_response})}handleVadScore(e){this.options.onVadScore&&this.options.onVadScore({vadScore:e.vad_score_event.vad_score})}async handleClientToolCall(e){if(Object.prototype.hasOwnProperty.call(this.options.clientTools,e.client_tool_call.tool_name))try{var t;const n=null!=(t=await this.options.clientTools[e.client_tool_call.tool_name](e.client_tool_call.parameters))?t:\"Client tool execution successful.\",o=\"object\"==typeof n?JSON.stringify(n):String(n);this.connection.sendMessage({type:\"client_tool_result\",tool_call_id:e.client_tool_call.tool_call_id,result:o,is_error:!1})}catch(t){this.onError(`Client tool execution failed with following error: ${null==t?void 0:t.message}`,{clientToolName:e.client_tool_call.tool_name}),this.connection.sendMessage({type:\"client_tool_result\",tool_call_id:e.client_tool_call.tool_call_id,result:`Client tool execution failed: ${null==t?void 0:t.message}`,is_error:!0})}else{if(this.options.onUnhandledClientToolCall)return void this.options.onUnhandledClientToolCall(e.client_tool_call);this.onError(`Client tool with name ${e.client_tool_call.tool_name} is not defined on client`,{clientToolName:e.client_tool_call.tool_name}),this.connection.sendMessage({type:\"client_tool_result\",tool_call_id:e.client_tool_call.tool_call_id,result:`Client tool with name ${e.client_tool_call.tool_name} is not defined on client`,is_error:!0})}}handleAudio(e){}handleMCPToolCall(e){this.options.onMCPToolCall&&this.options.onMCPToolCall(e.mcp_tool_call)}handleMCPConnectionStatus(e){this.options.onMCPConnectionStatus&&this.options.onMCPConnectionStatus(e.mcp_connection_status)}handleAgentToolRequest(e){this.options.onAgentToolRequest&&this.options.onAgentToolRequest(e.agent_tool_request)}handleAgentToolResponse(e){\"end_call\"===e.agent_tool_response.tool_name&&this.endSessionWithDetails({reason:\"agent\",context:new CloseEvent(\"end_call\",{reason:\"Agent ended the call\"})}),this.options.onAgentToolResponse&&this.options.onAgentToolResponse(e.agent_tool_response)}handleConversationMetadata(e){this.options.onConversationMetadata&&this.options.onConversationMetadata(e.conversation_initiation_metadata_event)}handleAsrInitiationMetadata(e){this.options.onAsrInitiationMetadata&&this.options.onAsrInitiationMetadata(e.asr_initiation_metadata_event)}handleAgentChatResponsePart(e){this.options.onAgentChatResponsePart&&this.options.onAgentChatResponsePart(e.text_response_part)}handleErrorEvent(e){const t=e.error_event.error_type,n=e.error_event.message||e.error_event.reason||\"Unknown error\";\"max_duration_exceeded\"!==t?this.onError(`Server error: ${n}`,{errorType:t,code:e.error_event.code,debugMessage:e.error_event.debug_message,details:e.error_event.details}):this.endSessionWithDetails({reason:\"error\",message:n,context:new Event(\"max_duration_exceeded\")})}onError(e,t){console.error(e,t),this.options.onError&&this.options.onError(e,t)}getId(){return this.connection.conversationId}isOpen(){return\"connected\"===this.status}setMicMuted(e){this.connection.setMicMuted(e)}getInputByteFrequencyData(){return i}getOutputByteFrequencyData(){return i}getInputVolume(){return 0}getOutputVolume(){return 0}sendFeedback(e){this.canSendFeedback?(this.connection.sendMessage({type:\"feedback\",score:e?\"like\":\"dislike\",event_id:this.currentEventId}),this.lastFeedbackEventId=this.currentEventId,this.updateCanSendFeedback()):console.warn(0===this.lastFeedbackEventId?\"Cannot send feedback: the conversation has not started yet.\":\"Cannot send feedback: feedback has already been sent for the current response.\")}sendContextualUpdate(e){this.connection.sendMessage({type:\"contextual_update\",text:e})}sendUserMessage(e){this.connection.sendMessage({type:\"user_message\",text:e})}sendUserActivity(){this.connection.sendMessage({type:\"user_activity\"})}sendMCPToolApprovalResult(e,t){this.connection.sendMessage({type:\"mcp_tool_approval_result\",tool_call_id:e,is_approved:t})}}class c{constructor(e={}){this.queue=[],this.disconnectionDetails=null,this.onDisconnectCallback=null,this.onMessageCallback=null,this.onModeChangeCallback=null,this.onDebug=void 0,this.onDebug=e.onDebug}debug(e){this.onDebug&&this.onDebug(e)}onMessage(e){this.onMessageCallback=e;const t=this.queue;this.queue=[],t.length>0&&queueMicrotask(()=>{t.forEach(e)})}onDisconnect(e){this.onDisconnectCallback=e;const t=this.disconnectionDetails;t&&queueMicrotask(()=>{e(t)})}onModeChange(e){this.onModeChangeCallback=e}updateMode(e){var t;null==(t=this.onModeChangeCallback)||t.call(this,e)}disconnect(e){var t;this.disconnectionDetails||(this.disconnectionDetails=e,null==(t=this.onDisconnectCallback)||t.call(this,e))}handleMessage(e){this.onMessageCallback?this.onMessageCallback(e):this.queue.push(e)}}function l(e){const[t,n]=e.split(\"_\");if(![\"pcm\",\"ulaw\"].includes(t))throw new Error(`Invalid format: ${e}`);const o=Number.parseInt(n);if(Number.isNaN(o))throw new Error(`Invalid sample rate: ${n}`);return{format:t,sampleRate:o}}const u=\"0.12.2\";function d(e){return!!e.type}const h=\"conversation_initiation_client_data\";function p(e){var t;const n={type:h};var o,s,a,i,r,c;return e.overrides&&(n.conversation_config_override={agent:{prompt:null==(o=e.overrides.agent)?void 0:o.prompt,first_message:null==(s=e.overrides.agent)?void 0:s.firstMessage,language:null==(a=e.overrides.agent)?void 0:a.language},tts:{voice_id:null==(i=e.overrides.tts)?void 0:i.voiceId,speed:null==(r=e.overrides.tts)?void 0:r.speed},conversation:{text_only:null==(c=e.overrides.conversation)?void 0:c.textOnly}}),e.customLlmExtraBody&&(n.custom_llm_extra_body=e.customLlmExtraBody),e.dynamicVariables&&(n.dynamic_variables=e.dynamicVariables),e.userId&&(n.user_id=e.userId),null!=(t=e.overrides)&&t.client&&(n.source_info={source:e.overrides.client.source,version:e.overrides.client.version}),n}class m extends c{constructor(e,t,n,o){super(),this.socket=void 0,this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.socket=e,this.conversationId=t,this.inputFormat=n,this.outputFormat=o,this.socket.addEventListener(\"error\",e=>{setTimeout(()=>this.disconnect({reason:\"error\",message:\"The connection was closed due to a socket error.\",context:e}),0)}),this.socket.addEventListener(\"close\",e=>{this.disconnect(1e3===e.code?{reason:\"agent\",context:e}:{reason:\"error\",message:e.reason||\"The connection was closed by the server.\",context:e})}),this.socket.addEventListener(\"message\",e=>{try{const t=JSON.parse(e.data);if(!d(t))return void this.debug({type:\"invalid_event\",message:\"Received invalid socket event\",data:e.data});this.handleMessage(t)}catch(t){this.debug({type:\"parsing_error\",message:\"Failed to parse socket message\",error:t instanceof Error?t.message:String(t),data:e.data})}})}static async create(e){let t=null;try{var n,o,s;const a=null!=(n=e.origin)?n:\"wss://api.elevenlabs.io\";let i;const r=(null==(o=e.overrides)||null==(o=o.client)?void 0:o.version)||u,c=(null==(s=e.overrides)||null==(s=s.client)?void 0:s.source)||\"js_sdk\";if(e.signedUrl){const t=e.signedUrl.includes(\"?\")?\"&\":\"?\";i=`${e.signedUrl}${t}source=${c}&version=${r}`}else i=`${a}/v1/convai/conversation?agent_id=${e.agentId}&source=${c}&version=${r}`;const h=[\"convai\"];e.authorization&&h.push(`bearer.${e.authorization}`),t=new WebSocket(i,h);const v=await new Promise((n,o)=>{t.addEventListener(\"open\",()=>{var n;const o=p(e);null==(n=t)||n.send(JSON.stringify(o))},{once:!0}),t.addEventListener(\"error\",e=>{setTimeout(()=>o(e),0)}),t.addEventListener(\"close\",o),t.addEventListener(\"message\",e=>{const t=JSON.parse(e.data);d(t)&&(\"conversation_initiation_metadata\"===t.type?n(t.conversation_initiation_metadata_event):console.warn(\"First received message is not conversation metadata.\"))},{once:!0})}),{conversation_id:g,agent_output_audio_format:f,user_input_audio_format:_}=v,w=l(null!=_?_:\"pcm_16000\"),b=l(f);return new m(t,g,w,b)}catch(e){var a;throw null==(a=t)||a.close(),e}}close(){this.socket.close(1e3,\"User ended conversation\")}sendMessage(e){this.socket.send(JSON.stringify(e))}async setMicMuted(e){console.warn(`WebSocket connection setMicMuted called with ${e}, but this is handled by VoiceConversation`)}}function v(e){const t=new Uint8Array(e);return window.btoa(String.fromCharCode(...t))}function g(e){const t=window.atob(e),n=t.length,o=new Uint8Array(n);for(let e=0;e<n;e++)o[e]=t.charCodeAt(e);return o.buffer}const f=new Map;function _(e,t){return async(n,o)=>{const s=f.get(e);if(s)return n.addModule(s);if(o)try{return await n.addModule(o),void f.set(e,o)}catch(t){throw new Error(`Failed to load the ${e} worklet module from path: ${o}. Error: ${t}`)}const a=new Blob([t],{type:\"application/javascript\"}),i=URL.createObjectURL(a);try{return await n.addModule(i),void f.set(e,i)}catch(e){URL.revokeObjectURL(i)}try{const o=`data:application/javascript;base64,${btoa(t)}`;await n.addModule(o),f.set(e,o)}catch(t){throw new Error(`Failed to load the ${e} worklet module. Make sure the browser supports AudioWorklets. If you are using a strict CSP, you may need to self-host the worklet files.`)}}}const w=_(\"rawAudioProcessor\",'/*\\n * ulaw encoding logic taken from the wavefile library\\n * https://github.com/rochars/wavefile/blob/master/lib/codecs/mulaw.js\\n * USED BY @elevenlabs/client\\n */\\n\\nconst BIAS = 0x84;\\nconst CLIP = 32635;\\nconst encodeTable = [\\n  0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,\\n  4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,\\n  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,\\n  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,\\n  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7\\n];\\n\\nfunction encodeSample(sample) {\\n  let sign;\\n  let exponent;\\n  let mantissa;\\n  let muLawSample;\\n  sign = (sample >> 8) & 0x80;\\n  if (sign !== 0) sample = -sample;\\n  sample = sample + BIAS;\\n  if (sample > CLIP) sample = CLIP;\\n  exponent = encodeTable[(sample>>7) & 0xFF];\\n  mantissa = (sample >> (exponent+3)) & 0x0F;\\n  muLawSample = ~(sign | (exponent << 4) | mantissa);\\n  \\n  return muLawSample;\\n}\\n\\nclass RawAudioProcessor extends AudioWorkletProcessor {\\n  constructor() {\\n    super();\\n              \\n    this.port.onmessage = ({ data }) => {\\n      switch (data.type) {\\n        case \"setFormat\":\\n          this.isMuted = false;\\n          this.buffer = []; // Initialize an empty buffer\\n          this.bufferSize = data.sampleRate / 4;\\n          this.format = data.format;\\n\\n          if (globalThis.LibSampleRate && sampleRate !== data.sampleRate) {\\n            globalThis.LibSampleRate.create(1, sampleRate, data.sampleRate).then(resampler => {\\n              this.resampler = resampler;\\n            });\\n          }\\n          break;\\n        case \"setMuted\":\\n          this.isMuted = data.isMuted;\\n          break;\\n      }\\n    };\\n  }\\n  process(inputs) {\\n    if (!this.buffer) {\\n      return true;\\n    }\\n    \\n    const input = inputs[0]; // Get the first input node\\n    if (input.length > 0) {\\n      let channelData = input[0]; // Get the first channel\\'s data\\n\\n      // Resample the audio if necessary\\n      if (this.resampler) {\\n        channelData = this.resampler.full(channelData);\\n      }\\n\\n      // Add channel data to the buffer\\n      this.buffer.push(...channelData);\\n      // Get max volume \\n      let sum = 0.0;\\n      for (let i = 0; i < channelData.length; i++) {\\n        sum += channelData[i] * channelData[i];\\n      }\\n      const maxVolume = Math.sqrt(sum / channelData.length);\\n      // Check if buffer size has reached or exceeded the threshold\\n      if (this.buffer.length >= this.bufferSize) {\\n        const float32Array = this.isMuted \\n          ? new Float32Array(this.buffer.length)\\n          : new Float32Array(this.buffer);\\n\\n        let encodedArray = this.format === \"ulaw\"\\n          ? new Uint8Array(float32Array.length)\\n          : new Int16Array(float32Array.length);\\n\\n        // Iterate through the Float32Array and convert each sample to PCM16\\n        for (let i = 0; i < float32Array.length; i++) {\\n          // Clamp the value to the range [-1, 1]\\n          let sample = Math.max(-1, Math.min(1, float32Array[i]));\\n\\n          // Scale the sample to the range [-32768, 32767]\\n          let value = sample < 0 ? sample * 32768 : sample * 32767;\\n          if (this.format === \"ulaw\") {\\n            value = encodeSample(Math.round(value));\\n          }\\n\\n          encodedArray[i] = value;\\n        }\\n\\n        // Send the buffered data to the main script\\n        this.port.postMessage([encodedArray, maxVolume]);\\n\\n        // Clear the buffer after sending\\n        this.buffer = [];\\n      }\\n    }\\n    return true; // Continue processing\\n  }\\n}\\nregisterProcessor(\"rawAudioProcessor\", RawAudioProcessor);\\n');class b extends c{constructor(e,t,n,o,s={}){super(s),this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.room=void 0,this.isConnected=!1,this.audioEventId=1,this.audioCaptureContext=null,this.audioElements=[],this.outputDeviceId=null,this.outputAnalyser=null,this.outputFrequencyData=null,this.room=e,this.conversationId=t,this.inputFormat=n,this.outputFormat=o,this.setupRoomEventListeners()}static async create(n){let o;if(\"conversationToken\"in n&&n.conversationToken)o=n.conversationToken;else{if(!(\"agentId\"in n)||!n.agentId)throw new Error(\"Either conversationToken or agentId is required for WebRTC connection\");try{var s,a,i;const e=(null==(s=n.overrides)||null==(s=s.client)?void 0:s.version)||u,t=(null==(a=n.overrides)||null==(a=a.client)?void 0:a.source)||\"js_sdk\",c=`${r=null!=(i=n.origin)?i:\"https://api.elevenlabs.io\",r.replace(/^wss:\\/\\//,\"https://\")}/v1/convai/conversation/token?agent_id=${n.agentId}&source=${t}&version=${e}`,l=await fetch(c);if(!l.ok)throw new Error(`ElevenLabs API returned ${l.status} ${l.statusText}`);if(o=(await l.json()).token,!o)throw new Error(\"No conversation token received from API\")}catch(e){let t=e instanceof Error?e.message:String(e);throw e instanceof Error&&e.message.includes(\"401\")&&(t=\"Your agent has authentication enabled, but no signed URL or conversation token was provided.\"),new Error(`Failed to fetch conversation token for agent ${n.agentId}: ${t}`)}}var r;const c=new livekit_client__WEBPACK_IMPORTED_MODULE_0__.Room;try{const e=`room_${Date.now()}`,s=l(\"pcm_48000\"),a=l(\"pcm_48000\"),i=new b(c,e,s,a,n),r=n.livekitUrl||\"wss://livekit.rtc.elevenlabs.io\";var d;await c.connect(r,o),await new Promise(e=>{if(i.isConnected)e();else{const n=()=>{c.off(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Connected,n),e()};c.on(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Connected,n)}}),c.name&&(i.conversationId=(null==(d=c.name.match(/(conv_[a-zA-Z0-9]+)/))?void 0:d[0])||c.name),await c.localParticipant.setMicrophoneEnabled(!0);const u=p(n);return i.debug({type:h,message:u}),await i.sendMessage(u),i}catch(e){throw await c.disconnect(),e}}setupRoomEventListeners(){var e=this;this.room.on(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Connected,async function(){e.isConnected=!0,console.info(\"WebRTC room connected\")}),this.room.on(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Disconnected,e=>{this.isConnected=!1,this.disconnect({reason:\"agent\",context:new CloseEvent(\"close\",{reason:null==e?void 0:e.toString()})})}),this.room.on(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,e=>{e===livekit_client__WEBPACK_IMPORTED_MODULE_0__.ConnectionState.Disconnected&&(this.isConnected=!1,this.disconnect({reason:\"error\",message:`LiveKit connection state changed to ${e}`,context:new Event(\"connection_state_changed\")}))}),this.room.on(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.DataReceived,(e,t)=>{try{const t=JSON.parse((new TextDecoder).decode(e));if(\"audio\"===t.type)return;d(t)?this.handleMessage(t):console.warn(\"Invalid socket event received:\",t)}catch(t){console.warn(\"Failed to parse incoming data message:\",t),console.warn(\"Raw payload:\",(new TextDecoder).decode(e))}}),this.room.on(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscribed,async function(t,n,s){if(t.kind===livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Kind.Audio&&s.identity.includes(\"agent\")){const n=t,o=n.attach();if(o.autoplay=!0,o.controls=!1,e.outputDeviceId&&o.setSinkId)try{await o.setSinkId(e.outputDeviceId)}catch(e){console.warn(\"Failed to set output device for new audio element:\",e)}o.style.display=\"none\",document.body.appendChild(o),e.audioElements.push(o),1===e.audioElements.length&&(null==e.onDebug||e.onDebug({type:\"audio_element_ready\"})),await e.setupAudioCapture(n)}}),this.room.on(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged,async function(t){e.updateMode(t.length>0&&t[0].identity.startsWith(\"agent\")?\"speaking\":\"listening\")}),this.room.on(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,e=>{var t;null!=(t=e.identity)&&t.startsWith(\"agent\")&&this.disconnect({reason:\"agent\",context:new CloseEvent(\"close\",{reason:\"agent disconnected\"})})})}close(){if(this.isConnected){try{this.room.localParticipant.audioTrackPublications.forEach(e=>{e.track&&e.track.stop()})}catch(e){console.warn(\"Error stopping local tracks:\",e)}this.audioCaptureContext&&(this.audioCaptureContext.close().catch(e=>{console.warn(\"Error closing audio capture context:\",e)}),this.audioCaptureContext=null),this.audioElements.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this.audioElements=[],this.room.disconnect()}}async sendMessage(e){if(this.isConnected&&this.room.localParticipant){if(!(\"user_audio_chunk\"in e))try{const t=(new TextEncoder).encode(JSON.stringify(e));await this.room.localParticipant.publishData(t,{reliable:!0})}catch(t){this.debug({type:\"send_message_error\",message:{message:e,error:t}}),console.error(\"Failed to send message via WebRTC:\",t)}}else console.warn(\"Cannot send message: room not connected or no local participant\")}getRoom(){return this.room}async setMicMuted(e){if(!this.isConnected||!this.room.localParticipant)return void console.warn(\"Cannot set microphone muted: room not connected or no local participant\");const t=this.room.localParticipant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone);if(null!=t&&t.track)try{e?await t.track.mute():await t.track.unmute()}catch(t){await this.room.localParticipant.setMicrophoneEnabled(!e)}else await this.room.localParticipant.setMicrophoneEnabled(!e)}async setupAudioCapture(e){try{const t=new AudioContext;this.audioCaptureContext=t,this.outputAnalyser=t.createAnalyser(),this.outputAnalyser.fftSize=2048,this.outputAnalyser.smoothingTimeConstant=.8;const n=new MediaStream([e.mediaStreamTrack]),o=t.createMediaStreamSource(n);o.connect(this.outputAnalyser),await w(t.audioWorklet);const s=new AudioWorkletNode(t,\"rawAudioProcessor\");this.outputAnalyser.connect(s),s.port.postMessage({type:\"setFormat\",format:this.outputFormat.format,sampleRate:this.outputFormat.sampleRate}),s.port.onmessage=e=>{const[t,n]=e.data;if(n>.01){const e=v(t.buffer),n=this.audioEventId++;this.handleMessage({type:\"audio\",audio_event:{audio_base_64:e,event_id:n}})}},o.connect(s)}catch(e){console.warn(\"Failed to set up audio capture:\",e)}}setAudioVolume(e){this.audioElements.forEach(t=>{t.volume=e})}async setAudioOutputDevice(e){if(!(\"setSinkId\"in HTMLAudioElement.prototype))throw new Error(\"setSinkId is not supported in this browser\");const t=this.audioElements.map(async function(t){try{await t.setSinkId(e)}catch(e){throw console.error(\"Failed to set sink ID for audio element:\",e),e}});await Promise.all(t),this.outputDeviceId=e}async setAudioInputDevice(e){if(!this.isConnected||!this.room.localParticipant)throw new Error(\"Cannot change input device: room not connected or no local participant\");try{const t=this.room.localParticipant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone);null!=t&&t.track&&(await t.track.stop(),await this.room.localParticipant.unpublishTrack(t.track));const n={deviceId:{exact:e},echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:{ideal:1}},a=await (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.createLocalAudioTrack)(n);await this.room.localParticipant.publishTrack(a,{name:\"microphone\",source:livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone})}catch(e){console.error(\"Failed to change input device:\",e);try{await this.room.localParticipant.setMicrophoneEnabled(!0)}catch(e){console.error(\"Failed to recover microphone after device switch error:\",e)}throw e}}getOutputByteFrequencyData(){return this.outputAnalyser?(null!=this.outputFrequencyData||(this.outputFrequencyData=new Uint8Array(this.outputAnalyser.frequencyBinCount)),this.outputAnalyser.getByteFrequencyData(this.outputFrequencyData),this.outputFrequencyData):null}}async function y(e){const t=function(e){return e.connectionType?e.connectionType:\"conversationToken\"in e&&e.conversationToken?\"webrtc\":\"websocket\"}(e);switch(t){case\"websocket\":return m.create(e);case\"webrtc\":return b.create(e);default:throw new Error(`Unknown connection type: ${t}`)}}function S(){return[\"iPad Simulator\",\"iPhone Simulator\",\"iPod Simulator\",\"iPad\",\"iPhone\",\"iPod\"].includes(navigator.platform)||navigator.userAgent.includes(\"Mac\")&&\"ontouchend\"in document}async function E(e={default:0,android:3e3}){let t=e.default;var n;if(/android/i.test(navigator.userAgent))t=null!=(n=e.android)?n:t;else if(S()){var o;t=null!=(o=e.ios)?o:t}t>0&&await new Promise(e=>setTimeout(e,t))}class k extends r{static async startSession(e){const t=r.getFullOptions(e);t.onStatusChange&&t.onStatusChange({status:\"connecting\"}),t.onCanSendFeedbackChange&&t.onCanSendFeedbackChange({canSendFeedback:!1}),t.onModeChange&&t.onModeChange({mode:\"listening\"}),t.onCanSendFeedbackChange&&t.onCanSendFeedbackChange({canSendFeedback:!1});let n=null;try{return await E(t.connectionDelay),n=await y(e),new k(t,n)}catch(e){var o;throw t.onStatusChange&&t.onStatusChange({status:\"disconnected\"}),null==(o=n)||o.close(),e}}}const C={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:{ideal:1}};class M{static async create({sampleRate:e,format:t,preferHeadphonesForIosDevices:n,inputDeviceId:o,workletPaths:s,libsampleratePath:i}){let r=null,c=null;try{const l=a({sampleRate:{ideal:e}},C);if(S()&&n){const e=(await window.navigator.mediaDevices.enumerateDevices()).find(e=>\"audioinput\"===e.kind&&[\"airpod\",\"headphone\",\"earphone\"].find(t=>e.label.toLowerCase().includes(t)));e&&(l.deviceId={ideal:e.deviceId})}o&&(l.deviceId=M.getDeviceIdConstraint(o));const u=navigator.mediaDevices.getSupportedConstraints().sampleRate;r=new window.AudioContext(u?{sampleRate:e}:{});const d=r.createAnalyser();if(!u){const e=i||\"https://cdn.jsdelivr.net/npm/@alexanderolsen/libsamplerate-js@2.1.2/dist/libsamplerate.worklet.js\";await r.audioWorklet.addModule(e)}await w(r.audioWorklet,null==s?void 0:s.rawAudioProcessor);const h=a({voiceIsolation:!0},l);c=await navigator.mediaDevices.getUserMedia({audio:h});const p=r.createMediaStreamSource(c),m=new AudioWorkletNode(r,\"rawAudioProcessor\");return m.port.postMessage({type:\"setFormat\",format:t,sampleRate:e}),p.connect(d),d.connect(m),await r.resume(),new M(r,d,m,c,p)}catch(e){var l,u;throw null==(l=c)||l.getTracks().forEach(e=>{e.stop()}),null==(u=r)||u.close(),e}}static getDeviceIdConstraint(e){if(e)return S()?{ideal:e}:{exact:e}}constructor(e,t,n,o,s){this.context=void 0,this.analyser=void 0,this.worklet=void 0,this.inputStream=void 0,this.mediaStreamSource=void 0,this.context=e,this.analyser=t,this.worklet=n,this.inputStream=o,this.mediaStreamSource=s}async close(){this.inputStream.getTracks().forEach(e=>{e.stop()}),this.mediaStreamSource.disconnect(),await this.context.close()}setMuted(e){this.worklet.port.postMessage({type:\"setMuted\",isMuted:e})}async setInputDevice(e){try{const t=a({},C);e&&(t.deviceId=M.getDeviceIdConstraint(e));const n=a({voiceIsolation:!0},t),o=await navigator.mediaDevices.getUserMedia({audio:n});this.inputStream.getTracks().forEach(e=>{e.stop()}),this.mediaStreamSource.disconnect(),this.inputStream=o,this.mediaStreamSource=this.context.createMediaStreamSource(o),this.mediaStreamSource.connect(this.analyser)}catch(e){throw console.error(\"Failed to switch input device:\",e),e}}}const I=_(\"audioConcatProcessor\",'/*\\n * ulaw decoding logic taken from the wavefile library\\n * https://github.com/rochars/wavefile/blob/master/lib/codecs/mulaw.js\\n * USED BY @elevenlabs/client\\n */\\n\\nconst decodeTable = [0,132,396,924,1980,4092,8316,16764];\\n\\nfunction decodeSample(muLawSample) {\\n  let sign;\\n  let exponent;\\n  let mantissa;\\n  let sample;\\n  muLawSample = ~muLawSample;\\n  sign = (muLawSample & 0x80);\\n  exponent = (muLawSample >> 4) & 0x07;\\n  mantissa = muLawSample & 0x0F;\\n  sample = decodeTable[exponent] + (mantissa << (exponent+3));\\n  if (sign !== 0) sample = -sample;\\n\\n  return sample;\\n}\\n\\nclass AudioConcatProcessor extends AudioWorkletProcessor {\\n  constructor() {\\n    super();\\n    this.buffers = []; // Initialize an empty buffer\\n    this.cursor = 0;\\n    this.currentBuffer = null;\\n    this.wasInterrupted = false;\\n    this.finished = false;\\n    \\n    this.port.onmessage = ({ data }) => {\\n      switch (data.type) {\\n        case \"setFormat\":\\n          this.format = data.format;\\n          break;\\n        case \"buffer\":\\n          this.wasInterrupted = false;\\n          this.buffers.push(\\n            this.format === \"ulaw\"\\n              ? new Uint8Array(data.buffer)\\n              : new Int16Array(data.buffer)\\n          );\\n          break;\\n        case \"interrupt\":\\n          this.wasInterrupted = true;\\n          break;\\n        case \"clearInterrupted\":\\n          if (this.wasInterrupted) {\\n            this.wasInterrupted = false;\\n            this.buffers = [];\\n            this.currentBuffer = null;\\n          }\\n      }\\n    };\\n  }\\n  process(_, outputs) {\\n    let finished = false;\\n    const output = outputs[0][0];\\n    for (let i = 0; i < output.length; i++) {\\n      if (!this.currentBuffer) {\\n        if (this.buffers.length === 0) {\\n          finished = true;\\n          break;\\n        }\\n        this.currentBuffer = this.buffers.shift();\\n        this.cursor = 0;\\n      }\\n\\n      let value = this.currentBuffer[this.cursor];\\n      if (this.format === \"ulaw\") {\\n        value = decodeSample(value);\\n      }\\n      output[i] = value / 32768;\\n      this.cursor++;\\n\\n      if (this.cursor >= this.currentBuffer.length) {\\n        this.currentBuffer = null;\\n      }\\n    }\\n\\n    if (this.finished !== finished) {\\n      this.finished = finished;\\n      this.port.postMessage({ type: \"process\", finished });\\n    }\\n\\n    return true; // Continue processing\\n  }\\n}\\n\\nregisterProcessor(\"audioConcatProcessor\", AudioConcatProcessor);\\n');class R{static async create({sampleRate:e,format:t,outputDeviceId:n,workletPaths:o}){let s=null,a=null;try{s=new AudioContext({sampleRate:e});const i=s.createAnalyser(),r=s.createGain();a=new Audio,a.src=\"\",a.load(),a.autoplay=!0,a.style.display=\"none\",document.body.appendChild(a);const c=s.createMediaStreamDestination();a.srcObject=c.stream,r.connect(i),i.connect(c),await I(s.audioWorklet,null==o?void 0:o.audioConcatProcessor);const l=new AudioWorkletNode(s,\"audioConcatProcessor\");return l.port.postMessage({type:\"setFormat\",format:t}),l.connect(r),await s.resume(),n&&a.setSinkId&&await a.setSinkId(n),new R(s,i,r,l,a)}catch(e){var i,r;throw null!=(i=a)&&i.parentNode&&a.parentNode.removeChild(a),null==(r=a)||r.pause(),s&&\"closed\"!==s.state&&await s.close(),e}}constructor(e,t,n,o,s){this.context=void 0,this.analyser=void 0,this.gain=void 0,this.worklet=void 0,this.audioElement=void 0,this.context=e,this.analyser=t,this.gain=n,this.worklet=o,this.audioElement=s}async setOutputDevice(e){if(!(\"setSinkId\"in HTMLAudioElement.prototype))throw new Error(\"setSinkId is not supported in this browser\");await this.audioElement.setSinkId(e||\"\")}async close(){this.audioElement.parentNode&&this.audioElement.parentNode.removeChild(this.audioElement),this.audioElement.pause(),await this.context.close()}}class A extends r{static async startSession(e){var t;const n=r.getFullOptions(e);n.onStatusChange&&n.onStatusChange({status:\"connecting\"}),n.onCanSendFeedbackChange&&n.onCanSendFeedbackChange({canSendFeedback:!1});let o=null,s=null,i=null,c=null,l=null;if(null==(t=e.useWakeLock)||t)try{l=await navigator.wakeLock.request(\"screen\")}catch(e){}try{var u;return c=await navigator.mediaDevices.getUserMedia({audio:!0}),await E(n.connectionDelay),s=await y(e),[o,i]=await Promise.all([M.create(a({},s.inputFormat,{preferHeadphonesForIosDevices:e.preferHeadphonesForIosDevices,inputDeviceId:e.inputDeviceId,workletPaths:e.workletPaths,libsampleratePath:e.libsampleratePath})),R.create(a({},s.outputFormat,{outputDeviceId:e.outputDeviceId,workletPaths:e.workletPaths}))]),null==(u=c)||u.getTracks().forEach(e=>{e.stop()}),c=null,new A(n,s,o,i,l)}catch(e){var d,h,p,m;n.onStatusChange&&n.onStatusChange({status:\"disconnected\"}),null==(d=c)||d.getTracks().forEach(e=>{e.stop()}),null==(h=s)||h.close(),await(null==(p=o)?void 0:p.close()),await(null==(m=i)?void 0:m.close());try{var v;await(null==(v=l)?void 0:v.release()),l=null}catch(e){}throw e}}constructor(e,t,n,o,s){super(e,t),this.input=void 0,this.output=void 0,this.wakeLock=void 0,this.inputFrequencyData=void 0,this.outputFrequencyData=void 0,this.onInputWorkletMessage=e=>{\"connected\"===this.status&&this.connection.sendMessage({user_audio_chunk:v(e.data[0].buffer)})},this.onOutputWorkletMessage=({data:e})=>{\"process\"===e.type&&this.updateMode(e.finished?\"listening\":\"speaking\")},this.addAudioBase64Chunk=e=>{this.output.gain.gain.cancelScheduledValues(this.output.context.currentTime),this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:\"clearInterrupted\"}),this.output.worklet.port.postMessage({type:\"buffer\",buffer:g(e)})},this.fadeOutAudio=()=>{this.updateMode(\"listening\"),this.output.worklet.port.postMessage({type:\"interrupt\"}),this.output.gain.gain.exponentialRampToValueAtTime(1e-4,this.output.context.currentTime+2),setTimeout(()=>{this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:\"clearInterrupted\"})},2e3)},this.calculateVolume=e=>{if(0===e.length)return 0;let t=0;for(let n=0;n<e.length;n++)t+=e[n]/255;return t/=e.length,t<0?0:t>1?1:t},this.setVolume=({volume:e})=>{const t=Number.isFinite(e)?Math.min(1,Math.max(0,e)):1;this.volume=t,this.connection instanceof b?this.connection.setAudioVolume(t):this.output.gain.gain.value=t},this.input=n,this.output=o,this.wakeLock=s,this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.output.worklet.port.onmessage=this.onOutputWorkletMessage}async handleEndSession(){await super.handleEndSession();try{var e;await(null==(e=this.wakeLock)?void 0:e.release()),this.wakeLock=null}catch(e){}await this.input.close(),await this.output.close()}handleInterruption(e){super.handleInterruption(e),this.fadeOutAudio()}handleAudio(e){var t,n;this.lastInterruptTimestamp<=e.audio_event.event_id&&(null==(t=(n=this.options).onAudio)||t.call(n,e.audio_event.audio_base_64),this.connection instanceof b||this.addAudioBase64Chunk(e.audio_event.audio_base_64),this.currentEventId=e.audio_event.event_id,this.updateCanSendFeedback(),this.updateMode(\"speaking\"))}setMicMuted(e){this.connection instanceof b?this.connection.setMicMuted(e):this.input.setMuted(e)}getInputByteFrequencyData(){return null!=this.inputFrequencyData||(this.inputFrequencyData=new Uint8Array(this.input.analyser.frequencyBinCount)),this.input.analyser.getByteFrequencyData(this.inputFrequencyData),this.inputFrequencyData}getOutputByteFrequencyData(){return this.connection instanceof b?this.connection.getOutputByteFrequencyData()||new Uint8Array(1024):(null!=this.outputFrequencyData||(this.outputFrequencyData=new Uint8Array(this.output.analyser.frequencyBinCount)),this.output.analyser.getByteFrequencyData(this.outputFrequencyData),this.outputFrequencyData)}getInputVolume(){return this.calculateVolume(this.getInputByteFrequencyData())}getOutputVolume(){return this.calculateVolume(this.getOutputByteFrequencyData())}async changeInputDevice({sampleRate:e,format:t,preferHeadphonesForIosDevices:n,inputDeviceId:o}){try{if(this.connection instanceof m)try{return await this.input.setInputDevice(o),this.input}catch(e){console.warn(\"Failed to change device on existing input, recreating:\",e)}this.connection instanceof b&&await this.connection.setAudioInputDevice(o||\"\"),await this.input.close();const s=await M.create({sampleRate:null!=e?e:this.connection.inputFormat.sampleRate,format:null!=t?t:this.connection.inputFormat.format,preferHeadphonesForIosDevices:n,inputDeviceId:o,workletPaths:this.options.workletPaths,libsampleratePath:this.options.libsampleratePath});return this.input=s,this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.input}catch(e){throw console.error(\"Error changing input device\",e),e}}async changeOutputDevice({sampleRate:e,format:t,outputDeviceId:n}){try{if(this.connection instanceof m)try{return await this.output.setOutputDevice(n),this.output}catch(e){console.warn(\"Failed to change device on existing output, recreating:\",e)}this.connection instanceof b&&await this.connection.setAudioOutputDevice(n||\"\"),await this.output.close();const o=await R.create({sampleRate:null!=e?e:this.connection.outputFormat.sampleRate,format:null!=t?t:this.connection.outputFormat.format,outputDeviceId:n,workletPaths:this.options.workletPaths});return this.output=o,this.output}catch(e){throw console.error(\"Error changing output device\",e),e}}}function T(e,t,n=\"https://api.elevenlabs.io\"){const o={};return\"boolean\"==typeof t?o.feedback=t?\"like\":\"dislike\":(o.rating=t.rating,o.comment=t.comment),fetch(`${n}/v1/convai/conversations/${e}/feedback`,{method:\"POST\",body:JSON.stringify(o),headers:{\"Content-Type\":\"application/json\"}})}class D{constructor(){this.listeners=new Map}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set);const n=this.listeners.get(e);n&&n.add(t)}off(e,t){const n=this.listeners.get(e);n&&n.delete(t)}emit(e,...t){const n=this.listeners.get(e);n&&n.forEach(e=>{e(...t)})}}var F;!function(e){e.SESSION_STARTED=\"session_started\",e.PARTIAL_TRANSCRIPT=\"partial_transcript\",e.COMMITTED_TRANSCRIPT=\"committed_transcript\",e.COMMITTED_TRANSCRIPT_WITH_TIMESTAMPS=\"committed_transcript_with_timestamps\",e.AUTH_ERROR=\"auth_error\",e.ERROR=\"error\",e.OPEN=\"open\",e.CLOSE=\"close\",e.QUOTA_EXCEEDED=\"quota_exceeded\",e.COMMIT_THROTTLED=\"commit_throttled\",e.TRANSCRIBER_ERROR=\"transcriber_error\",e.UNACCEPTED_TERMS=\"unaccepted_terms\",e.RATE_LIMITED=\"rate_limited\",e.INPUT_ERROR=\"input_error\",e.QUEUE_OVERFLOW=\"queue_overflow\",e.RESOURCE_EXHAUSTED=\"resource_exhausted\",e.SESSION_TIME_LIMIT_EXCEEDED=\"session_time_limit_exceeded\",e.CHUNK_SIZE_EXCEEDED=\"chunk_size_exceeded\",e.INSUFFICIENT_AUDIO_ACTIVITY=\"insufficient_audio_activity\"}(F||(F={}));class P{constructor(e){this.websocket=null,this.eventEmitter=new D,this.currentSampleRate=16e3,this._audioCleanup=void 0,this.currentSampleRate=e}setWebSocket(e){this.websocket=e,this.websocket.readyState===WebSocket.OPEN?this.eventEmitter.emit(F.OPEN):this.websocket.addEventListener(\"open\",()=>{this.eventEmitter.emit(F.OPEN)}),this.websocket.addEventListener(\"message\",e=>{try{const t=JSON.parse(e.data);switch(t.message_type){case\"session_started\":this.eventEmitter.emit(F.SESSION_STARTED,t);break;case\"partial_transcript\":this.eventEmitter.emit(F.PARTIAL_TRANSCRIPT,t);break;case\"committed_transcript\":this.eventEmitter.emit(F.COMMITTED_TRANSCRIPT,t);break;case\"committed_transcript_with_timestamps\":this.eventEmitter.emit(F.COMMITTED_TRANSCRIPT_WITH_TIMESTAMPS,t);break;case\"auth_error\":this.eventEmitter.emit(F.AUTH_ERROR,t),this.eventEmitter.emit(F.ERROR,t);break;case\"quota_exceeded\":this.eventEmitter.emit(F.QUOTA_EXCEEDED,t),this.eventEmitter.emit(F.ERROR,t);break;case\"commit_throttled\":this.eventEmitter.emit(F.COMMIT_THROTTLED,t),this.eventEmitter.emit(F.ERROR,t);break;case\"transcriber_error\":this.eventEmitter.emit(F.TRANSCRIBER_ERROR,t),this.eventEmitter.emit(F.ERROR,t);break;case\"unaccepted_terms\":this.eventEmitter.emit(F.UNACCEPTED_TERMS,t),this.eventEmitter.emit(F.ERROR,t);break;case\"rate_limited\":this.eventEmitter.emit(F.RATE_LIMITED,t),this.eventEmitter.emit(F.ERROR,t);break;case\"input_error\":this.eventEmitter.emit(F.INPUT_ERROR,t),this.eventEmitter.emit(F.ERROR,t);break;case\"queue_overflow\":this.eventEmitter.emit(F.QUEUE_OVERFLOW,t),this.eventEmitter.emit(F.ERROR,t);break;case\"resource_exhausted\":this.eventEmitter.emit(F.RESOURCE_EXHAUSTED,t),this.eventEmitter.emit(F.ERROR,t);break;case\"session_time_limit_exceeded\":this.eventEmitter.emit(F.SESSION_TIME_LIMIT_EXCEEDED,t),this.eventEmitter.emit(F.ERROR,t);break;case\"chunk_size_exceeded\":this.eventEmitter.emit(F.CHUNK_SIZE_EXCEEDED,t),this.eventEmitter.emit(F.ERROR,t);break;case\"insufficient_audio_activity\":this.eventEmitter.emit(F.INSUFFICIENT_AUDIO_ACTIVITY,t),this.eventEmitter.emit(F.ERROR,t);break;case\"error\":this.eventEmitter.emit(F.ERROR,t);break;default:console.warn(\"Unknown message type:\",t)}}catch(t){console.error(\"Failed to parse WebSocket message:\",t,e.data),this.eventEmitter.emit(F.ERROR,new Error(`Failed to parse message: ${t}`))}}),this.websocket.addEventListener(\"error\",e=>{console.error(\"WebSocket error:\",e),this.eventEmitter.emit(F.ERROR,e)}),this.websocket.addEventListener(\"close\",e=>{if(console.log(`WebSocket closed: code=${e.code}, reason=\"${e.reason}\", wasClean=${e.wasClean}`),!e.wasClean||1e3!==e.code&&1005!==e.code){const t=`WebSocket closed unexpectedly: ${e.code} - ${e.reason||\"No reason provided\"}`;console.error(t),this.eventEmitter.emit(F.ERROR,new Error(t))}this.eventEmitter.emit(F.CLOSE,e)})}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}send(e){var t,n;if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Error(\"WebSocket is not connected\");const o={message_type:\"input_audio_chunk\",audio_base_64:e.audioBase64,commit:null!=(t=e.commit)&&t,sample_rate:null!=(n=e.sampleRate)?n:this.currentSampleRate,previous_text:e.previousText};this.websocket.send(JSON.stringify(o))}commit(){if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Error(\"WebSocket is not connected\");this.websocket.send(JSON.stringify({message_type:\"input_audio_chunk\",audio_base_64:\"\",commit:!0,sample_rate:this.currentSampleRate}))}close(){this._audioCleanup&&this._audioCleanup(),this.websocket&&this.websocket.close(1e3,\"User ended session\")}}const x=_(\"scribeAudioProcessor\",'/*\\n * Scribe Audio Processor for converting microphone audio to PCM16 format\\n * USED BY @elevenlabs/client\\n */\\n\\nclass ScribeAudioProcessor extends AudioWorkletProcessor {\\n  constructor() {\\n    super();\\n    this.buffer = [];\\n    this.bufferSize = 4096; // Buffer size for optimal chunk transmission\\n  }\\n\\n  process(inputs) {\\n    const input = inputs[0];\\n    if (input.length > 0) {\\n      const channelData = input[0]; // Get first channel (mono)\\n\\n      // Add incoming audio to buffer\\n      this.buffer.push(...channelData);\\n\\n      // When buffer reaches threshold, convert and send\\n      if (this.buffer.length >= this.bufferSize) {\\n        const float32Array = new Float32Array(this.buffer);\\n        const int16Array = new Int16Array(float32Array.length);\\n\\n        // Convert Float32 [-1, 1] to Int16 [-32768, 32767]\\n        for (let i = 0; i < float32Array.length; i++) {\\n          // Clamp the value to prevent overflow\\n          const sample = Math.max(-1, Math.min(1, float32Array[i]));\\n          // Scale to PCM16 range\\n          int16Array[i] = sample < 0 ? sample * 32768 : sample * 32767;\\n        }\\n\\n        // Send to main thread as transferable ArrayBuffer\\n        this.port.postMessage(\\n          {\\n            audioData: int16Array.buffer\\n          },\\n          [int16Array.buffer]\\n        );\\n\\n        // Clear buffer\\n        this.buffer = [];\\n      }\\n    }\\n\\n    return true; // Continue processing\\n  }\\n}\\n\\nregisterProcessor(\"scribeAudioProcessor\", ScribeAudioProcessor);\\n\\n');var O,U;!function(e){e.PCM_8000=\"pcm_8000\",e.PCM_16000=\"pcm_16000\",e.PCM_22050=\"pcm_22050\",e.PCM_24000=\"pcm_24000\",e.PCM_44100=\"pcm_44100\",e.PCM_48000=\"pcm_48000\",e.ULAW_8000=\"ulaw_8000\"}(O||(O={})),function(e){e.MANUAL=\"manual\",e.VAD=\"vad\"}(U||(U={}));class L{static getWebSocketUri(e=L.DEFAULT_BASE_URI){return`${e}/v1/speech-to-text/realtime`}static buildWebSocketUri(e){const t=L.getWebSocketUri(e.baseUri),n=new URLSearchParams;if(n.append(\"model_id\",e.modelId),n.append(\"token\",e.token),void 0!==e.commitStrategy&&n.append(\"commit_strategy\",e.commitStrategy),void 0!==e.audioFormat&&n.append(\"audio_format\",e.audioFormat),void 0!==e.vadSilenceThresholdSecs){if(e.vadSilenceThresholdSecs<=.3||e.vadSilenceThresholdSecs>3)throw new Error(\"vadSilenceThresholdSecs must be between 0.3 and 3.0\");n.append(\"vad_silence_threshold_secs\",e.vadSilenceThresholdSecs.toString())}if(void 0!==e.vadThreshold){if(e.vadThreshold<.1||e.vadThreshold>.9)throw new Error(\"vadThreshold must be between 0.1 and 0.9\");n.append(\"vad_threshold\",e.vadThreshold.toString())}if(void 0!==e.minSpeechDurationMs){if(e.minSpeechDurationMs<=50||e.minSpeechDurationMs>2e3)throw new Error(\"minSpeechDurationMs must be between 50 and 2000\");n.append(\"min_speech_duration_ms\",e.minSpeechDurationMs.toString())}if(void 0!==e.minSilenceDurationMs){if(e.minSilenceDurationMs<=50||e.minSilenceDurationMs>2e3)throw new Error(\"minSilenceDurationMs must be between 50 and 2000\");n.append(\"min_silence_duration_ms\",e.minSilenceDurationMs.toString())}void 0!==e.languageCode&&n.append(\"language_code\",e.languageCode),void 0!==e.includeTimestamps&&n.append(\"include_timestamps\",e.includeTimestamps?\"true\":\"false\");const o=n.toString();return o?`${t}?${o}`:t}static connect(e){if(!e.modelId)throw new Error(\"modelId is required\");const t=new P(\"microphone\"in e&&e.microphone?16e3:e.sampleRate),n=L.buildWebSocketUri(e),o=new WebSocket(n);return\"microphone\"in e&&e.microphone&&o.addEventListener(\"open\",()=>{L.streamFromMicrophone(e,t)}),t.setWebSocket(o),t}static async streamFromMicrophone(e,t){try{var n,o,s,a,i,r,c,l,u;const d=await navigator.mediaDevices.getUserMedia({audio:{deviceId:null==(n=e.microphone)?void 0:n.deviceId,echoCancellation:null==(o=null==(s=e.microphone)?void 0:s.echoCancellation)||o,noiseSuppression:null==(a=null==(i=e.microphone)?void 0:i.noiseSuppression)||a,autoGainControl:null==(r=null==(c=e.microphone)?void 0:c.autoGainControl)||r,channelCount:null!=(l=null==(u=e.microphone)?void 0:u.channelCount)?l:1,sampleRate:{ideal:16e3}}}),h=new AudioContext({sampleRate:16e3});await x(h.audioWorklet);const p=h.createMediaStreamSource(d),m=new AudioWorkletNode(h,\"scribeAudioProcessor\");m.port.onmessage=e=>{const{audioData:n}=e.data,o=new Uint8Array(n);let s=\"\";for(let e=0;e<o.length;e++)s+=String.fromCharCode(o[e]);const a=btoa(s);t.send({audioBase64:a})},p.connect(m),\"suspended\"===h.state&&await h.resume(),t._audioCleanup=()=>{d.getTracks().forEach(e=>{e.stop()}),p.disconnect(),m.disconnect(),h.close()}}catch(e){throw console.error(\"Failed to start microphone streaming:\",e),e}}}L.DEFAULT_BASE_URI=\"wss://api.elevenlabs.io\";class N extends r{static startSession(e){return e.textOnly?k.startSession(e):A.startSession(e)}}\n//# sourceMappingURL=lib.modern.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGVsZXZlbmxhYnMvY2xpZW50L2Rpc3QvbGliLm1vZGVybi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBZ0gsYUFBYSx3REFBd0QsWUFBWSxtQkFBbUIsS0FBSyxtQkFBbUIsa0JBQWtCLHdDQUF3QyxTQUFTLHlCQUF5QiwwQkFBMEIsUUFBUSx5QkFBeUIsVUFBVSxjQUFjLGlCQUFpQixlQUFlLG9CQUFvQixlQUFlLGlCQUFpQixlQUFlLG9CQUFvQixzQkFBc0IsK0JBQStCLHVCQUF1QixJQUFJLGlCQUFpQixXQUFXLDRQQUE0UCwrTEFBK0wsa0NBQWtDLGVBQWUsdURBQXVELDBEQUEwRCw0REFBNEQsc0ZBQXNGLDJCQUEyQixnQ0FBZ0MsU0FBUyw0REFBNEQsdUNBQXVDLEdBQUcsdUZBQXVGLEVBQUUsT0FBTyx5Q0FBeUMsZ0RBQWdELGlEQUFpRCwyQ0FBMkMsRUFBRSx1REFBdUQsdUVBQXVFLGlFQUFpRSxtRUFBbUUsbUZBQW1GLDJFQUEyRSw0RUFBNEUsOENBQThDLDhEQUE4RCxrQkFBa0IsU0FBUyxJQUFJLGNBQWMsa0ZBQWtGLGdDQUFnQyx3TEFBd0wsYUFBYSxtQ0FBbUMsY0FBYyxFQUFFLHlCQUF5Qix3QkFBd0IsY0FBYyxrRkFBa0YsT0FBTyxHQUFHLGdCQUFnQiwwRkFBMEYsU0FBUyxHQUFHLHdCQUF3Qix1REFBdUQsOEhBQThILGtCQUFrQixHQUFHLHNCQUFzQiwySUFBMkksdUNBQXVDLEdBQUcsdUJBQXVCLGdEQUFnRCx1RUFBdUUsRUFBRSx3QkFBd0IsZ0RBQWdELDZFQUE2RSxFQUFFLGdDQUFnQyw0Q0FBNEMsNEdBQTRHLEVBQUUsa0JBQWtCLGtEQUFrRCxxQ0FBcUMsRUFBRSw4QkFBOEIsbUdBQW1HLE1BQU0scU1BQXFNLDZCQUE2Qiw0RkFBNEYsRUFBRSxTQUFTLG1FQUFtRSx5QkFBeUIsR0FBRyw0Q0FBNEMsK0JBQStCLCtHQUErRyx5QkFBeUIsY0FBYyxFQUFFLEtBQUssaUhBQWlI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R0FBRyxRQUFRLHlHQUF5RyxpTkFBaU4sbUJBQW1CLGNBQWMsdUJBQXVCLDhCQUE4QixrREFBa0QsdUJBQXVCLDhCQUE4Qiw2QkFBNkIsc0NBQXNDLDZHQUE2RyxnSEFBZ0gsNkRBQTZELGlFQUFpRSx5RkFBeUYseUJBQXlCLE1BQU0sd0hBQXdILDRHQUE0RyxXQUFXLDJHQUEyRyx1REFBdUQsNENBQTRDLHNEQUFzRCxTQUFTLE9BQU8scUJBQXFCLDJCQUEyQixHQUFHLG9FQUFvRSxPQUFPLFFBQVEsYUFBYSxzS0FBc0ssU0FBUyxlQUFlLDhCQUE4QixTQUFTLEdBQUcsUUFBUSw2Q0FBNkMsU0FBUyxFQUFFLDZCQUE2Qiw0QkFBNEIsMkRBQTJELHVPQUF1TyxxSUFBcUksNEVBQTRFLDRCQUE0QixvR0FBb0csb0RBQW9ELG1DQUFtQywySEFBMkgsb0VBQW9FLG9DQUFvQyw4SEFBOEgsc0VBQXNFLGtLQUFrSyxxQkFBcUIsWUFBWSxFQUFFLEdBQUcsRUFBRSxJQUFJLGtCQUFrQixxREFBcUQsNEdBQTRHLHFFQUFxRSw0QkFBNEIsc0JBQXNCLHVDQUF1QyxJQUFJLHNCQUFzQixtREFBbUQsT0FBTyxpWEFBaVgsYUFBYSxzQkFBc0IsZ0JBQWdCLEVBQUUsd0JBQXdCLHNGQUFzRixxQkFBcUIsTUFBTSxZQUFZLDRCQUE0QixTQUFTLFlBQVksV0FBVyxpQ0FBaUMsZ0JBQWdCLFFBQVEsY0FBYyxFQUFFLDJFQUEyRSwwQkFBMEIsU0FBUywyQ0FBMkMsU0FBUyxtRUFBbUUsNkNBQTZDLGtCQUFrQix1QkFBdUIsdURBQWdWO0FBQzM2N0MiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYWpheVxcT25lRHJpdmVcXERvY3VtZW50c1xcSW50ZXJ2aWV3X0NvZGVcXGFpLWludGVydmlldy1lZHlzb3ItbWFpblxcYWktaW50ZXJ2aWV3LWVkeXNvci1tYWluXFxzdHVkZW50LXNpZGVcXHN0dWRlbnQtc2lkZVxcbm9kZV9tb2R1bGVzXFxAZWxldmVubGFic1xcY2xpZW50XFxkaXN0XFxsaWIubW9kZXJuLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydHtSb29tIGFzIGUsUm9vbUV2ZW50IGFzIHQsQ29ubmVjdGlvblN0YXRlIGFzIG4sVHJhY2sgYXMgbyxjcmVhdGVMb2NhbEF1ZGlvVHJhY2sgYXMgc31mcm9tXCJsaXZla2l0LWNsaWVudFwiO2Z1bmN0aW9uIGEoKXtyZXR1cm4gYT1PYmplY3QuYXNzaWduP09iamVjdC5hc3NpZ24uYmluZCgpOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XTtmb3IodmFyIG8gaW4gbikoe30pLmhhc093blByb3BlcnR5LmNhbGwobixvKSYmKGVbb109bltvXSl9cmV0dXJuIGV9LGEuYXBwbHkobnVsbCxhcmd1bWVudHMpfWNvbnN0IGk9bmV3IFVpbnQ4QXJyYXkoMCk7Y2xhc3MgcntzdGF0aWMgZ2V0RnVsbE9wdGlvbnMoZSl7cmV0dXJuIGEoe2NsaWVudFRvb2xzOnt9LG9uQ29ubmVjdDooKT0+e30sb25EZWJ1ZzooKT0+e30sb25EaXNjb25uZWN0OigpPT57fSxvbkVycm9yOigpPT57fSxvbk1lc3NhZ2U6KCk9Pnt9LG9uQXVkaW86KCk9Pnt9LG9uTW9kZUNoYW5nZTooKT0+e30sb25TdGF0dXNDaGFuZ2U6KCk9Pnt9LG9uQ2FuU2VuZEZlZWRiYWNrQ2hhbmdlOigpPT57fSxvbkludGVycnVwdGlvbjooKT0+e319LGUpfWNvbnN0cnVjdG9yKGUsdCl7dmFyIG49dGhpczt0aGlzLm9wdGlvbnM9dm9pZCAwLHRoaXMuY29ubmVjdGlvbj12b2lkIDAsdGhpcy5sYXN0SW50ZXJydXB0VGltZXN0YW1wPTAsdGhpcy5tb2RlPVwibGlzdGVuaW5nXCIsdGhpcy5zdGF0dXM9XCJjb25uZWN0aW5nXCIsdGhpcy52b2x1bWU9MSx0aGlzLmN1cnJlbnRFdmVudElkPTEsdGhpcy5sYXN0RmVlZGJhY2tFdmVudElkPTAsdGhpcy5jYW5TZW5kRmVlZGJhY2s9ITEsdGhpcy5lbmRTZXNzaW9uV2l0aERldGFpbHM9YXN5bmMgZnVuY3Rpb24oZSl7XCJjb25uZWN0ZWRcIiE9PW4uc3RhdHVzJiZcImNvbm5lY3RpbmdcIiE9PW4uc3RhdHVzfHwobi51cGRhdGVTdGF0dXMoXCJkaXNjb25uZWN0aW5nXCIpLGF3YWl0IG4uaGFuZGxlRW5kU2Vzc2lvbigpLG4udXBkYXRlU3RhdHVzKFwiZGlzY29ubmVjdGVkXCIpLG4ub3B0aW9ucy5vbkRpc2Nvbm5lY3QmJm4ub3B0aW9ucy5vbkRpc2Nvbm5lY3QoZSkpfSx0aGlzLm9uTWVzc2FnZT1hc3luYyBmdW5jdGlvbihlKXtzd2l0Y2goZS50eXBlKXtjYXNlXCJpbnRlcnJ1cHRpb25cIjpyZXR1cm4gdm9pZCBuLmhhbmRsZUludGVycnVwdGlvbihlKTtjYXNlXCJhZ2VudF9yZXNwb25zZVwiOnJldHVybiB2b2lkIG4uaGFuZGxlQWdlbnRSZXNwb25zZShlKTtjYXNlXCJ1c2VyX3RyYW5zY3JpcHRcIjpyZXR1cm4gdm9pZCBuLmhhbmRsZVVzZXJUcmFuc2NyaXB0KGUpO2Nhc2VcImludGVybmFsX3RlbnRhdGl2ZV9hZ2VudF9yZXNwb25zZVwiOnJldHVybiB2b2lkIG4uaGFuZGxlVGVudGF0aXZlQWdlbnRSZXNwb25zZShlKTtjYXNlXCJjbGllbnRfdG9vbF9jYWxsXCI6dHJ5e2F3YWl0IG4uaGFuZGxlQ2xpZW50VG9vbENhbGwoZSl9Y2F0Y2godCl7bi5vbkVycm9yKGBVbmV4cGVjdGVkIGVycm9yIGluIGNsaWVudCB0b29sIGNhbGwgaGFuZGxpbmc6ICR7dCBpbnN0YW5jZW9mIEVycm9yP3QubWVzc2FnZTpTdHJpbmcodCl9YCx7Y2xpZW50VG9vbE5hbWU6ZS5jbGllbnRfdG9vbF9jYWxsLnRvb2xfbmFtZSx0b29sQ2FsbElkOmUuY2xpZW50X3Rvb2xfY2FsbC50b29sX2NhbGxfaWR9KX1yZXR1cm47Y2FzZVwiYXVkaW9cIjpyZXR1cm4gdm9pZCBuLmhhbmRsZUF1ZGlvKGUpO2Nhc2VcInZhZF9zY29yZVwiOnJldHVybiB2b2lkIG4uaGFuZGxlVmFkU2NvcmUoZSk7Y2FzZVwicGluZ1wiOnJldHVybiB2b2lkIG4uY29ubmVjdGlvbi5zZW5kTWVzc2FnZSh7dHlwZTpcInBvbmdcIixldmVudF9pZDplLnBpbmdfZXZlbnQuZXZlbnRfaWR9KTtjYXNlXCJtY3BfdG9vbF9jYWxsXCI6cmV0dXJuIHZvaWQgbi5oYW5kbGVNQ1BUb29sQ2FsbChlKTtjYXNlXCJtY3BfY29ubmVjdGlvbl9zdGF0dXNcIjpyZXR1cm4gdm9pZCBuLmhhbmRsZU1DUENvbm5lY3Rpb25TdGF0dXMoZSk7Y2FzZVwiYWdlbnRfdG9vbF9yZXF1ZXN0XCI6cmV0dXJuIHZvaWQgbi5oYW5kbGVBZ2VudFRvb2xSZXF1ZXN0KGUpO2Nhc2VcImFnZW50X3Rvb2xfcmVzcG9uc2VcIjpyZXR1cm4gdm9pZCBuLmhhbmRsZUFnZW50VG9vbFJlc3BvbnNlKGUpO2Nhc2VcImNvbnZlcnNhdGlvbl9pbml0aWF0aW9uX21ldGFkYXRhXCI6cmV0dXJuIHZvaWQgbi5oYW5kbGVDb252ZXJzYXRpb25NZXRhZGF0YShlKTtjYXNlXCJhc3JfaW5pdGlhdGlvbl9tZXRhZGF0YVwiOnJldHVybiB2b2lkIG4uaGFuZGxlQXNySW5pdGlhdGlvbk1ldGFkYXRhKGUpO2Nhc2VcImFnZW50X2NoYXRfcmVzcG9uc2VfcGFydFwiOnJldHVybiB2b2lkIG4uaGFuZGxlQWdlbnRDaGF0UmVzcG9uc2VQYXJ0KGUpO2Nhc2VcImVycm9yXCI6cmV0dXJuIHZvaWQgbi5oYW5kbGVFcnJvckV2ZW50KGUpO2RlZmF1bHQ6cmV0dXJuIHZvaWQobi5vcHRpb25zLm9uRGVidWcmJm4ub3B0aW9ucy5vbkRlYnVnKGUpKX19LHRoaXMuc2V0Vm9sdW1lPSh7dm9sdW1lOmV9KT0+e3RoaXMudm9sdW1lPWV9LHRoaXMub3B0aW9ucz1lLHRoaXMuY29ubmVjdGlvbj10LHRoaXMub3B0aW9ucy5vbkNvbm5lY3QmJnRoaXMub3B0aW9ucy5vbkNvbm5lY3Qoe2NvbnZlcnNhdGlvbklkOnQuY29udmVyc2F0aW9uSWR9KSx0aGlzLmNvbm5lY3Rpb24ub25NZXNzYWdlKHRoaXMub25NZXNzYWdlKSx0aGlzLmNvbm5lY3Rpb24ub25EaXNjb25uZWN0KHRoaXMuZW5kU2Vzc2lvbldpdGhEZXRhaWxzKSx0aGlzLmNvbm5lY3Rpb24ub25Nb2RlQ2hhbmdlKGU9PnRoaXMudXBkYXRlTW9kZShlKSksdGhpcy51cGRhdGVTdGF0dXMoXCJjb25uZWN0ZWRcIil9ZW5kU2Vzc2lvbigpe3JldHVybiB0aGlzLmVuZFNlc3Npb25XaXRoRGV0YWlscyh7cmVhc29uOlwidXNlclwifSl9YXN5bmMgaGFuZGxlRW5kU2Vzc2lvbigpe3RoaXMuY29ubmVjdGlvbi5jbG9zZSgpfXVwZGF0ZU1vZGUoZSl7ZSE9PXRoaXMubW9kZSYmKHRoaXMubW9kZT1lLHRoaXMub3B0aW9ucy5vbk1vZGVDaGFuZ2UmJnRoaXMub3B0aW9ucy5vbk1vZGVDaGFuZ2Uoe21vZGU6ZX0pKX11cGRhdGVTdGF0dXMoZSl7ZSE9PXRoaXMuc3RhdHVzJiYodGhpcy5zdGF0dXM9ZSx0aGlzLm9wdGlvbnMub25TdGF0dXNDaGFuZ2UmJnRoaXMub3B0aW9ucy5vblN0YXR1c0NoYW5nZSh7c3RhdHVzOmV9KSl9dXBkYXRlQ2FuU2VuZEZlZWRiYWNrKCl7Y29uc3QgZT10aGlzLmN1cnJlbnRFdmVudElkIT09dGhpcy5sYXN0RmVlZGJhY2tFdmVudElkO3RoaXMuY2FuU2VuZEZlZWRiYWNrIT09ZSYmKHRoaXMuY2FuU2VuZEZlZWRiYWNrPWUsdGhpcy5vcHRpb25zLm9uQ2FuU2VuZEZlZWRiYWNrQ2hhbmdlJiZ0aGlzLm9wdGlvbnMub25DYW5TZW5kRmVlZGJhY2tDaGFuZ2Uoe2NhblNlbmRGZWVkYmFjazplfSkpfWhhbmRsZUludGVycnVwdGlvbihlKXtlLmludGVycnVwdGlvbl9ldmVudCYmKHRoaXMubGFzdEludGVycnVwdFRpbWVzdGFtcD1lLmludGVycnVwdGlvbl9ldmVudC5ldmVudF9pZCx0aGlzLm9wdGlvbnMub25JbnRlcnJ1cHRpb24mJnRoaXMub3B0aW9ucy5vbkludGVycnVwdGlvbih7ZXZlbnRfaWQ6ZS5pbnRlcnJ1cHRpb25fZXZlbnQuZXZlbnRfaWR9KSl9aGFuZGxlQWdlbnRSZXNwb25zZShlKXt0aGlzLm9wdGlvbnMub25NZXNzYWdlJiZ0aGlzLm9wdGlvbnMub25NZXNzYWdlKHtzb3VyY2U6XCJhaVwiLHJvbGU6XCJhZ2VudFwiLG1lc3NhZ2U6ZS5hZ2VudF9yZXNwb25zZV9ldmVudC5hZ2VudF9yZXNwb25zZX0pfWhhbmRsZVVzZXJUcmFuc2NyaXB0KGUpe3RoaXMub3B0aW9ucy5vbk1lc3NhZ2UmJnRoaXMub3B0aW9ucy5vbk1lc3NhZ2Uoe3NvdXJjZTpcInVzZXJcIixyb2xlOlwidXNlclwiLG1lc3NhZ2U6ZS51c2VyX3RyYW5zY3JpcHRpb25fZXZlbnQudXNlcl90cmFuc2NyaXB0fSl9aGFuZGxlVGVudGF0aXZlQWdlbnRSZXNwb25zZShlKXt0aGlzLm9wdGlvbnMub25EZWJ1ZyYmdGhpcy5vcHRpb25zLm9uRGVidWcoe3R5cGU6XCJ0ZW50YXRpdmVfYWdlbnRfcmVzcG9uc2VcIixyZXNwb25zZTplLnRlbnRhdGl2ZV9hZ2VudF9yZXNwb25zZV9pbnRlcm5hbF9ldmVudC50ZW50YXRpdmVfYWdlbnRfcmVzcG9uc2V9KX1oYW5kbGVWYWRTY29yZShlKXt0aGlzLm9wdGlvbnMub25WYWRTY29yZSYmdGhpcy5vcHRpb25zLm9uVmFkU2NvcmUoe3ZhZFNjb3JlOmUudmFkX3Njb3JlX2V2ZW50LnZhZF9zY29yZX0pfWFzeW5jIGhhbmRsZUNsaWVudFRvb2xDYWxsKGUpe2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLm9wdGlvbnMuY2xpZW50VG9vbHMsZS5jbGllbnRfdG9vbF9jYWxsLnRvb2xfbmFtZSkpdHJ5e3ZhciB0O2NvbnN0IG49bnVsbCE9KHQ9YXdhaXQgdGhpcy5vcHRpb25zLmNsaWVudFRvb2xzW2UuY2xpZW50X3Rvb2xfY2FsbC50b29sX25hbWVdKGUuY2xpZW50X3Rvb2xfY2FsbC5wYXJhbWV0ZXJzKSk/dDpcIkNsaWVudCB0b29sIGV4ZWN1dGlvbiBzdWNjZXNzZnVsLlwiLG89XCJvYmplY3RcIj09dHlwZW9mIG4/SlNPTi5zdHJpbmdpZnkobik6U3RyaW5nKG4pO3RoaXMuY29ubmVjdGlvbi5zZW5kTWVzc2FnZSh7dHlwZTpcImNsaWVudF90b29sX3Jlc3VsdFwiLHRvb2xfY2FsbF9pZDplLmNsaWVudF90b29sX2NhbGwudG9vbF9jYWxsX2lkLHJlc3VsdDpvLGlzX2Vycm9yOiExfSl9Y2F0Y2godCl7dGhpcy5vbkVycm9yKGBDbGllbnQgdG9vbCBleGVjdXRpb24gZmFpbGVkIHdpdGggZm9sbG93aW5nIGVycm9yOiAke251bGw9PXQ/dm9pZCAwOnQubWVzc2FnZX1gLHtjbGllbnRUb29sTmFtZTplLmNsaWVudF90b29sX2NhbGwudG9vbF9uYW1lfSksdGhpcy5jb25uZWN0aW9uLnNlbmRNZXNzYWdlKHt0eXBlOlwiY2xpZW50X3Rvb2xfcmVzdWx0XCIsdG9vbF9jYWxsX2lkOmUuY2xpZW50X3Rvb2xfY2FsbC50b29sX2NhbGxfaWQscmVzdWx0OmBDbGllbnQgdG9vbCBleGVjdXRpb24gZmFpbGVkOiAke251bGw9PXQ/dm9pZCAwOnQubWVzc2FnZX1gLGlzX2Vycm9yOiEwfSl9ZWxzZXtpZih0aGlzLm9wdGlvbnMub25VbmhhbmRsZWRDbGllbnRUb29sQ2FsbClyZXR1cm4gdm9pZCB0aGlzLm9wdGlvbnMub25VbmhhbmRsZWRDbGllbnRUb29sQ2FsbChlLmNsaWVudF90b29sX2NhbGwpO3RoaXMub25FcnJvcihgQ2xpZW50IHRvb2wgd2l0aCBuYW1lICR7ZS5jbGllbnRfdG9vbF9jYWxsLnRvb2xfbmFtZX0gaXMgbm90IGRlZmluZWQgb24gY2xpZW50YCx7Y2xpZW50VG9vbE5hbWU6ZS5jbGllbnRfdG9vbF9jYWxsLnRvb2xfbmFtZX0pLHRoaXMuY29ubmVjdGlvbi5zZW5kTWVzc2FnZSh7dHlwZTpcImNsaWVudF90b29sX3Jlc3VsdFwiLHRvb2xfY2FsbF9pZDplLmNsaWVudF90b29sX2NhbGwudG9vbF9jYWxsX2lkLHJlc3VsdDpgQ2xpZW50IHRvb2wgd2l0aCBuYW1lICR7ZS5jbGllbnRfdG9vbF9jYWxsLnRvb2xfbmFtZX0gaXMgbm90IGRlZmluZWQgb24gY2xpZW50YCxpc19lcnJvcjohMH0pfX1oYW5kbGVBdWRpbyhlKXt9aGFuZGxlTUNQVG9vbENhbGwoZSl7dGhpcy5vcHRpb25zLm9uTUNQVG9vbENhbGwmJnRoaXMub3B0aW9ucy5vbk1DUFRvb2xDYWxsKGUubWNwX3Rvb2xfY2FsbCl9aGFuZGxlTUNQQ29ubmVjdGlvblN0YXR1cyhlKXt0aGlzLm9wdGlvbnMub25NQ1BDb25uZWN0aW9uU3RhdHVzJiZ0aGlzLm9wdGlvbnMub25NQ1BDb25uZWN0aW9uU3RhdHVzKGUubWNwX2Nvbm5lY3Rpb25fc3RhdHVzKX1oYW5kbGVBZ2VudFRvb2xSZXF1ZXN0KGUpe3RoaXMub3B0aW9ucy5vbkFnZW50VG9vbFJlcXVlc3QmJnRoaXMub3B0aW9ucy5vbkFnZW50VG9vbFJlcXVlc3QoZS5hZ2VudF90b29sX3JlcXVlc3QpfWhhbmRsZUFnZW50VG9vbFJlc3BvbnNlKGUpe1wiZW5kX2NhbGxcIj09PWUuYWdlbnRfdG9vbF9yZXNwb25zZS50b29sX25hbWUmJnRoaXMuZW5kU2Vzc2lvbldpdGhEZXRhaWxzKHtyZWFzb246XCJhZ2VudFwiLGNvbnRleHQ6bmV3IENsb3NlRXZlbnQoXCJlbmRfY2FsbFwiLHtyZWFzb246XCJBZ2VudCBlbmRlZCB0aGUgY2FsbFwifSl9KSx0aGlzLm9wdGlvbnMub25BZ2VudFRvb2xSZXNwb25zZSYmdGhpcy5vcHRpb25zLm9uQWdlbnRUb29sUmVzcG9uc2UoZS5hZ2VudF90b29sX3Jlc3BvbnNlKX1oYW5kbGVDb252ZXJzYXRpb25NZXRhZGF0YShlKXt0aGlzLm9wdGlvbnMub25Db252ZXJzYXRpb25NZXRhZGF0YSYmdGhpcy5vcHRpb25zLm9uQ29udmVyc2F0aW9uTWV0YWRhdGEoZS5jb252ZXJzYXRpb25faW5pdGlhdGlvbl9tZXRhZGF0YV9ldmVudCl9aGFuZGxlQXNySW5pdGlhdGlvbk1ldGFkYXRhKGUpe3RoaXMub3B0aW9ucy5vbkFzckluaXRpYXRpb25NZXRhZGF0YSYmdGhpcy5vcHRpb25zLm9uQXNySW5pdGlhdGlvbk1ldGFkYXRhKGUuYXNyX2luaXRpYXRpb25fbWV0YWRhdGFfZXZlbnQpfWhhbmRsZUFnZW50Q2hhdFJlc3BvbnNlUGFydChlKXt0aGlzLm9wdGlvbnMub25BZ2VudENoYXRSZXNwb25zZVBhcnQmJnRoaXMub3B0aW9ucy5vbkFnZW50Q2hhdFJlc3BvbnNlUGFydChlLnRleHRfcmVzcG9uc2VfcGFydCl9aGFuZGxlRXJyb3JFdmVudChlKXtjb25zdCB0PWUuZXJyb3JfZXZlbnQuZXJyb3JfdHlwZSxuPWUuZXJyb3JfZXZlbnQubWVzc2FnZXx8ZS5lcnJvcl9ldmVudC5yZWFzb258fFwiVW5rbm93biBlcnJvclwiO1wibWF4X2R1cmF0aW9uX2V4Y2VlZGVkXCIhPT10P3RoaXMub25FcnJvcihgU2VydmVyIGVycm9yOiAke259YCx7ZXJyb3JUeXBlOnQsY29kZTplLmVycm9yX2V2ZW50LmNvZGUsZGVidWdNZXNzYWdlOmUuZXJyb3JfZXZlbnQuZGVidWdfbWVzc2FnZSxkZXRhaWxzOmUuZXJyb3JfZXZlbnQuZGV0YWlsc30pOnRoaXMuZW5kU2Vzc2lvbldpdGhEZXRhaWxzKHtyZWFzb246XCJlcnJvclwiLG1lc3NhZ2U6bixjb250ZXh0Om5ldyBFdmVudChcIm1heF9kdXJhdGlvbl9leGNlZWRlZFwiKX0pfW9uRXJyb3IoZSx0KXtjb25zb2xlLmVycm9yKGUsdCksdGhpcy5vcHRpb25zLm9uRXJyb3ImJnRoaXMub3B0aW9ucy5vbkVycm9yKGUsdCl9Z2V0SWQoKXtyZXR1cm4gdGhpcy5jb25uZWN0aW9uLmNvbnZlcnNhdGlvbklkfWlzT3Blbigpe3JldHVyblwiY29ubmVjdGVkXCI9PT10aGlzLnN0YXR1c31zZXRNaWNNdXRlZChlKXt0aGlzLmNvbm5lY3Rpb24uc2V0TWljTXV0ZWQoZSl9Z2V0SW5wdXRCeXRlRnJlcXVlbmN5RGF0YSgpe3JldHVybiBpfWdldE91dHB1dEJ5dGVGcmVxdWVuY3lEYXRhKCl7cmV0dXJuIGl9Z2V0SW5wdXRWb2x1bWUoKXtyZXR1cm4gMH1nZXRPdXRwdXRWb2x1bWUoKXtyZXR1cm4gMH1zZW5kRmVlZGJhY2soZSl7dGhpcy5jYW5TZW5kRmVlZGJhY2s/KHRoaXMuY29ubmVjdGlvbi5zZW5kTWVzc2FnZSh7dHlwZTpcImZlZWRiYWNrXCIsc2NvcmU6ZT9cImxpa2VcIjpcImRpc2xpa2VcIixldmVudF9pZDp0aGlzLmN1cnJlbnRFdmVudElkfSksdGhpcy5sYXN0RmVlZGJhY2tFdmVudElkPXRoaXMuY3VycmVudEV2ZW50SWQsdGhpcy51cGRhdGVDYW5TZW5kRmVlZGJhY2soKSk6Y29uc29sZS53YXJuKDA9PT10aGlzLmxhc3RGZWVkYmFja0V2ZW50SWQ/XCJDYW5ub3Qgc2VuZCBmZWVkYmFjazogdGhlIGNvbnZlcnNhdGlvbiBoYXMgbm90IHN0YXJ0ZWQgeWV0LlwiOlwiQ2Fubm90IHNlbmQgZmVlZGJhY2s6IGZlZWRiYWNrIGhhcyBhbHJlYWR5IGJlZW4gc2VudCBmb3IgdGhlIGN1cnJlbnQgcmVzcG9uc2UuXCIpfXNlbmRDb250ZXh0dWFsVXBkYXRlKGUpe3RoaXMuY29ubmVjdGlvbi5zZW5kTWVzc2FnZSh7dHlwZTpcImNvbnRleHR1YWxfdXBkYXRlXCIsdGV4dDplfSl9c2VuZFVzZXJNZXNzYWdlKGUpe3RoaXMuY29ubmVjdGlvbi5zZW5kTWVzc2FnZSh7dHlwZTpcInVzZXJfbWVzc2FnZVwiLHRleHQ6ZX0pfXNlbmRVc2VyQWN0aXZpdHkoKXt0aGlzLmNvbm5lY3Rpb24uc2VuZE1lc3NhZ2Uoe3R5cGU6XCJ1c2VyX2FjdGl2aXR5XCJ9KX1zZW5kTUNQVG9vbEFwcHJvdmFsUmVzdWx0KGUsdCl7dGhpcy5jb25uZWN0aW9uLnNlbmRNZXNzYWdlKHt0eXBlOlwibWNwX3Rvb2xfYXBwcm92YWxfcmVzdWx0XCIsdG9vbF9jYWxsX2lkOmUsaXNfYXBwcm92ZWQ6dH0pfX1jbGFzcyBje2NvbnN0cnVjdG9yKGU9e30pe3RoaXMucXVldWU9W10sdGhpcy5kaXNjb25uZWN0aW9uRGV0YWlscz1udWxsLHRoaXMub25EaXNjb25uZWN0Q2FsbGJhY2s9bnVsbCx0aGlzLm9uTWVzc2FnZUNhbGxiYWNrPW51bGwsdGhpcy5vbk1vZGVDaGFuZ2VDYWxsYmFjaz1udWxsLHRoaXMub25EZWJ1Zz12b2lkIDAsdGhpcy5vbkRlYnVnPWUub25EZWJ1Z31kZWJ1ZyhlKXt0aGlzLm9uRGVidWcmJnRoaXMub25EZWJ1ZyhlKX1vbk1lc3NhZ2UoZSl7dGhpcy5vbk1lc3NhZ2VDYWxsYmFjaz1lO2NvbnN0IHQ9dGhpcy5xdWV1ZTt0aGlzLnF1ZXVlPVtdLHQubGVuZ3RoPjAmJnF1ZXVlTWljcm90YXNrKCgpPT57dC5mb3JFYWNoKGUpfSl9b25EaXNjb25uZWN0KGUpe3RoaXMub25EaXNjb25uZWN0Q2FsbGJhY2s9ZTtjb25zdCB0PXRoaXMuZGlzY29ubmVjdGlvbkRldGFpbHM7dCYmcXVldWVNaWNyb3Rhc2soKCk9PntlKHQpfSl9b25Nb2RlQ2hhbmdlKGUpe3RoaXMub25Nb2RlQ2hhbmdlQ2FsbGJhY2s9ZX11cGRhdGVNb2RlKGUpe3ZhciB0O251bGw9PSh0PXRoaXMub25Nb2RlQ2hhbmdlQ2FsbGJhY2spfHx0LmNhbGwodGhpcyxlKX1kaXNjb25uZWN0KGUpe3ZhciB0O3RoaXMuZGlzY29ubmVjdGlvbkRldGFpbHN8fCh0aGlzLmRpc2Nvbm5lY3Rpb25EZXRhaWxzPWUsbnVsbD09KHQ9dGhpcy5vbkRpc2Nvbm5lY3RDYWxsYmFjayl8fHQuY2FsbCh0aGlzLGUpKX1oYW5kbGVNZXNzYWdlKGUpe3RoaXMub25NZXNzYWdlQ2FsbGJhY2s/dGhpcy5vbk1lc3NhZ2VDYWxsYmFjayhlKTp0aGlzLnF1ZXVlLnB1c2goZSl9fWZ1bmN0aW9uIGwoZSl7Y29uc3RbdCxuXT1lLnNwbGl0KFwiX1wiKTtpZighW1wicGNtXCIsXCJ1bGF3XCJdLmluY2x1ZGVzKHQpKXRocm93IG5ldyBFcnJvcihgSW52YWxpZCBmb3JtYXQ6ICR7ZX1gKTtjb25zdCBvPU51bWJlci5wYXJzZUludChuKTtpZihOdW1iZXIuaXNOYU4obykpdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHNhbXBsZSByYXRlOiAke259YCk7cmV0dXJue2Zvcm1hdDp0LHNhbXBsZVJhdGU6b319Y29uc3QgdT1cIjAuMTIuMlwiO2Z1bmN0aW9uIGQoZSl7cmV0dXJuISFlLnR5cGV9Y29uc3QgaD1cImNvbnZlcnNhdGlvbl9pbml0aWF0aW9uX2NsaWVudF9kYXRhXCI7ZnVuY3Rpb24gcChlKXt2YXIgdDtjb25zdCBuPXt0eXBlOmh9O3ZhciBvLHMsYSxpLHIsYztyZXR1cm4gZS5vdmVycmlkZXMmJihuLmNvbnZlcnNhdGlvbl9jb25maWdfb3ZlcnJpZGU9e2FnZW50Ontwcm9tcHQ6bnVsbD09KG89ZS5vdmVycmlkZXMuYWdlbnQpP3ZvaWQgMDpvLnByb21wdCxmaXJzdF9tZXNzYWdlOm51bGw9PShzPWUub3ZlcnJpZGVzLmFnZW50KT92b2lkIDA6cy5maXJzdE1lc3NhZ2UsbGFuZ3VhZ2U6bnVsbD09KGE9ZS5vdmVycmlkZXMuYWdlbnQpP3ZvaWQgMDphLmxhbmd1YWdlfSx0dHM6e3ZvaWNlX2lkOm51bGw9PShpPWUub3ZlcnJpZGVzLnR0cyk/dm9pZCAwOmkudm9pY2VJZCxzcGVlZDpudWxsPT0ocj1lLm92ZXJyaWRlcy50dHMpP3ZvaWQgMDpyLnNwZWVkfSxjb252ZXJzYXRpb246e3RleHRfb25seTpudWxsPT0oYz1lLm92ZXJyaWRlcy5jb252ZXJzYXRpb24pP3ZvaWQgMDpjLnRleHRPbmx5fX0pLGUuY3VzdG9tTGxtRXh0cmFCb2R5JiYobi5jdXN0b21fbGxtX2V4dHJhX2JvZHk9ZS5jdXN0b21MbG1FeHRyYUJvZHkpLGUuZHluYW1pY1ZhcmlhYmxlcyYmKG4uZHluYW1pY192YXJpYWJsZXM9ZS5keW5hbWljVmFyaWFibGVzKSxlLnVzZXJJZCYmKG4udXNlcl9pZD1lLnVzZXJJZCksbnVsbCE9KHQ9ZS5vdmVycmlkZXMpJiZ0LmNsaWVudCYmKG4uc291cmNlX2luZm89e3NvdXJjZTplLm92ZXJyaWRlcy5jbGllbnQuc291cmNlLHZlcnNpb246ZS5vdmVycmlkZXMuY2xpZW50LnZlcnNpb259KSxufWNsYXNzIG0gZXh0ZW5kcyBje2NvbnN0cnVjdG9yKGUsdCxuLG8pe3N1cGVyKCksdGhpcy5zb2NrZXQ9dm9pZCAwLHRoaXMuY29udmVyc2F0aW9uSWQ9dm9pZCAwLHRoaXMuaW5wdXRGb3JtYXQ9dm9pZCAwLHRoaXMub3V0cHV0Rm9ybWF0PXZvaWQgMCx0aGlzLnNvY2tldD1lLHRoaXMuY29udmVyc2F0aW9uSWQ9dCx0aGlzLmlucHV0Rm9ybWF0PW4sdGhpcy5vdXRwdXRGb3JtYXQ9byx0aGlzLnNvY2tldC5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixlPT57c2V0VGltZW91dCgoKT0+dGhpcy5kaXNjb25uZWN0KHtyZWFzb246XCJlcnJvclwiLG1lc3NhZ2U6XCJUaGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIGR1ZSB0byBhIHNvY2tldCBlcnJvci5cIixjb250ZXh0OmV9KSwwKX0pLHRoaXMuc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbG9zZVwiLGU9Pnt0aGlzLmRpc2Nvbm5lY3QoMWUzPT09ZS5jb2RlP3tyZWFzb246XCJhZ2VudFwiLGNvbnRleHQ6ZX06e3JlYXNvbjpcImVycm9yXCIsbWVzc2FnZTplLnJlYXNvbnx8XCJUaGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIGJ5IHRoZSBzZXJ2ZXIuXCIsY29udGV4dDplfSl9KSx0aGlzLnNvY2tldC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGU9Pnt0cnl7Y29uc3QgdD1KU09OLnBhcnNlKGUuZGF0YSk7aWYoIWQodCkpcmV0dXJuIHZvaWQgdGhpcy5kZWJ1Zyh7dHlwZTpcImludmFsaWRfZXZlbnRcIixtZXNzYWdlOlwiUmVjZWl2ZWQgaW52YWxpZCBzb2NrZXQgZXZlbnRcIixkYXRhOmUuZGF0YX0pO3RoaXMuaGFuZGxlTWVzc2FnZSh0KX1jYXRjaCh0KXt0aGlzLmRlYnVnKHt0eXBlOlwicGFyc2luZ19lcnJvclwiLG1lc3NhZ2U6XCJGYWlsZWQgdG8gcGFyc2Ugc29ja2V0IG1lc3NhZ2VcIixlcnJvcjp0IGluc3RhbmNlb2YgRXJyb3I/dC5tZXNzYWdlOlN0cmluZyh0KSxkYXRhOmUuZGF0YX0pfX0pfXN0YXRpYyBhc3luYyBjcmVhdGUoZSl7bGV0IHQ9bnVsbDt0cnl7dmFyIG4sbyxzO2NvbnN0IGE9bnVsbCE9KG49ZS5vcmlnaW4pP246XCJ3c3M6Ly9hcGkuZWxldmVubGFicy5pb1wiO2xldCBpO2NvbnN0IHI9KG51bGw9PShvPWUub3ZlcnJpZGVzKXx8bnVsbD09KG89by5jbGllbnQpP3ZvaWQgMDpvLnZlcnNpb24pfHx1LGM9KG51bGw9PShzPWUub3ZlcnJpZGVzKXx8bnVsbD09KHM9cy5jbGllbnQpP3ZvaWQgMDpzLnNvdXJjZSl8fFwianNfc2RrXCI7aWYoZS5zaWduZWRVcmwpe2NvbnN0IHQ9ZS5zaWduZWRVcmwuaW5jbHVkZXMoXCI/XCIpP1wiJlwiOlwiP1wiO2k9YCR7ZS5zaWduZWRVcmx9JHt0fXNvdXJjZT0ke2N9JnZlcnNpb249JHtyfWB9ZWxzZSBpPWAke2F9L3YxL2NvbnZhaS9jb252ZXJzYXRpb24/YWdlbnRfaWQ9JHtlLmFnZW50SWR9JnNvdXJjZT0ke2N9JnZlcnNpb249JHtyfWA7Y29uc3QgaD1bXCJjb252YWlcIl07ZS5hdXRob3JpemF0aW9uJiZoLnB1c2goYGJlYXJlci4ke2UuYXV0aG9yaXphdGlvbn1gKSx0PW5ldyBXZWJTb2NrZXQoaSxoKTtjb25zdCB2PWF3YWl0IG5ldyBQcm9taXNlKChuLG8pPT57dC5hZGRFdmVudExpc3RlbmVyKFwib3BlblwiLCgpPT57dmFyIG47Y29uc3Qgbz1wKGUpO251bGw9PShuPXQpfHxuLnNlbmQoSlNPTi5zdHJpbmdpZnkobykpfSx7b25jZTohMH0pLHQuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsZT0+e3NldFRpbWVvdXQoKCk9Pm8oZSksMCl9KSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbG9zZVwiLG8pLHQuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixlPT57Y29uc3QgdD1KU09OLnBhcnNlKGUuZGF0YSk7ZCh0KSYmKFwiY29udmVyc2F0aW9uX2luaXRpYXRpb25fbWV0YWRhdGFcIj09PXQudHlwZT9uKHQuY29udmVyc2F0aW9uX2luaXRpYXRpb25fbWV0YWRhdGFfZXZlbnQpOmNvbnNvbGUud2FybihcIkZpcnN0IHJlY2VpdmVkIG1lc3NhZ2UgaXMgbm90IGNvbnZlcnNhdGlvbiBtZXRhZGF0YS5cIikpfSx7b25jZTohMH0pfSkse2NvbnZlcnNhdGlvbl9pZDpnLGFnZW50X291dHB1dF9hdWRpb19mb3JtYXQ6Zix1c2VyX2lucHV0X2F1ZGlvX2Zvcm1hdDpffT12LHc9bChudWxsIT1fP186XCJwY21fMTYwMDBcIiksYj1sKGYpO3JldHVybiBuZXcgbSh0LGcsdyxiKX1jYXRjaChlKXt2YXIgYTt0aHJvdyBudWxsPT0oYT10KXx8YS5jbG9zZSgpLGV9fWNsb3NlKCl7dGhpcy5zb2NrZXQuY2xvc2UoMWUzLFwiVXNlciBlbmRlZCBjb252ZXJzYXRpb25cIil9c2VuZE1lc3NhZ2UoZSl7dGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShlKSl9YXN5bmMgc2V0TWljTXV0ZWQoZSl7Y29uc29sZS53YXJuKGBXZWJTb2NrZXQgY29ubmVjdGlvbiBzZXRNaWNNdXRlZCBjYWxsZWQgd2l0aCAke2V9LCBidXQgdGhpcyBpcyBoYW5kbGVkIGJ5IFZvaWNlQ29udmVyc2F0aW9uYCl9fWZ1bmN0aW9uIHYoZSl7Y29uc3QgdD1uZXcgVWludDhBcnJheShlKTtyZXR1cm4gd2luZG93LmJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZSguLi50KSl9ZnVuY3Rpb24gZyhlKXtjb25zdCB0PXdpbmRvdy5hdG9iKGUpLG49dC5sZW5ndGgsbz1uZXcgVWludDhBcnJheShuKTtmb3IobGV0IGU9MDtlPG47ZSsrKW9bZV09dC5jaGFyQ29kZUF0KGUpO3JldHVybiBvLmJ1ZmZlcn1jb25zdCBmPW5ldyBNYXA7ZnVuY3Rpb24gXyhlLHQpe3JldHVybiBhc3luYyhuLG8pPT57Y29uc3Qgcz1mLmdldChlKTtpZihzKXJldHVybiBuLmFkZE1vZHVsZShzKTtpZihvKXRyeXtyZXR1cm4gYXdhaXQgbi5hZGRNb2R1bGUobyksdm9pZCBmLnNldChlLG8pfWNhdGNoKHQpe3Rocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgdGhlICR7ZX0gd29ya2xldCBtb2R1bGUgZnJvbSBwYXRoOiAke299LiBFcnJvcjogJHt0fWApfWNvbnN0IGE9bmV3IEJsb2IoW3RdLHt0eXBlOlwiYXBwbGljYXRpb24vamF2YXNjcmlwdFwifSksaT1VUkwuY3JlYXRlT2JqZWN0VVJMKGEpO3RyeXtyZXR1cm4gYXdhaXQgbi5hZGRNb2R1bGUoaSksdm9pZCBmLnNldChlLGkpfWNhdGNoKGUpe1VSTC5yZXZva2VPYmplY3RVUkwoaSl9dHJ5e2NvbnN0IG89YGRhdGE6YXBwbGljYXRpb24vamF2YXNjcmlwdDtiYXNlNjQsJHtidG9hKHQpfWA7YXdhaXQgbi5hZGRNb2R1bGUobyksZi5zZXQoZSxvKX1jYXRjaCh0KXt0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIHRoZSAke2V9IHdvcmtsZXQgbW9kdWxlLiBNYWtlIHN1cmUgdGhlIGJyb3dzZXIgc3VwcG9ydHMgQXVkaW9Xb3JrbGV0cy4gSWYgeW91IGFyZSB1c2luZyBhIHN0cmljdCBDU1AsIHlvdSBtYXkgbmVlZCB0byBzZWxmLWhvc3QgdGhlIHdvcmtsZXQgZmlsZXMuYCl9fX1jb25zdCB3PV8oXCJyYXdBdWRpb1Byb2Nlc3NvclwiLCcvKlxcbiAqIHVsYXcgZW5jb2RpbmcgbG9naWMgdGFrZW4gZnJvbSB0aGUgd2F2ZWZpbGUgbGlicmFyeVxcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9yb2NoYXJzL3dhdmVmaWxlL2Jsb2IvbWFzdGVyL2xpYi9jb2RlY3MvbXVsYXcuanNcXG4gKiBVU0VEIEJZIEBlbGV2ZW5sYWJzL2NsaWVudFxcbiAqL1xcblxcbmNvbnN0IEJJQVMgPSAweDg0O1xcbmNvbnN0IENMSVAgPSAzMjYzNTtcXG5jb25zdCBlbmNvZGVUYWJsZSA9IFtcXG4gIDAsMCwxLDEsMiwyLDIsMiwzLDMsMywzLDMsMywzLDMsXFxuICA0LDQsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LFxcbiAgNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSxcXG4gIDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsXFxuICA2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LFxcbiAgNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNixcXG4gIDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsXFxuICA2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LFxcbiAgNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyxcXG4gIDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsXFxuICA3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LFxcbiAgNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyxcXG4gIDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsXFxuICA3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LFxcbiAgNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyxcXG4gIDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDdcXG5dO1xcblxcbmZ1bmN0aW9uIGVuY29kZVNhbXBsZShzYW1wbGUpIHtcXG4gIGxldCBzaWduO1xcbiAgbGV0IGV4cG9uZW50O1xcbiAgbGV0IG1hbnRpc3NhO1xcbiAgbGV0IG11TGF3U2FtcGxlO1xcbiAgc2lnbiA9IChzYW1wbGUgPj4gOCkgJiAweDgwO1xcbiAgaWYgKHNpZ24gIT09IDApIHNhbXBsZSA9IC1zYW1wbGU7XFxuICBzYW1wbGUgPSBzYW1wbGUgKyBCSUFTO1xcbiAgaWYgKHNhbXBsZSA+IENMSVApIHNhbXBsZSA9IENMSVA7XFxuICBleHBvbmVudCA9IGVuY29kZVRhYmxlWyhzYW1wbGU+PjcpICYgMHhGRl07XFxuICBtYW50aXNzYSA9IChzYW1wbGUgPj4gKGV4cG9uZW50KzMpKSAmIDB4MEY7XFxuICBtdUxhd1NhbXBsZSA9IH4oc2lnbiB8IChleHBvbmVudCA8PCA0KSB8IG1hbnRpc3NhKTtcXG4gIFxcbiAgcmV0dXJuIG11TGF3U2FtcGxlO1xcbn1cXG5cXG5jbGFzcyBSYXdBdWRpb1Byb2Nlc3NvciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7XFxuICBjb25zdHJ1Y3RvcigpIHtcXG4gICAgc3VwZXIoKTtcXG4gICAgICAgICAgICAgIFxcbiAgICB0aGlzLnBvcnQub25tZXNzYWdlID0gKHsgZGF0YSB9KSA9PiB7XFxuICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcXG4gICAgICAgIGNhc2UgXCJzZXRGb3JtYXRcIjpcXG4gICAgICAgICAgdGhpcy5pc011dGVkID0gZmFsc2U7XFxuICAgICAgICAgIHRoaXMuYnVmZmVyID0gW107IC8vIEluaXRpYWxpemUgYW4gZW1wdHkgYnVmZmVyXFxuICAgICAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IGRhdGEuc2FtcGxlUmF0ZSAvIDQ7XFxuICAgICAgICAgIHRoaXMuZm9ybWF0ID0gZGF0YS5mb3JtYXQ7XFxuXFxuICAgICAgICAgIGlmIChnbG9iYWxUaGlzLkxpYlNhbXBsZVJhdGUgJiYgc2FtcGxlUmF0ZSAhPT0gZGF0YS5zYW1wbGVSYXRlKSB7XFxuICAgICAgICAgICAgZ2xvYmFsVGhpcy5MaWJTYW1wbGVSYXRlLmNyZWF0ZSgxLCBzYW1wbGVSYXRlLCBkYXRhLnNhbXBsZVJhdGUpLnRoZW4ocmVzYW1wbGVyID0+IHtcXG4gICAgICAgICAgICAgIHRoaXMucmVzYW1wbGVyID0gcmVzYW1wbGVyO1xcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgICB9XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgY2FzZSBcInNldE11dGVkXCI6XFxuICAgICAgICAgIHRoaXMuaXNNdXRlZCA9IGRhdGEuaXNNdXRlZDtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgfVxcbiAgICB9O1xcbiAgfVxcbiAgcHJvY2VzcyhpbnB1dHMpIHtcXG4gICAgaWYgKCF0aGlzLmJ1ZmZlcikge1xcbiAgICAgIHJldHVybiB0cnVlO1xcbiAgICB9XFxuICAgIFxcbiAgICBjb25zdCBpbnB1dCA9IGlucHV0c1swXTsgLy8gR2V0IHRoZSBmaXJzdCBpbnB1dCBub2RlXFxuICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XFxuICAgICAgbGV0IGNoYW5uZWxEYXRhID0gaW5wdXRbMF07IC8vIEdldCB0aGUgZmlyc3QgY2hhbm5lbFxcJ3MgZGF0YVxcblxcbiAgICAgIC8vIFJlc2FtcGxlIHRoZSBhdWRpbyBpZiBuZWNlc3NhcnlcXG4gICAgICBpZiAodGhpcy5yZXNhbXBsZXIpIHtcXG4gICAgICAgIGNoYW5uZWxEYXRhID0gdGhpcy5yZXNhbXBsZXIuZnVsbChjaGFubmVsRGF0YSk7XFxuICAgICAgfVxcblxcbiAgICAgIC8vIEFkZCBjaGFubmVsIGRhdGEgdG8gdGhlIGJ1ZmZlclxcbiAgICAgIHRoaXMuYnVmZmVyLnB1c2goLi4uY2hhbm5lbERhdGEpO1xcbiAgICAgIC8vIEdldCBtYXggdm9sdW1lIFxcbiAgICAgIGxldCBzdW0gPSAwLjA7XFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFubmVsRGF0YS5sZW5ndGg7IGkrKykge1xcbiAgICAgICAgc3VtICs9IGNoYW5uZWxEYXRhW2ldICogY2hhbm5lbERhdGFbaV07XFxuICAgICAgfVxcbiAgICAgIGNvbnN0IG1heFZvbHVtZSA9IE1hdGguc3FydChzdW0gLyBjaGFubmVsRGF0YS5sZW5ndGgpO1xcbiAgICAgIC8vIENoZWNrIGlmIGJ1ZmZlciBzaXplIGhhcyByZWFjaGVkIG9yIGV4Y2VlZGVkIHRoZSB0aHJlc2hvbGRcXG4gICAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoID49IHRoaXMuYnVmZmVyU2l6ZSkge1xcbiAgICAgICAgY29uc3QgZmxvYXQzMkFycmF5ID0gdGhpcy5pc011dGVkIFxcbiAgICAgICAgICA/IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5idWZmZXIubGVuZ3RoKVxcbiAgICAgICAgICA6IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5idWZmZXIpO1xcblxcbiAgICAgICAgbGV0IGVuY29kZWRBcnJheSA9IHRoaXMuZm9ybWF0ID09PSBcInVsYXdcIlxcbiAgICAgICAgICA/IG5ldyBVaW50OEFycmF5KGZsb2F0MzJBcnJheS5sZW5ndGgpXFxuICAgICAgICAgIDogbmV3IEludDE2QXJyYXkoZmxvYXQzMkFycmF5Lmxlbmd0aCk7XFxuXFxuICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIEZsb2F0MzJBcnJheSBhbmQgY29udmVydCBlYWNoIHNhbXBsZSB0byBQQ00xNlxcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbG9hdDMyQXJyYXkubGVuZ3RoOyBpKyspIHtcXG4gICAgICAgICAgLy8gQ2xhbXAgdGhlIHZhbHVlIHRvIHRoZSByYW5nZSBbLTEsIDFdXFxuICAgICAgICAgIGxldCBzYW1wbGUgPSBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgZmxvYXQzMkFycmF5W2ldKSk7XFxuXFxuICAgICAgICAgIC8vIFNjYWxlIHRoZSBzYW1wbGUgdG8gdGhlIHJhbmdlIFstMzI3NjgsIDMyNzY3XVxcbiAgICAgICAgICBsZXQgdmFsdWUgPSBzYW1wbGUgPCAwID8gc2FtcGxlICogMzI3NjggOiBzYW1wbGUgKiAzMjc2NztcXG4gICAgICAgICAgaWYgKHRoaXMuZm9ybWF0ID09PSBcInVsYXdcIikge1xcbiAgICAgICAgICAgIHZhbHVlID0gZW5jb2RlU2FtcGxlKE1hdGgucm91bmQodmFsdWUpKTtcXG4gICAgICAgICAgfVxcblxcbiAgICAgICAgICBlbmNvZGVkQXJyYXlbaV0gPSB2YWx1ZTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIC8vIFNlbmQgdGhlIGJ1ZmZlcmVkIGRhdGEgdG8gdGhlIG1haW4gc2NyaXB0XFxuICAgICAgICB0aGlzLnBvcnQucG9zdE1lc3NhZ2UoW2VuY29kZWRBcnJheSwgbWF4Vm9sdW1lXSk7XFxuXFxuICAgICAgICAvLyBDbGVhciB0aGUgYnVmZmVyIGFmdGVyIHNlbmRpbmdcXG4gICAgICAgIHRoaXMuYnVmZmVyID0gW107XFxuICAgICAgfVxcbiAgICB9XFxuICAgIHJldHVybiB0cnVlOyAvLyBDb250aW51ZSBwcm9jZXNzaW5nXFxuICB9XFxufVxcbnJlZ2lzdGVyUHJvY2Vzc29yKFwicmF3QXVkaW9Qcm9jZXNzb3JcIiwgUmF3QXVkaW9Qcm9jZXNzb3IpO1xcbicpO2NsYXNzIGIgZXh0ZW5kcyBje2NvbnN0cnVjdG9yKGUsdCxuLG8scz17fSl7c3VwZXIocyksdGhpcy5jb252ZXJzYXRpb25JZD12b2lkIDAsdGhpcy5pbnB1dEZvcm1hdD12b2lkIDAsdGhpcy5vdXRwdXRGb3JtYXQ9dm9pZCAwLHRoaXMucm9vbT12b2lkIDAsdGhpcy5pc0Nvbm5lY3RlZD0hMSx0aGlzLmF1ZGlvRXZlbnRJZD0xLHRoaXMuYXVkaW9DYXB0dXJlQ29udGV4dD1udWxsLHRoaXMuYXVkaW9FbGVtZW50cz1bXSx0aGlzLm91dHB1dERldmljZUlkPW51bGwsdGhpcy5vdXRwdXRBbmFseXNlcj1udWxsLHRoaXMub3V0cHV0RnJlcXVlbmN5RGF0YT1udWxsLHRoaXMucm9vbT1lLHRoaXMuY29udmVyc2F0aW9uSWQ9dCx0aGlzLmlucHV0Rm9ybWF0PW4sdGhpcy5vdXRwdXRGb3JtYXQ9byx0aGlzLnNldHVwUm9vbUV2ZW50TGlzdGVuZXJzKCl9c3RhdGljIGFzeW5jIGNyZWF0ZShuKXtsZXQgbztpZihcImNvbnZlcnNhdGlvblRva2VuXCJpbiBuJiZuLmNvbnZlcnNhdGlvblRva2VuKW89bi5jb252ZXJzYXRpb25Ub2tlbjtlbHNle2lmKCEoXCJhZ2VudElkXCJpbiBuKXx8IW4uYWdlbnRJZCl0aHJvdyBuZXcgRXJyb3IoXCJFaXRoZXIgY29udmVyc2F0aW9uVG9rZW4gb3IgYWdlbnRJZCBpcyByZXF1aXJlZCBmb3IgV2ViUlRDIGNvbm5lY3Rpb25cIik7dHJ5e3ZhciBzLGEsaTtjb25zdCBlPShudWxsPT0ocz1uLm92ZXJyaWRlcyl8fG51bGw9PShzPXMuY2xpZW50KT92b2lkIDA6cy52ZXJzaW9uKXx8dSx0PShudWxsPT0oYT1uLm92ZXJyaWRlcyl8fG51bGw9PShhPWEuY2xpZW50KT92b2lkIDA6YS5zb3VyY2UpfHxcImpzX3Nka1wiLGM9YCR7cj1udWxsIT0oaT1uLm9yaWdpbik/aTpcImh0dHBzOi8vYXBpLmVsZXZlbmxhYnMuaW9cIixyLnJlcGxhY2UoL153c3M6XFwvXFwvLyxcImh0dHBzOi8vXCIpfS92MS9jb252YWkvY29udmVyc2F0aW9uL3Rva2VuP2FnZW50X2lkPSR7bi5hZ2VudElkfSZzb3VyY2U9JHt0fSZ2ZXJzaW9uPSR7ZX1gLGw9YXdhaXQgZmV0Y2goYyk7aWYoIWwub2spdGhyb3cgbmV3IEVycm9yKGBFbGV2ZW5MYWJzIEFQSSByZXR1cm5lZCAke2wuc3RhdHVzfSAke2wuc3RhdHVzVGV4dH1gKTtpZihvPShhd2FpdCBsLmpzb24oKSkudG9rZW4sIW8pdGhyb3cgbmV3IEVycm9yKFwiTm8gY29udmVyc2F0aW9uIHRva2VuIHJlY2VpdmVkIGZyb20gQVBJXCIpfWNhdGNoKGUpe2xldCB0PWUgaW5zdGFuY2VvZiBFcnJvcj9lLm1lc3NhZ2U6U3RyaW5nKGUpO3Rocm93IGUgaW5zdGFuY2VvZiBFcnJvciYmZS5tZXNzYWdlLmluY2x1ZGVzKFwiNDAxXCIpJiYodD1cIllvdXIgYWdlbnQgaGFzIGF1dGhlbnRpY2F0aW9uIGVuYWJsZWQsIGJ1dCBubyBzaWduZWQgVVJMIG9yIGNvbnZlcnNhdGlvbiB0b2tlbiB3YXMgcHJvdmlkZWQuXCIpLG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIGNvbnZlcnNhdGlvbiB0b2tlbiBmb3IgYWdlbnQgJHtuLmFnZW50SWR9OiAke3R9YCl9fXZhciByO2NvbnN0IGM9bmV3IGU7dHJ5e2NvbnN0IGU9YHJvb21fJHtEYXRlLm5vdygpfWAscz1sKFwicGNtXzQ4MDAwXCIpLGE9bChcInBjbV80ODAwMFwiKSxpPW5ldyBiKGMsZSxzLGEsbikscj1uLmxpdmVraXRVcmx8fFwid3NzOi8vbGl2ZWtpdC5ydGMuZWxldmVubGFicy5pb1wiO3ZhciBkO2F3YWl0IGMuY29ubmVjdChyLG8pLGF3YWl0IG5ldyBQcm9taXNlKGU9PntpZihpLmlzQ29ubmVjdGVkKWUoKTtlbHNle2NvbnN0IG49KCk9PntjLm9mZih0LkNvbm5lY3RlZCxuKSxlKCl9O2Mub24odC5Db25uZWN0ZWQsbil9fSksYy5uYW1lJiYoaS5jb252ZXJzYXRpb25JZD0obnVsbD09KGQ9Yy5uYW1lLm1hdGNoKC8oY29udl9bYS16QS1aMC05XSspLykpP3ZvaWQgMDpkWzBdKXx8Yy5uYW1lKSxhd2FpdCBjLmxvY2FsUGFydGljaXBhbnQuc2V0TWljcm9waG9uZUVuYWJsZWQoITApO2NvbnN0IHU9cChuKTtyZXR1cm4gaS5kZWJ1Zyh7dHlwZTpoLG1lc3NhZ2U6dX0pLGF3YWl0IGkuc2VuZE1lc3NhZ2UodSksaX1jYXRjaChlKXt0aHJvdyBhd2FpdCBjLmRpc2Nvbm5lY3QoKSxlfX1zZXR1cFJvb21FdmVudExpc3RlbmVycygpe3ZhciBlPXRoaXM7dGhpcy5yb29tLm9uKHQuQ29ubmVjdGVkLGFzeW5jIGZ1bmN0aW9uKCl7ZS5pc0Nvbm5lY3RlZD0hMCxjb25zb2xlLmluZm8oXCJXZWJSVEMgcm9vbSBjb25uZWN0ZWRcIil9KSx0aGlzLnJvb20ub24odC5EaXNjb25uZWN0ZWQsZT0+e3RoaXMuaXNDb25uZWN0ZWQ9ITEsdGhpcy5kaXNjb25uZWN0KHtyZWFzb246XCJhZ2VudFwiLGNvbnRleHQ6bmV3IENsb3NlRXZlbnQoXCJjbG9zZVwiLHtyZWFzb246bnVsbD09ZT92b2lkIDA6ZS50b1N0cmluZygpfSl9KX0pLHRoaXMucm9vbS5vbih0LkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWQsZT0+e2U9PT1uLkRpc2Nvbm5lY3RlZCYmKHRoaXMuaXNDb25uZWN0ZWQ9ITEsdGhpcy5kaXNjb25uZWN0KHtyZWFzb246XCJlcnJvclwiLG1lc3NhZ2U6YExpdmVLaXQgY29ubmVjdGlvbiBzdGF0ZSBjaGFuZ2VkIHRvICR7ZX1gLGNvbnRleHQ6bmV3IEV2ZW50KFwiY29ubmVjdGlvbl9zdGF0ZV9jaGFuZ2VkXCIpfSkpfSksdGhpcy5yb29tLm9uKHQuRGF0YVJlY2VpdmVkLChlLHQpPT57dHJ5e2NvbnN0IHQ9SlNPTi5wYXJzZSgobmV3IFRleHREZWNvZGVyKS5kZWNvZGUoZSkpO2lmKFwiYXVkaW9cIj09PXQudHlwZSlyZXR1cm47ZCh0KT90aGlzLmhhbmRsZU1lc3NhZ2UodCk6Y29uc29sZS53YXJuKFwiSW52YWxpZCBzb2NrZXQgZXZlbnQgcmVjZWl2ZWQ6XCIsdCl9Y2F0Y2godCl7Y29uc29sZS53YXJuKFwiRmFpbGVkIHRvIHBhcnNlIGluY29taW5nIGRhdGEgbWVzc2FnZTpcIix0KSxjb25zb2xlLndhcm4oXCJSYXcgcGF5bG9hZDpcIiwobmV3IFRleHREZWNvZGVyKS5kZWNvZGUoZSkpfX0pLHRoaXMucm9vbS5vbih0LlRyYWNrU3Vic2NyaWJlZCxhc3luYyBmdW5jdGlvbih0LG4scyl7aWYodC5raW5kPT09by5LaW5kLkF1ZGlvJiZzLmlkZW50aXR5LmluY2x1ZGVzKFwiYWdlbnRcIikpe2NvbnN0IG49dCxvPW4uYXR0YWNoKCk7aWYoby5hdXRvcGxheT0hMCxvLmNvbnRyb2xzPSExLGUub3V0cHV0RGV2aWNlSWQmJm8uc2V0U2lua0lkKXRyeXthd2FpdCBvLnNldFNpbmtJZChlLm91dHB1dERldmljZUlkKX1jYXRjaChlKXtjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gc2V0IG91dHB1dCBkZXZpY2UgZm9yIG5ldyBhdWRpbyBlbGVtZW50OlwiLGUpfW8uc3R5bGUuZGlzcGxheT1cIm5vbmVcIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG8pLGUuYXVkaW9FbGVtZW50cy5wdXNoKG8pLDE9PT1lLmF1ZGlvRWxlbWVudHMubGVuZ3RoJiYobnVsbD09ZS5vbkRlYnVnfHxlLm9uRGVidWcoe3R5cGU6XCJhdWRpb19lbGVtZW50X3JlYWR5XCJ9KSksYXdhaXQgZS5zZXR1cEF1ZGlvQ2FwdHVyZShuKX19KSx0aGlzLnJvb20ub24odC5BY3RpdmVTcGVha2Vyc0NoYW5nZWQsYXN5bmMgZnVuY3Rpb24odCl7ZS51cGRhdGVNb2RlKHQubGVuZ3RoPjAmJnRbMF0uaWRlbnRpdHkuc3RhcnRzV2l0aChcImFnZW50XCIpP1wic3BlYWtpbmdcIjpcImxpc3RlbmluZ1wiKX0pLHRoaXMucm9vbS5vbih0LlBhcnRpY2lwYW50RGlzY29ubmVjdGVkLGU9Pnt2YXIgdDtudWxsIT0odD1lLmlkZW50aXR5KSYmdC5zdGFydHNXaXRoKFwiYWdlbnRcIikmJnRoaXMuZGlzY29ubmVjdCh7cmVhc29uOlwiYWdlbnRcIixjb250ZXh0Om5ldyBDbG9zZUV2ZW50KFwiY2xvc2VcIix7cmVhc29uOlwiYWdlbnQgZGlzY29ubmVjdGVkXCJ9KX0pfSl9Y2xvc2UoKXtpZih0aGlzLmlzQ29ubmVjdGVkKXt0cnl7dGhpcy5yb29tLmxvY2FsUGFydGljaXBhbnQuYXVkaW9UcmFja1B1YmxpY2F0aW9ucy5mb3JFYWNoKGU9PntlLnRyYWNrJiZlLnRyYWNrLnN0b3AoKX0pfWNhdGNoKGUpe2NvbnNvbGUud2FybihcIkVycm9yIHN0b3BwaW5nIGxvY2FsIHRyYWNrczpcIixlKX10aGlzLmF1ZGlvQ2FwdHVyZUNvbnRleHQmJih0aGlzLmF1ZGlvQ2FwdHVyZUNvbnRleHQuY2xvc2UoKS5jYXRjaChlPT57Y29uc29sZS53YXJuKFwiRXJyb3IgY2xvc2luZyBhdWRpbyBjYXB0dXJlIGNvbnRleHQ6XCIsZSl9KSx0aGlzLmF1ZGlvQ2FwdHVyZUNvbnRleHQ9bnVsbCksdGhpcy5hdWRpb0VsZW1lbnRzLmZvckVhY2goZT0+e2UucGFyZW50Tm9kZSYmZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpfSksdGhpcy5hdWRpb0VsZW1lbnRzPVtdLHRoaXMucm9vbS5kaXNjb25uZWN0KCl9fWFzeW5jIHNlbmRNZXNzYWdlKGUpe2lmKHRoaXMuaXNDb25uZWN0ZWQmJnRoaXMucm9vbS5sb2NhbFBhcnRpY2lwYW50KXtpZighKFwidXNlcl9hdWRpb19jaHVua1wiaW4gZSkpdHJ5e2NvbnN0IHQ9KG5ldyBUZXh0RW5jb2RlcikuZW5jb2RlKEpTT04uc3RyaW5naWZ5KGUpKTthd2FpdCB0aGlzLnJvb20ubG9jYWxQYXJ0aWNpcGFudC5wdWJsaXNoRGF0YSh0LHtyZWxpYWJsZTohMH0pfWNhdGNoKHQpe3RoaXMuZGVidWcoe3R5cGU6XCJzZW5kX21lc3NhZ2VfZXJyb3JcIixtZXNzYWdlOnttZXNzYWdlOmUsZXJyb3I6dH19KSxjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHNlbmQgbWVzc2FnZSB2aWEgV2ViUlRDOlwiLHQpfX1lbHNlIGNvbnNvbGUud2FybihcIkNhbm5vdCBzZW5kIG1lc3NhZ2U6IHJvb20gbm90IGNvbm5lY3RlZCBvciBubyBsb2NhbCBwYXJ0aWNpcGFudFwiKX1nZXRSb29tKCl7cmV0dXJuIHRoaXMucm9vbX1hc3luYyBzZXRNaWNNdXRlZChlKXtpZighdGhpcy5pc0Nvbm5lY3RlZHx8IXRoaXMucm9vbS5sb2NhbFBhcnRpY2lwYW50KXJldHVybiB2b2lkIGNvbnNvbGUud2FybihcIkNhbm5vdCBzZXQgbWljcm9waG9uZSBtdXRlZDogcm9vbSBub3QgY29ubmVjdGVkIG9yIG5vIGxvY2FsIHBhcnRpY2lwYW50XCIpO2NvbnN0IHQ9dGhpcy5yb29tLmxvY2FsUGFydGljaXBhbnQuZ2V0VHJhY2tQdWJsaWNhdGlvbihvLlNvdXJjZS5NaWNyb3Bob25lKTtpZihudWxsIT10JiZ0LnRyYWNrKXRyeXtlP2F3YWl0IHQudHJhY2subXV0ZSgpOmF3YWl0IHQudHJhY2sudW5tdXRlKCl9Y2F0Y2godCl7YXdhaXQgdGhpcy5yb29tLmxvY2FsUGFydGljaXBhbnQuc2V0TWljcm9waG9uZUVuYWJsZWQoIWUpfWVsc2UgYXdhaXQgdGhpcy5yb29tLmxvY2FsUGFydGljaXBhbnQuc2V0TWljcm9waG9uZUVuYWJsZWQoIWUpfWFzeW5jIHNldHVwQXVkaW9DYXB0dXJlKGUpe3RyeXtjb25zdCB0PW5ldyBBdWRpb0NvbnRleHQ7dGhpcy5hdWRpb0NhcHR1cmVDb250ZXh0PXQsdGhpcy5vdXRwdXRBbmFseXNlcj10LmNyZWF0ZUFuYWx5c2VyKCksdGhpcy5vdXRwdXRBbmFseXNlci5mZnRTaXplPTIwNDgsdGhpcy5vdXRwdXRBbmFseXNlci5zbW9vdGhpbmdUaW1lQ29uc3RhbnQ9Ljg7Y29uc3Qgbj1uZXcgTWVkaWFTdHJlYW0oW2UubWVkaWFTdHJlYW1UcmFja10pLG89dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShuKTtvLmNvbm5lY3QodGhpcy5vdXRwdXRBbmFseXNlciksYXdhaXQgdyh0LmF1ZGlvV29ya2xldCk7Y29uc3Qgcz1uZXcgQXVkaW9Xb3JrbGV0Tm9kZSh0LFwicmF3QXVkaW9Qcm9jZXNzb3JcIik7dGhpcy5vdXRwdXRBbmFseXNlci5jb25uZWN0KHMpLHMucG9ydC5wb3N0TWVzc2FnZSh7dHlwZTpcInNldEZvcm1hdFwiLGZvcm1hdDp0aGlzLm91dHB1dEZvcm1hdC5mb3JtYXQsc2FtcGxlUmF0ZTp0aGlzLm91dHB1dEZvcm1hdC5zYW1wbGVSYXRlfSkscy5wb3J0Lm9ubWVzc2FnZT1lPT57Y29uc3RbdCxuXT1lLmRhdGE7aWYobj4uMDEpe2NvbnN0IGU9dih0LmJ1ZmZlciksbj10aGlzLmF1ZGlvRXZlbnRJZCsrO3RoaXMuaGFuZGxlTWVzc2FnZSh7dHlwZTpcImF1ZGlvXCIsYXVkaW9fZXZlbnQ6e2F1ZGlvX2Jhc2VfNjQ6ZSxldmVudF9pZDpufX0pfX0sby5jb25uZWN0KHMpfWNhdGNoKGUpe2NvbnNvbGUud2FybihcIkZhaWxlZCB0byBzZXQgdXAgYXVkaW8gY2FwdHVyZTpcIixlKX19c2V0QXVkaW9Wb2x1bWUoZSl7dGhpcy5hdWRpb0VsZW1lbnRzLmZvckVhY2godD0+e3Qudm9sdW1lPWV9KX1hc3luYyBzZXRBdWRpb091dHB1dERldmljZShlKXtpZighKFwic2V0U2lua0lkXCJpbiBIVE1MQXVkaW9FbGVtZW50LnByb3RvdHlwZSkpdGhyb3cgbmV3IEVycm9yKFwic2V0U2lua0lkIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO2NvbnN0IHQ9dGhpcy5hdWRpb0VsZW1lbnRzLm1hcChhc3luYyBmdW5jdGlvbih0KXt0cnl7YXdhaXQgdC5zZXRTaW5rSWQoZSl9Y2F0Y2goZSl7dGhyb3cgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzZXQgc2luayBJRCBmb3IgYXVkaW8gZWxlbWVudDpcIixlKSxlfX0pO2F3YWl0IFByb21pc2UuYWxsKHQpLHRoaXMub3V0cHV0RGV2aWNlSWQ9ZX1hc3luYyBzZXRBdWRpb0lucHV0RGV2aWNlKGUpe2lmKCF0aGlzLmlzQ29ubmVjdGVkfHwhdGhpcy5yb29tLmxvY2FsUGFydGljaXBhbnQpdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNoYW5nZSBpbnB1dCBkZXZpY2U6IHJvb20gbm90IGNvbm5lY3RlZCBvciBubyBsb2NhbCBwYXJ0aWNpcGFudFwiKTt0cnl7Y29uc3QgdD10aGlzLnJvb20ubG9jYWxQYXJ0aWNpcGFudC5nZXRUcmFja1B1YmxpY2F0aW9uKG8uU291cmNlLk1pY3JvcGhvbmUpO251bGwhPXQmJnQudHJhY2smJihhd2FpdCB0LnRyYWNrLnN0b3AoKSxhd2FpdCB0aGlzLnJvb20ubG9jYWxQYXJ0aWNpcGFudC51bnB1Ymxpc2hUcmFjayh0LnRyYWNrKSk7Y29uc3Qgbj17ZGV2aWNlSWQ6e2V4YWN0OmV9LGVjaG9DYW5jZWxsYXRpb246ITAsbm9pc2VTdXBwcmVzc2lvbjohMCxhdXRvR2FpbkNvbnRyb2w6ITAsY2hhbm5lbENvdW50OntpZGVhbDoxfX0sYT1hd2FpdCBzKG4pO2F3YWl0IHRoaXMucm9vbS5sb2NhbFBhcnRpY2lwYW50LnB1Ymxpc2hUcmFjayhhLHtuYW1lOlwibWljcm9waG9uZVwiLHNvdXJjZTpvLlNvdXJjZS5NaWNyb3Bob25lfSl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjaGFuZ2UgaW5wdXQgZGV2aWNlOlwiLGUpO3RyeXthd2FpdCB0aGlzLnJvb20ubG9jYWxQYXJ0aWNpcGFudC5zZXRNaWNyb3Bob25lRW5hYmxlZCghMCl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byByZWNvdmVyIG1pY3JvcGhvbmUgYWZ0ZXIgZGV2aWNlIHN3aXRjaCBlcnJvcjpcIixlKX10aHJvdyBlfX1nZXRPdXRwdXRCeXRlRnJlcXVlbmN5RGF0YSgpe3JldHVybiB0aGlzLm91dHB1dEFuYWx5c2VyPyhudWxsIT10aGlzLm91dHB1dEZyZXF1ZW5jeURhdGF8fCh0aGlzLm91dHB1dEZyZXF1ZW5jeURhdGE9bmV3IFVpbnQ4QXJyYXkodGhpcy5vdXRwdXRBbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudCkpLHRoaXMub3V0cHV0QW5hbHlzZXIuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEodGhpcy5vdXRwdXRGcmVxdWVuY3lEYXRhKSx0aGlzLm91dHB1dEZyZXF1ZW5jeURhdGEpOm51bGx9fWFzeW5jIGZ1bmN0aW9uIHkoZSl7Y29uc3QgdD1mdW5jdGlvbihlKXtyZXR1cm4gZS5jb25uZWN0aW9uVHlwZT9lLmNvbm5lY3Rpb25UeXBlOlwiY29udmVyc2F0aW9uVG9rZW5cImluIGUmJmUuY29udmVyc2F0aW9uVG9rZW4/XCJ3ZWJydGNcIjpcIndlYnNvY2tldFwifShlKTtzd2l0Y2godCl7Y2FzZVwid2Vic29ja2V0XCI6cmV0dXJuIG0uY3JlYXRlKGUpO2Nhc2VcIndlYnJ0Y1wiOnJldHVybiBiLmNyZWF0ZShlKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgVW5rbm93biBjb25uZWN0aW9uIHR5cGU6ICR7dH1gKX19ZnVuY3Rpb24gUygpe3JldHVybltcImlQYWQgU2ltdWxhdG9yXCIsXCJpUGhvbmUgU2ltdWxhdG9yXCIsXCJpUG9kIFNpbXVsYXRvclwiLFwiaVBhZFwiLFwiaVBob25lXCIsXCJpUG9kXCJdLmluY2x1ZGVzKG5hdmlnYXRvci5wbGF0Zm9ybSl8fG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoXCJNYWNcIikmJlwib250b3VjaGVuZFwiaW4gZG9jdW1lbnR9YXN5bmMgZnVuY3Rpb24gRShlPXtkZWZhdWx0OjAsYW5kcm9pZDozZTN9KXtsZXQgdD1lLmRlZmF1bHQ7dmFyIG47aWYoL2FuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKXQ9bnVsbCE9KG49ZS5hbmRyb2lkKT9uOnQ7ZWxzZSBpZihTKCkpe3ZhciBvO3Q9bnVsbCE9KG89ZS5pb3MpP286dH10PjAmJmF3YWl0IG5ldyBQcm9taXNlKGU9PnNldFRpbWVvdXQoZSx0KSl9Y2xhc3MgayBleHRlbmRzIHJ7c3RhdGljIGFzeW5jIHN0YXJ0U2Vzc2lvbihlKXtjb25zdCB0PXIuZ2V0RnVsbE9wdGlvbnMoZSk7dC5vblN0YXR1c0NoYW5nZSYmdC5vblN0YXR1c0NoYW5nZSh7c3RhdHVzOlwiY29ubmVjdGluZ1wifSksdC5vbkNhblNlbmRGZWVkYmFja0NoYW5nZSYmdC5vbkNhblNlbmRGZWVkYmFja0NoYW5nZSh7Y2FuU2VuZEZlZWRiYWNrOiExfSksdC5vbk1vZGVDaGFuZ2UmJnQub25Nb2RlQ2hhbmdlKHttb2RlOlwibGlzdGVuaW5nXCJ9KSx0Lm9uQ2FuU2VuZEZlZWRiYWNrQ2hhbmdlJiZ0Lm9uQ2FuU2VuZEZlZWRiYWNrQ2hhbmdlKHtjYW5TZW5kRmVlZGJhY2s6ITF9KTtsZXQgbj1udWxsO3RyeXtyZXR1cm4gYXdhaXQgRSh0LmNvbm5lY3Rpb25EZWxheSksbj1hd2FpdCB5KGUpLG5ldyBrKHQsbil9Y2F0Y2goZSl7dmFyIG87dGhyb3cgdC5vblN0YXR1c0NoYW5nZSYmdC5vblN0YXR1c0NoYW5nZSh7c3RhdHVzOlwiZGlzY29ubmVjdGVkXCJ9KSxudWxsPT0obz1uKXx8by5jbG9zZSgpLGV9fX1jb25zdCBDPXtlY2hvQ2FuY2VsbGF0aW9uOiEwLG5vaXNlU3VwcHJlc3Npb246ITAsYXV0b0dhaW5Db250cm9sOiEwLGNoYW5uZWxDb3VudDp7aWRlYWw6MX19O2NsYXNzIE17c3RhdGljIGFzeW5jIGNyZWF0ZSh7c2FtcGxlUmF0ZTplLGZvcm1hdDp0LHByZWZlckhlYWRwaG9uZXNGb3JJb3NEZXZpY2VzOm4saW5wdXREZXZpY2VJZDpvLHdvcmtsZXRQYXRoczpzLGxpYnNhbXBsZXJhdGVQYXRoOml9KXtsZXQgcj1udWxsLGM9bnVsbDt0cnl7Y29uc3QgbD1hKHtzYW1wbGVSYXRlOntpZGVhbDplfX0sQyk7aWYoUygpJiZuKXtjb25zdCBlPShhd2FpdCB3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkpLmZpbmQoZT0+XCJhdWRpb2lucHV0XCI9PT1lLmtpbmQmJltcImFpcnBvZFwiLFwiaGVhZHBob25lXCIsXCJlYXJwaG9uZVwiXS5maW5kKHQ9PmUubGFiZWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0KSkpO2UmJihsLmRldmljZUlkPXtpZGVhbDplLmRldmljZUlkfSl9byYmKGwuZGV2aWNlSWQ9TS5nZXREZXZpY2VJZENvbnN0cmFpbnQobykpO2NvbnN0IHU9bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpLnNhbXBsZVJhdGU7cj1uZXcgd2luZG93LkF1ZGlvQ29udGV4dCh1P3tzYW1wbGVSYXRlOmV9Ont9KTtjb25zdCBkPXIuY3JlYXRlQW5hbHlzZXIoKTtpZighdSl7Y29uc3QgZT1pfHxcImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vQGFsZXhhbmRlcm9sc2VuL2xpYnNhbXBsZXJhdGUtanNAMi4xLjIvZGlzdC9saWJzYW1wbGVyYXRlLndvcmtsZXQuanNcIjthd2FpdCByLmF1ZGlvV29ya2xldC5hZGRNb2R1bGUoZSl9YXdhaXQgdyhyLmF1ZGlvV29ya2xldCxudWxsPT1zP3ZvaWQgMDpzLnJhd0F1ZGlvUHJvY2Vzc29yKTtjb25zdCBoPWEoe3ZvaWNlSXNvbGF0aW9uOiEwfSxsKTtjPWF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHthdWRpbzpofSk7Y29uc3QgcD1yLmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKGMpLG09bmV3IEF1ZGlvV29ya2xldE5vZGUocixcInJhd0F1ZGlvUHJvY2Vzc29yXCIpO3JldHVybiBtLnBvcnQucG9zdE1lc3NhZ2Uoe3R5cGU6XCJzZXRGb3JtYXRcIixmb3JtYXQ6dCxzYW1wbGVSYXRlOmV9KSxwLmNvbm5lY3QoZCksZC5jb25uZWN0KG0pLGF3YWl0IHIucmVzdW1lKCksbmV3IE0ocixkLG0sYyxwKX1jYXRjaChlKXt2YXIgbCx1O3Rocm93IG51bGw9PShsPWMpfHxsLmdldFRyYWNrcygpLmZvckVhY2goZT0+e2Uuc3RvcCgpfSksbnVsbD09KHU9cil8fHUuY2xvc2UoKSxlfX1zdGF0aWMgZ2V0RGV2aWNlSWRDb25zdHJhaW50KGUpe2lmKGUpcmV0dXJuIFMoKT97aWRlYWw6ZX06e2V4YWN0OmV9fWNvbnN0cnVjdG9yKGUsdCxuLG8scyl7dGhpcy5jb250ZXh0PXZvaWQgMCx0aGlzLmFuYWx5c2VyPXZvaWQgMCx0aGlzLndvcmtsZXQ9dm9pZCAwLHRoaXMuaW5wdXRTdHJlYW09dm9pZCAwLHRoaXMubWVkaWFTdHJlYW1Tb3VyY2U9dm9pZCAwLHRoaXMuY29udGV4dD1lLHRoaXMuYW5hbHlzZXI9dCx0aGlzLndvcmtsZXQ9bix0aGlzLmlucHV0U3RyZWFtPW8sdGhpcy5tZWRpYVN0cmVhbVNvdXJjZT1zfWFzeW5jIGNsb3NlKCl7dGhpcy5pbnB1dFN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGU9PntlLnN0b3AoKX0pLHRoaXMubWVkaWFTdHJlYW1Tb3VyY2UuZGlzY29ubmVjdCgpLGF3YWl0IHRoaXMuY29udGV4dC5jbG9zZSgpfXNldE11dGVkKGUpe3RoaXMud29ya2xldC5wb3J0LnBvc3RNZXNzYWdlKHt0eXBlOlwic2V0TXV0ZWRcIixpc011dGVkOmV9KX1hc3luYyBzZXRJbnB1dERldmljZShlKXt0cnl7Y29uc3QgdD1hKHt9LEMpO2UmJih0LmRldmljZUlkPU0uZ2V0RGV2aWNlSWRDb25zdHJhaW50KGUpKTtjb25zdCBuPWEoe3ZvaWNlSXNvbGF0aW9uOiEwfSx0KSxvPWF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHthdWRpbzpufSk7dGhpcy5pbnB1dFN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGU9PntlLnN0b3AoKX0pLHRoaXMubWVkaWFTdHJlYW1Tb3VyY2UuZGlzY29ubmVjdCgpLHRoaXMuaW5wdXRTdHJlYW09byx0aGlzLm1lZGlhU3RyZWFtU291cmNlPXRoaXMuY29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShvKSx0aGlzLm1lZGlhU3RyZWFtU291cmNlLmNvbm5lY3QodGhpcy5hbmFseXNlcil9Y2F0Y2goZSl7dGhyb3cgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzd2l0Y2ggaW5wdXQgZGV2aWNlOlwiLGUpLGV9fX1jb25zdCBJPV8oXCJhdWRpb0NvbmNhdFByb2Nlc3NvclwiLCcvKlxcbiAqIHVsYXcgZGVjb2RpbmcgbG9naWMgdGFrZW4gZnJvbSB0aGUgd2F2ZWZpbGUgbGlicmFyeVxcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9yb2NoYXJzL3dhdmVmaWxlL2Jsb2IvbWFzdGVyL2xpYi9jb2RlY3MvbXVsYXcuanNcXG4gKiBVU0VEIEJZIEBlbGV2ZW5sYWJzL2NsaWVudFxcbiAqL1xcblxcbmNvbnN0IGRlY29kZVRhYmxlID0gWzAsMTMyLDM5Niw5MjQsMTk4MCw0MDkyLDgzMTYsMTY3NjRdO1xcblxcbmZ1bmN0aW9uIGRlY29kZVNhbXBsZShtdUxhd1NhbXBsZSkge1xcbiAgbGV0IHNpZ247XFxuICBsZXQgZXhwb25lbnQ7XFxuICBsZXQgbWFudGlzc2E7XFxuICBsZXQgc2FtcGxlO1xcbiAgbXVMYXdTYW1wbGUgPSB+bXVMYXdTYW1wbGU7XFxuICBzaWduID0gKG11TGF3U2FtcGxlICYgMHg4MCk7XFxuICBleHBvbmVudCA9IChtdUxhd1NhbXBsZSA+PiA0KSAmIDB4MDc7XFxuICBtYW50aXNzYSA9IG11TGF3U2FtcGxlICYgMHgwRjtcXG4gIHNhbXBsZSA9IGRlY29kZVRhYmxlW2V4cG9uZW50XSArIChtYW50aXNzYSA8PCAoZXhwb25lbnQrMykpO1xcbiAgaWYgKHNpZ24gIT09IDApIHNhbXBsZSA9IC1zYW1wbGU7XFxuXFxuICByZXR1cm4gc2FtcGxlO1xcbn1cXG5cXG5jbGFzcyBBdWRpb0NvbmNhdFByb2Nlc3NvciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7XFxuICBjb25zdHJ1Y3RvcigpIHtcXG4gICAgc3VwZXIoKTtcXG4gICAgdGhpcy5idWZmZXJzID0gW107IC8vIEluaXRpYWxpemUgYW4gZW1wdHkgYnVmZmVyXFxuICAgIHRoaXMuY3Vyc29yID0gMDtcXG4gICAgdGhpcy5jdXJyZW50QnVmZmVyID0gbnVsbDtcXG4gICAgdGhpcy53YXNJbnRlcnJ1cHRlZCA9IGZhbHNlO1xcbiAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XFxuICAgIFxcbiAgICB0aGlzLnBvcnQub25tZXNzYWdlID0gKHsgZGF0YSB9KSA9PiB7XFxuICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcXG4gICAgICAgIGNhc2UgXCJzZXRGb3JtYXRcIjpcXG4gICAgICAgICAgdGhpcy5mb3JtYXQgPSBkYXRhLmZvcm1hdDtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICBjYXNlIFwiYnVmZmVyXCI6XFxuICAgICAgICAgIHRoaXMud2FzSW50ZXJydXB0ZWQgPSBmYWxzZTtcXG4gICAgICAgICAgdGhpcy5idWZmZXJzLnB1c2goXFxuICAgICAgICAgICAgdGhpcy5mb3JtYXQgPT09IFwidWxhd1wiXFxuICAgICAgICAgICAgICA/IG5ldyBVaW50OEFycmF5KGRhdGEuYnVmZmVyKVxcbiAgICAgICAgICAgICAgOiBuZXcgSW50MTZBcnJheShkYXRhLmJ1ZmZlcilcXG4gICAgICAgICAgKTtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICBjYXNlIFwiaW50ZXJydXB0XCI6XFxuICAgICAgICAgIHRoaXMud2FzSW50ZXJydXB0ZWQgPSB0cnVlO1xcbiAgICAgICAgICBicmVhaztcXG4gICAgICAgIGNhc2UgXCJjbGVhckludGVycnVwdGVkXCI6XFxuICAgICAgICAgIGlmICh0aGlzLndhc0ludGVycnVwdGVkKSB7XFxuICAgICAgICAgICAgdGhpcy53YXNJbnRlcnJ1cHRlZCA9IGZhbHNlO1xcbiAgICAgICAgICAgIHRoaXMuYnVmZmVycyA9IFtdO1xcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEJ1ZmZlciA9IG51bGw7XFxuICAgICAgICAgIH1cXG4gICAgICB9XFxuICAgIH07XFxuICB9XFxuICBwcm9jZXNzKF8sIG91dHB1dHMpIHtcXG4gICAgbGV0IGZpbmlzaGVkID0gZmFsc2U7XFxuICAgIGNvbnN0IG91dHB1dCA9IG91dHB1dHNbMF1bMF07XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3V0cHV0Lmxlbmd0aDsgaSsrKSB7XFxuICAgICAgaWYgKCF0aGlzLmN1cnJlbnRCdWZmZXIpIHtcXG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlcnMubGVuZ3RoID09PSAwKSB7XFxuICAgICAgICAgIGZpbmlzaGVkID0gdHJ1ZTtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICB9XFxuICAgICAgICB0aGlzLmN1cnJlbnRCdWZmZXIgPSB0aGlzLmJ1ZmZlcnMuc2hpZnQoKTtcXG4gICAgICAgIHRoaXMuY3Vyc29yID0gMDtcXG4gICAgICB9XFxuXFxuICAgICAgbGV0IHZhbHVlID0gdGhpcy5jdXJyZW50QnVmZmVyW3RoaXMuY3Vyc29yXTtcXG4gICAgICBpZiAodGhpcy5mb3JtYXQgPT09IFwidWxhd1wiKSB7XFxuICAgICAgICB2YWx1ZSA9IGRlY29kZVNhbXBsZSh2YWx1ZSk7XFxuICAgICAgfVxcbiAgICAgIG91dHB1dFtpXSA9IHZhbHVlIC8gMzI3Njg7XFxuICAgICAgdGhpcy5jdXJzb3IrKztcXG5cXG4gICAgICBpZiAodGhpcy5jdXJzb3IgPj0gdGhpcy5jdXJyZW50QnVmZmVyLmxlbmd0aCkge1xcbiAgICAgICAgdGhpcy5jdXJyZW50QnVmZmVyID0gbnVsbDtcXG4gICAgICB9XFxuICAgIH1cXG5cXG4gICAgaWYgKHRoaXMuZmluaXNoZWQgIT09IGZpbmlzaGVkKSB7XFxuICAgICAgdGhpcy5maW5pc2hlZCA9IGZpbmlzaGVkO1xcbiAgICAgIHRoaXMucG9ydC5wb3N0TWVzc2FnZSh7IHR5cGU6IFwicHJvY2Vzc1wiLCBmaW5pc2hlZCB9KTtcXG4gICAgfVxcblxcbiAgICByZXR1cm4gdHJ1ZTsgLy8gQ29udGludWUgcHJvY2Vzc2luZ1xcbiAgfVxcbn1cXG5cXG5yZWdpc3RlclByb2Nlc3NvcihcImF1ZGlvQ29uY2F0UHJvY2Vzc29yXCIsIEF1ZGlvQ29uY2F0UHJvY2Vzc29yKTtcXG4nKTtjbGFzcyBSe3N0YXRpYyBhc3luYyBjcmVhdGUoe3NhbXBsZVJhdGU6ZSxmb3JtYXQ6dCxvdXRwdXREZXZpY2VJZDpuLHdvcmtsZXRQYXRoczpvfSl7bGV0IHM9bnVsbCxhPW51bGw7dHJ5e3M9bmV3IEF1ZGlvQ29udGV4dCh7c2FtcGxlUmF0ZTplfSk7Y29uc3QgaT1zLmNyZWF0ZUFuYWx5c2VyKCkscj1zLmNyZWF0ZUdhaW4oKTthPW5ldyBBdWRpbyxhLnNyYz1cIlwiLGEubG9hZCgpLGEuYXV0b3BsYXk9ITAsYS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7Y29uc3QgYz1zLmNyZWF0ZU1lZGlhU3RyZWFtRGVzdGluYXRpb24oKTthLnNyY09iamVjdD1jLnN0cmVhbSxyLmNvbm5lY3QoaSksaS5jb25uZWN0KGMpLGF3YWl0IEkocy5hdWRpb1dvcmtsZXQsbnVsbD09bz92b2lkIDA6by5hdWRpb0NvbmNhdFByb2Nlc3Nvcik7Y29uc3QgbD1uZXcgQXVkaW9Xb3JrbGV0Tm9kZShzLFwiYXVkaW9Db25jYXRQcm9jZXNzb3JcIik7cmV0dXJuIGwucG9ydC5wb3N0TWVzc2FnZSh7dHlwZTpcInNldEZvcm1hdFwiLGZvcm1hdDp0fSksbC5jb25uZWN0KHIpLGF3YWl0IHMucmVzdW1lKCksbiYmYS5zZXRTaW5rSWQmJmF3YWl0IGEuc2V0U2lua0lkKG4pLG5ldyBSKHMsaSxyLGwsYSl9Y2F0Y2goZSl7dmFyIGkscjt0aHJvdyBudWxsIT0oaT1hKSYmaS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksbnVsbD09KHI9YSl8fHIucGF1c2UoKSxzJiZcImNsb3NlZFwiIT09cy5zdGF0ZSYmYXdhaXQgcy5jbG9zZSgpLGV9fWNvbnN0cnVjdG9yKGUsdCxuLG8scyl7dGhpcy5jb250ZXh0PXZvaWQgMCx0aGlzLmFuYWx5c2VyPXZvaWQgMCx0aGlzLmdhaW49dm9pZCAwLHRoaXMud29ya2xldD12b2lkIDAsdGhpcy5hdWRpb0VsZW1lbnQ9dm9pZCAwLHRoaXMuY29udGV4dD1lLHRoaXMuYW5hbHlzZXI9dCx0aGlzLmdhaW49bix0aGlzLndvcmtsZXQ9byx0aGlzLmF1ZGlvRWxlbWVudD1zfWFzeW5jIHNldE91dHB1dERldmljZShlKXtpZighKFwic2V0U2lua0lkXCJpbiBIVE1MQXVkaW9FbGVtZW50LnByb3RvdHlwZSkpdGhyb3cgbmV3IEVycm9yKFwic2V0U2lua0lkIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO2F3YWl0IHRoaXMuYXVkaW9FbGVtZW50LnNldFNpbmtJZChlfHxcIlwiKX1hc3luYyBjbG9zZSgpe3RoaXMuYXVkaW9FbGVtZW50LnBhcmVudE5vZGUmJnRoaXMuYXVkaW9FbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5hdWRpb0VsZW1lbnQpLHRoaXMuYXVkaW9FbGVtZW50LnBhdXNlKCksYXdhaXQgdGhpcy5jb250ZXh0LmNsb3NlKCl9fWNsYXNzIEEgZXh0ZW5kcyBye3N0YXRpYyBhc3luYyBzdGFydFNlc3Npb24oZSl7dmFyIHQ7Y29uc3Qgbj1yLmdldEZ1bGxPcHRpb25zKGUpO24ub25TdGF0dXNDaGFuZ2UmJm4ub25TdGF0dXNDaGFuZ2Uoe3N0YXR1czpcImNvbm5lY3RpbmdcIn0pLG4ub25DYW5TZW5kRmVlZGJhY2tDaGFuZ2UmJm4ub25DYW5TZW5kRmVlZGJhY2tDaGFuZ2Uoe2NhblNlbmRGZWVkYmFjazohMX0pO2xldCBvPW51bGwscz1udWxsLGk9bnVsbCxjPW51bGwsbD1udWxsO2lmKG51bGw9PSh0PWUudXNlV2FrZUxvY2spfHx0KXRyeXtsPWF3YWl0IG5hdmlnYXRvci53YWtlTG9jay5yZXF1ZXN0KFwic2NyZWVuXCIpfWNhdGNoKGUpe310cnl7dmFyIHU7cmV0dXJuIGM9YXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe2F1ZGlvOiEwfSksYXdhaXQgRShuLmNvbm5lY3Rpb25EZWxheSkscz1hd2FpdCB5KGUpLFtvLGldPWF3YWl0IFByb21pc2UuYWxsKFtNLmNyZWF0ZShhKHt9LHMuaW5wdXRGb3JtYXQse3ByZWZlckhlYWRwaG9uZXNGb3JJb3NEZXZpY2VzOmUucHJlZmVySGVhZHBob25lc0Zvcklvc0RldmljZXMsaW5wdXREZXZpY2VJZDplLmlucHV0RGV2aWNlSWQsd29ya2xldFBhdGhzOmUud29ya2xldFBhdGhzLGxpYnNhbXBsZXJhdGVQYXRoOmUubGlic2FtcGxlcmF0ZVBhdGh9KSksUi5jcmVhdGUoYSh7fSxzLm91dHB1dEZvcm1hdCx7b3V0cHV0RGV2aWNlSWQ6ZS5vdXRwdXREZXZpY2VJZCx3b3JrbGV0UGF0aHM6ZS53b3JrbGV0UGF0aHN9KSldKSxudWxsPT0odT1jKXx8dS5nZXRUcmFja3MoKS5mb3JFYWNoKGU9PntlLnN0b3AoKX0pLGM9bnVsbCxuZXcgQShuLHMsbyxpLGwpfWNhdGNoKGUpe3ZhciBkLGgscCxtO24ub25TdGF0dXNDaGFuZ2UmJm4ub25TdGF0dXNDaGFuZ2Uoe3N0YXR1czpcImRpc2Nvbm5lY3RlZFwifSksbnVsbD09KGQ9Yyl8fGQuZ2V0VHJhY2tzKCkuZm9yRWFjaChlPT57ZS5zdG9wKCl9KSxudWxsPT0oaD1zKXx8aC5jbG9zZSgpLGF3YWl0KG51bGw9PShwPW8pP3ZvaWQgMDpwLmNsb3NlKCkpLGF3YWl0KG51bGw9PShtPWkpP3ZvaWQgMDptLmNsb3NlKCkpO3RyeXt2YXIgdjthd2FpdChudWxsPT0odj1sKT92b2lkIDA6di5yZWxlYXNlKCkpLGw9bnVsbH1jYXRjaChlKXt9dGhyb3cgZX19Y29uc3RydWN0b3IoZSx0LG4sbyxzKXtzdXBlcihlLHQpLHRoaXMuaW5wdXQ9dm9pZCAwLHRoaXMub3V0cHV0PXZvaWQgMCx0aGlzLndha2VMb2NrPXZvaWQgMCx0aGlzLmlucHV0RnJlcXVlbmN5RGF0YT12b2lkIDAsdGhpcy5vdXRwdXRGcmVxdWVuY3lEYXRhPXZvaWQgMCx0aGlzLm9uSW5wdXRXb3JrbGV0TWVzc2FnZT1lPT57XCJjb25uZWN0ZWRcIj09PXRoaXMuc3RhdHVzJiZ0aGlzLmNvbm5lY3Rpb24uc2VuZE1lc3NhZ2Uoe3VzZXJfYXVkaW9fY2h1bms6dihlLmRhdGFbMF0uYnVmZmVyKX0pfSx0aGlzLm9uT3V0cHV0V29ya2xldE1lc3NhZ2U9KHtkYXRhOmV9KT0+e1wicHJvY2Vzc1wiPT09ZS50eXBlJiZ0aGlzLnVwZGF0ZU1vZGUoZS5maW5pc2hlZD9cImxpc3RlbmluZ1wiOlwic3BlYWtpbmdcIil9LHRoaXMuYWRkQXVkaW9CYXNlNjRDaHVuaz1lPT57dGhpcy5vdXRwdXQuZ2Fpbi5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyh0aGlzLm91dHB1dC5jb250ZXh0LmN1cnJlbnRUaW1lKSx0aGlzLm91dHB1dC5nYWluLmdhaW4udmFsdWU9dGhpcy52b2x1bWUsdGhpcy5vdXRwdXQud29ya2xldC5wb3J0LnBvc3RNZXNzYWdlKHt0eXBlOlwiY2xlYXJJbnRlcnJ1cHRlZFwifSksdGhpcy5vdXRwdXQud29ya2xldC5wb3J0LnBvc3RNZXNzYWdlKHt0eXBlOlwiYnVmZmVyXCIsYnVmZmVyOmcoZSl9KX0sdGhpcy5mYWRlT3V0QXVkaW89KCk9Pnt0aGlzLnVwZGF0ZU1vZGUoXCJsaXN0ZW5pbmdcIiksdGhpcy5vdXRwdXQud29ya2xldC5wb3J0LnBvc3RNZXNzYWdlKHt0eXBlOlwiaW50ZXJydXB0XCJ9KSx0aGlzLm91dHB1dC5nYWluLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgxZS00LHRoaXMub3V0cHV0LmNvbnRleHQuY3VycmVudFRpbWUrMiksc2V0VGltZW91dCgoKT0+e3RoaXMub3V0cHV0LmdhaW4uZ2Fpbi52YWx1ZT10aGlzLnZvbHVtZSx0aGlzLm91dHB1dC53b3JrbGV0LnBvcnQucG9zdE1lc3NhZ2Uoe3R5cGU6XCJjbGVhckludGVycnVwdGVkXCJ9KX0sMmUzKX0sdGhpcy5jYWxjdWxhdGVWb2x1bWU9ZT0+e2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gMDtsZXQgdD0wO2ZvcihsZXQgbj0wO248ZS5sZW5ndGg7bisrKXQrPWVbbl0vMjU1O3JldHVybiB0Lz1lLmxlbmd0aCx0PDA/MDp0PjE/MTp0fSx0aGlzLnNldFZvbHVtZT0oe3ZvbHVtZTplfSk9Pntjb25zdCB0PU51bWJlci5pc0Zpbml0ZShlKT9NYXRoLm1pbigxLE1hdGgubWF4KDAsZSkpOjE7dGhpcy52b2x1bWU9dCx0aGlzLmNvbm5lY3Rpb24gaW5zdGFuY2VvZiBiP3RoaXMuY29ubmVjdGlvbi5zZXRBdWRpb1ZvbHVtZSh0KTp0aGlzLm91dHB1dC5nYWluLmdhaW4udmFsdWU9dH0sdGhpcy5pbnB1dD1uLHRoaXMub3V0cHV0PW8sdGhpcy53YWtlTG9jaz1zLHRoaXMuaW5wdXQud29ya2xldC5wb3J0Lm9ubWVzc2FnZT10aGlzLm9uSW5wdXRXb3JrbGV0TWVzc2FnZSx0aGlzLm91dHB1dC53b3JrbGV0LnBvcnQub25tZXNzYWdlPXRoaXMub25PdXRwdXRXb3JrbGV0TWVzc2FnZX1hc3luYyBoYW5kbGVFbmRTZXNzaW9uKCl7YXdhaXQgc3VwZXIuaGFuZGxlRW5kU2Vzc2lvbigpO3RyeXt2YXIgZTthd2FpdChudWxsPT0oZT10aGlzLndha2VMb2NrKT92b2lkIDA6ZS5yZWxlYXNlKCkpLHRoaXMud2FrZUxvY2s9bnVsbH1jYXRjaChlKXt9YXdhaXQgdGhpcy5pbnB1dC5jbG9zZSgpLGF3YWl0IHRoaXMub3V0cHV0LmNsb3NlKCl9aGFuZGxlSW50ZXJydXB0aW9uKGUpe3N1cGVyLmhhbmRsZUludGVycnVwdGlvbihlKSx0aGlzLmZhZGVPdXRBdWRpbygpfWhhbmRsZUF1ZGlvKGUpe3ZhciB0LG47dGhpcy5sYXN0SW50ZXJydXB0VGltZXN0YW1wPD1lLmF1ZGlvX2V2ZW50LmV2ZW50X2lkJiYobnVsbD09KHQ9KG49dGhpcy5vcHRpb25zKS5vbkF1ZGlvKXx8dC5jYWxsKG4sZS5hdWRpb19ldmVudC5hdWRpb19iYXNlXzY0KSx0aGlzLmNvbm5lY3Rpb24gaW5zdGFuY2VvZiBifHx0aGlzLmFkZEF1ZGlvQmFzZTY0Q2h1bmsoZS5hdWRpb19ldmVudC5hdWRpb19iYXNlXzY0KSx0aGlzLmN1cnJlbnRFdmVudElkPWUuYXVkaW9fZXZlbnQuZXZlbnRfaWQsdGhpcy51cGRhdGVDYW5TZW5kRmVlZGJhY2soKSx0aGlzLnVwZGF0ZU1vZGUoXCJzcGVha2luZ1wiKSl9c2V0TWljTXV0ZWQoZSl7dGhpcy5jb25uZWN0aW9uIGluc3RhbmNlb2YgYj90aGlzLmNvbm5lY3Rpb24uc2V0TWljTXV0ZWQoZSk6dGhpcy5pbnB1dC5zZXRNdXRlZChlKX1nZXRJbnB1dEJ5dGVGcmVxdWVuY3lEYXRhKCl7cmV0dXJuIG51bGwhPXRoaXMuaW5wdXRGcmVxdWVuY3lEYXRhfHwodGhpcy5pbnB1dEZyZXF1ZW5jeURhdGE9bmV3IFVpbnQ4QXJyYXkodGhpcy5pbnB1dC5hbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudCkpLHRoaXMuaW5wdXQuYW5hbHlzZXIuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEodGhpcy5pbnB1dEZyZXF1ZW5jeURhdGEpLHRoaXMuaW5wdXRGcmVxdWVuY3lEYXRhfWdldE91dHB1dEJ5dGVGcmVxdWVuY3lEYXRhKCl7cmV0dXJuIHRoaXMuY29ubmVjdGlvbiBpbnN0YW5jZW9mIGI/dGhpcy5jb25uZWN0aW9uLmdldE91dHB1dEJ5dGVGcmVxdWVuY3lEYXRhKCl8fG5ldyBVaW50OEFycmF5KDEwMjQpOihudWxsIT10aGlzLm91dHB1dEZyZXF1ZW5jeURhdGF8fCh0aGlzLm91dHB1dEZyZXF1ZW5jeURhdGE9bmV3IFVpbnQ4QXJyYXkodGhpcy5vdXRwdXQuYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnQpKSx0aGlzLm91dHB1dC5hbmFseXNlci5nZXRCeXRlRnJlcXVlbmN5RGF0YSh0aGlzLm91dHB1dEZyZXF1ZW5jeURhdGEpLHRoaXMub3V0cHV0RnJlcXVlbmN5RGF0YSl9Z2V0SW5wdXRWb2x1bWUoKXtyZXR1cm4gdGhpcy5jYWxjdWxhdGVWb2x1bWUodGhpcy5nZXRJbnB1dEJ5dGVGcmVxdWVuY3lEYXRhKCkpfWdldE91dHB1dFZvbHVtZSgpe3JldHVybiB0aGlzLmNhbGN1bGF0ZVZvbHVtZSh0aGlzLmdldE91dHB1dEJ5dGVGcmVxdWVuY3lEYXRhKCkpfWFzeW5jIGNoYW5nZUlucHV0RGV2aWNlKHtzYW1wbGVSYXRlOmUsZm9ybWF0OnQscHJlZmVySGVhZHBob25lc0Zvcklvc0RldmljZXM6bixpbnB1dERldmljZUlkOm99KXt0cnl7aWYodGhpcy5jb25uZWN0aW9uIGluc3RhbmNlb2YgbSl0cnl7cmV0dXJuIGF3YWl0IHRoaXMuaW5wdXQuc2V0SW5wdXREZXZpY2UobyksdGhpcy5pbnB1dH1jYXRjaChlKXtjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gY2hhbmdlIGRldmljZSBvbiBleGlzdGluZyBpbnB1dCwgcmVjcmVhdGluZzpcIixlKX10aGlzLmNvbm5lY3Rpb24gaW5zdGFuY2VvZiBiJiZhd2FpdCB0aGlzLmNvbm5lY3Rpb24uc2V0QXVkaW9JbnB1dERldmljZShvfHxcIlwiKSxhd2FpdCB0aGlzLmlucHV0LmNsb3NlKCk7Y29uc3Qgcz1hd2FpdCBNLmNyZWF0ZSh7c2FtcGxlUmF0ZTpudWxsIT1lP2U6dGhpcy5jb25uZWN0aW9uLmlucHV0Rm9ybWF0LnNhbXBsZVJhdGUsZm9ybWF0Om51bGwhPXQ/dDp0aGlzLmNvbm5lY3Rpb24uaW5wdXRGb3JtYXQuZm9ybWF0LHByZWZlckhlYWRwaG9uZXNGb3JJb3NEZXZpY2VzOm4saW5wdXREZXZpY2VJZDpvLHdvcmtsZXRQYXRoczp0aGlzLm9wdGlvbnMud29ya2xldFBhdGhzLGxpYnNhbXBsZXJhdGVQYXRoOnRoaXMub3B0aW9ucy5saWJzYW1wbGVyYXRlUGF0aH0pO3JldHVybiB0aGlzLmlucHV0PXMsdGhpcy5pbnB1dC53b3JrbGV0LnBvcnQub25tZXNzYWdlPXRoaXMub25JbnB1dFdvcmtsZXRNZXNzYWdlLHRoaXMuaW5wdXR9Y2F0Y2goZSl7dGhyb3cgY29uc29sZS5lcnJvcihcIkVycm9yIGNoYW5naW5nIGlucHV0IGRldmljZVwiLGUpLGV9fWFzeW5jIGNoYW5nZU91dHB1dERldmljZSh7c2FtcGxlUmF0ZTplLGZvcm1hdDp0LG91dHB1dERldmljZUlkOm59KXt0cnl7aWYodGhpcy5jb25uZWN0aW9uIGluc3RhbmNlb2YgbSl0cnl7cmV0dXJuIGF3YWl0IHRoaXMub3V0cHV0LnNldE91dHB1dERldmljZShuKSx0aGlzLm91dHB1dH1jYXRjaChlKXtjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gY2hhbmdlIGRldmljZSBvbiBleGlzdGluZyBvdXRwdXQsIHJlY3JlYXRpbmc6XCIsZSl9dGhpcy5jb25uZWN0aW9uIGluc3RhbmNlb2YgYiYmYXdhaXQgdGhpcy5jb25uZWN0aW9uLnNldEF1ZGlvT3V0cHV0RGV2aWNlKG58fFwiXCIpLGF3YWl0IHRoaXMub3V0cHV0LmNsb3NlKCk7Y29uc3Qgbz1hd2FpdCBSLmNyZWF0ZSh7c2FtcGxlUmF0ZTpudWxsIT1lP2U6dGhpcy5jb25uZWN0aW9uLm91dHB1dEZvcm1hdC5zYW1wbGVSYXRlLGZvcm1hdDpudWxsIT10P3Q6dGhpcy5jb25uZWN0aW9uLm91dHB1dEZvcm1hdC5mb3JtYXQsb3V0cHV0RGV2aWNlSWQ6bix3b3JrbGV0UGF0aHM6dGhpcy5vcHRpb25zLndvcmtsZXRQYXRoc30pO3JldHVybiB0aGlzLm91dHB1dD1vLHRoaXMub3V0cHV0fWNhdGNoKGUpe3Rocm93IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjaGFuZ2luZyBvdXRwdXQgZGV2aWNlXCIsZSksZX19fWZ1bmN0aW9uIFQoZSx0LG49XCJodHRwczovL2FwaS5lbGV2ZW5sYWJzLmlvXCIpe2NvbnN0IG89e307cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiB0P28uZmVlZGJhY2s9dD9cImxpa2VcIjpcImRpc2xpa2VcIjooby5yYXRpbmc9dC5yYXRpbmcsby5jb21tZW50PXQuY29tbWVudCksZmV0Y2goYCR7bn0vdjEvY29udmFpL2NvbnZlcnNhdGlvbnMvJHtlfS9mZWVkYmFja2Ase21ldGhvZDpcIlBPU1RcIixib2R5OkpTT04uc3RyaW5naWZ5KG8pLGhlYWRlcnM6e1wiQ29udGVudC1UeXBlXCI6XCJhcHBsaWNhdGlvbi9qc29uXCJ9fSl9Y2xhc3MgRHtjb25zdHJ1Y3Rvcigpe3RoaXMubGlzdGVuZXJzPW5ldyBNYXB9b24oZSx0KXt0aGlzLmxpc3RlbmVycy5oYXMoZSl8fHRoaXMubGlzdGVuZXJzLnNldChlLG5ldyBTZXQpO2NvbnN0IG49dGhpcy5saXN0ZW5lcnMuZ2V0KGUpO24mJm4uYWRkKHQpfW9mZihlLHQpe2NvbnN0IG49dGhpcy5saXN0ZW5lcnMuZ2V0KGUpO24mJm4uZGVsZXRlKHQpfWVtaXQoZSwuLi50KXtjb25zdCBuPXRoaXMubGlzdGVuZXJzLmdldChlKTtuJiZuLmZvckVhY2goZT0+e2UoLi4udCl9KX19dmFyIEY7IWZ1bmN0aW9uKGUpe2UuU0VTU0lPTl9TVEFSVEVEPVwic2Vzc2lvbl9zdGFydGVkXCIsZS5QQVJUSUFMX1RSQU5TQ1JJUFQ9XCJwYXJ0aWFsX3RyYW5zY3JpcHRcIixlLkNPTU1JVFRFRF9UUkFOU0NSSVBUPVwiY29tbWl0dGVkX3RyYW5zY3JpcHRcIixlLkNPTU1JVFRFRF9UUkFOU0NSSVBUX1dJVEhfVElNRVNUQU1QUz1cImNvbW1pdHRlZF90cmFuc2NyaXB0X3dpdGhfdGltZXN0YW1wc1wiLGUuQVVUSF9FUlJPUj1cImF1dGhfZXJyb3JcIixlLkVSUk9SPVwiZXJyb3JcIixlLk9QRU49XCJvcGVuXCIsZS5DTE9TRT1cImNsb3NlXCIsZS5RVU9UQV9FWENFRURFRD1cInF1b3RhX2V4Y2VlZGVkXCIsZS5DT01NSVRfVEhST1RUTEVEPVwiY29tbWl0X3Rocm90dGxlZFwiLGUuVFJBTlNDUklCRVJfRVJST1I9XCJ0cmFuc2NyaWJlcl9lcnJvclwiLGUuVU5BQ0NFUFRFRF9URVJNUz1cInVuYWNjZXB0ZWRfdGVybXNcIixlLlJBVEVfTElNSVRFRD1cInJhdGVfbGltaXRlZFwiLGUuSU5QVVRfRVJST1I9XCJpbnB1dF9lcnJvclwiLGUuUVVFVUVfT1ZFUkZMT1c9XCJxdWV1ZV9vdmVyZmxvd1wiLGUuUkVTT1VSQ0VfRVhIQVVTVEVEPVwicmVzb3VyY2VfZXhoYXVzdGVkXCIsZS5TRVNTSU9OX1RJTUVfTElNSVRfRVhDRUVERUQ9XCJzZXNzaW9uX3RpbWVfbGltaXRfZXhjZWVkZWRcIixlLkNIVU5LX1NJWkVfRVhDRUVERUQ9XCJjaHVua19zaXplX2V4Y2VlZGVkXCIsZS5JTlNVRkZJQ0lFTlRfQVVESU9fQUNUSVZJVFk9XCJpbnN1ZmZpY2llbnRfYXVkaW9fYWN0aXZpdHlcIn0oRnx8KEY9e30pKTtjbGFzcyBQe2NvbnN0cnVjdG9yKGUpe3RoaXMud2Vic29ja2V0PW51bGwsdGhpcy5ldmVudEVtaXR0ZXI9bmV3IEQsdGhpcy5jdXJyZW50U2FtcGxlUmF0ZT0xNmUzLHRoaXMuX2F1ZGlvQ2xlYW51cD12b2lkIDAsdGhpcy5jdXJyZW50U2FtcGxlUmF0ZT1lfXNldFdlYlNvY2tldChlKXt0aGlzLndlYnNvY2tldD1lLHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGU9PT1XZWJTb2NrZXQuT1BFTj90aGlzLmV2ZW50RW1pdHRlci5lbWl0KEYuT1BFTik6dGhpcy53ZWJzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm9wZW5cIiwoKT0+e3RoaXMuZXZlbnRFbWl0dGVyLmVtaXQoRi5PUEVOKX0pLHRoaXMud2Vic29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZT0+e3RyeXtjb25zdCB0PUpTT04ucGFyc2UoZS5kYXRhKTtzd2l0Y2godC5tZXNzYWdlX3R5cGUpe2Nhc2VcInNlc3Npb25fc3RhcnRlZFwiOnRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoRi5TRVNTSU9OX1NUQVJURUQsdCk7YnJlYWs7Y2FzZVwicGFydGlhbF90cmFuc2NyaXB0XCI6dGhpcy5ldmVudEVtaXR0ZXIuZW1pdChGLlBBUlRJQUxfVFJBTlNDUklQVCx0KTticmVhaztjYXNlXCJjb21taXR0ZWRfdHJhbnNjcmlwdFwiOnRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoRi5DT01NSVRURURfVFJBTlNDUklQVCx0KTticmVhaztjYXNlXCJjb21taXR0ZWRfdHJhbnNjcmlwdF93aXRoX3RpbWVzdGFtcHNcIjp0aGlzLmV2ZW50RW1pdHRlci5lbWl0KEYuQ09NTUlUVEVEX1RSQU5TQ1JJUFRfV0lUSF9USU1FU1RBTVBTLHQpO2JyZWFrO2Nhc2VcImF1dGhfZXJyb3JcIjp0aGlzLmV2ZW50RW1pdHRlci5lbWl0KEYuQVVUSF9FUlJPUix0KSx0aGlzLmV2ZW50RW1pdHRlci5lbWl0KEYuRVJST1IsdCk7YnJlYWs7Y2FzZVwicXVvdGFfZXhjZWVkZWRcIjp0aGlzLmV2ZW50RW1pdHRlci5lbWl0KEYuUVVPVEFfRVhDRUVERUQsdCksdGhpcy5ldmVudEVtaXR0ZXIuZW1pdChGLkVSUk9SLHQpO2JyZWFrO2Nhc2VcImNvbW1pdF90aHJvdHRsZWRcIjp0aGlzLmV2ZW50RW1pdHRlci5lbWl0KEYuQ09NTUlUX1RIUk9UVExFRCx0KSx0aGlzLmV2ZW50RW1pdHRlci5lbWl0KEYuRVJST1IsdCk7YnJlYWs7Y2FzZVwidHJhbnNjcmliZXJfZXJyb3JcIjp0aGlzLmV2ZW50RW1pdHRlci5lbWl0KEYuVFJBTlNDUklCRVJfRVJST1IsdCksdGhpcy5ldmVudEVtaXR0ZXIuZW1pdChGLkVSUk9SLHQpO2JyZWFrO2Nhc2VcInVuYWNjZXB0ZWRfdGVybXNcIjp0aGlzLmV2ZW50RW1pdHRlci5lbWl0KEYuVU5BQ0NFUFRFRF9URVJNUyx0KSx0aGlzLmV2ZW50RW1pdHRlci5lbWl0KEYuRVJST1IsdCk7YnJlYWs7Y2FzZVwicmF0ZV9saW1pdGVkXCI6dGhpcy5ldmVudEVtaXR0ZXIuZW1pdChGLlJBVEVfTElNSVRFRCx0KSx0aGlzLmV2ZW50RW1pdHRlci5lbWl0KEYuRVJST1IsdCk7YnJlYWs7Y2FzZVwiaW5wdXRfZXJyb3JcIjp0aGlzLmV2ZW50RW1pdHRlci5lbWl0KEYuSU5QVVRfRVJST1IsdCksdGhpcy5ldmVudEVtaXR0ZXIuZW1pdChGLkVSUk9SLHQpO2JyZWFrO2Nhc2VcInF1ZXVlX292ZXJmbG93XCI6dGhpcy5ldmVudEVtaXR0ZXIuZW1pdChGLlFVRVVFX09WRVJGTE9XLHQpLHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoRi5FUlJPUix0KTticmVhaztjYXNlXCJyZXNvdXJjZV9leGhhdXN0ZWRcIjp0aGlzLmV2ZW50RW1pdHRlci5lbWl0KEYuUkVTT1VSQ0VfRVhIQVVTVEVELHQpLHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoRi5FUlJPUix0KTticmVhaztjYXNlXCJzZXNzaW9uX3RpbWVfbGltaXRfZXhjZWVkZWRcIjp0aGlzLmV2ZW50RW1pdHRlci5lbWl0KEYuU0VTU0lPTl9USU1FX0xJTUlUX0VYQ0VFREVELHQpLHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoRi5FUlJPUix0KTticmVhaztjYXNlXCJjaHVua19zaXplX2V4Y2VlZGVkXCI6dGhpcy5ldmVudEVtaXR0ZXIuZW1pdChGLkNIVU5LX1NJWkVfRVhDRUVERUQsdCksdGhpcy5ldmVudEVtaXR0ZXIuZW1pdChGLkVSUk9SLHQpO2JyZWFrO2Nhc2VcImluc3VmZmljaWVudF9hdWRpb19hY3Rpdml0eVwiOnRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoRi5JTlNVRkZJQ0lFTlRfQVVESU9fQUNUSVZJVFksdCksdGhpcy5ldmVudEVtaXR0ZXIuZW1pdChGLkVSUk9SLHQpO2JyZWFrO2Nhc2VcImVycm9yXCI6dGhpcy5ldmVudEVtaXR0ZXIuZW1pdChGLkVSUk9SLHQpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKFwiVW5rbm93biBtZXNzYWdlIHR5cGU6XCIsdCl9fWNhdGNoKHQpe2NvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgV2ViU29ja2V0IG1lc3NhZ2U6XCIsdCxlLmRhdGEpLHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoRi5FUlJPUixuZXcgRXJyb3IoYEZhaWxlZCB0byBwYXJzZSBtZXNzYWdlOiAke3R9YCkpfX0pLHRoaXMud2Vic29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGU9Pntjb25zb2xlLmVycm9yKFwiV2ViU29ja2V0IGVycm9yOlwiLGUpLHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoRi5FUlJPUixlKX0pLHRoaXMud2Vic29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbG9zZVwiLGU9PntpZihjb25zb2xlLmxvZyhgV2ViU29ja2V0IGNsb3NlZDogY29kZT0ke2UuY29kZX0sIHJlYXNvbj1cIiR7ZS5yZWFzb259XCIsIHdhc0NsZWFuPSR7ZS53YXNDbGVhbn1gKSwhZS53YXNDbGVhbnx8MWUzIT09ZS5jb2RlJiYxMDA1IT09ZS5jb2RlKXtjb25zdCB0PWBXZWJTb2NrZXQgY2xvc2VkIHVuZXhwZWN0ZWRseTogJHtlLmNvZGV9IC0gJHtlLnJlYXNvbnx8XCJObyByZWFzb24gcHJvdmlkZWRcIn1gO2NvbnNvbGUuZXJyb3IodCksdGhpcy5ldmVudEVtaXR0ZXIuZW1pdChGLkVSUk9SLG5ldyBFcnJvcih0KSl9dGhpcy5ldmVudEVtaXR0ZXIuZW1pdChGLkNMT1NFLGUpfSl9b24oZSx0KXt0aGlzLmV2ZW50RW1pdHRlci5vbihlLHQpfW9mZihlLHQpe3RoaXMuZXZlbnRFbWl0dGVyLm9mZihlLHQpfXNlbmQoZSl7dmFyIHQsbjtpZighdGhpcy53ZWJzb2NrZXR8fHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUhPT1XZWJTb2NrZXQuT1BFTil0aHJvdyBuZXcgRXJyb3IoXCJXZWJTb2NrZXQgaXMgbm90IGNvbm5lY3RlZFwiKTtjb25zdCBvPXttZXNzYWdlX3R5cGU6XCJpbnB1dF9hdWRpb19jaHVua1wiLGF1ZGlvX2Jhc2VfNjQ6ZS5hdWRpb0Jhc2U2NCxjb21taXQ6bnVsbCE9KHQ9ZS5jb21taXQpJiZ0LHNhbXBsZV9yYXRlOm51bGwhPShuPWUuc2FtcGxlUmF0ZSk/bjp0aGlzLmN1cnJlbnRTYW1wbGVSYXRlLHByZXZpb3VzX3RleHQ6ZS5wcmV2aW91c1RleHR9O3RoaXMud2Vic29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkobykpfWNvbW1pdCgpe2lmKCF0aGlzLndlYnNvY2tldHx8dGhpcy53ZWJzb2NrZXQucmVhZHlTdGF0ZSE9PVdlYlNvY2tldC5PUEVOKXRocm93IG5ldyBFcnJvcihcIldlYlNvY2tldCBpcyBub3QgY29ubmVjdGVkXCIpO3RoaXMud2Vic29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoe21lc3NhZ2VfdHlwZTpcImlucHV0X2F1ZGlvX2NodW5rXCIsYXVkaW9fYmFzZV82NDpcIlwiLGNvbW1pdDohMCxzYW1wbGVfcmF0ZTp0aGlzLmN1cnJlbnRTYW1wbGVSYXRlfSkpfWNsb3NlKCl7dGhpcy5fYXVkaW9DbGVhbnVwJiZ0aGlzLl9hdWRpb0NsZWFudXAoKSx0aGlzLndlYnNvY2tldCYmdGhpcy53ZWJzb2NrZXQuY2xvc2UoMWUzLFwiVXNlciBlbmRlZCBzZXNzaW9uXCIpfX1jb25zdCB4PV8oXCJzY3JpYmVBdWRpb1Byb2Nlc3NvclwiLCcvKlxcbiAqIFNjcmliZSBBdWRpbyBQcm9jZXNzb3IgZm9yIGNvbnZlcnRpbmcgbWljcm9waG9uZSBhdWRpbyB0byBQQ00xNiBmb3JtYXRcXG4gKiBVU0VEIEJZIEBlbGV2ZW5sYWJzL2NsaWVudFxcbiAqL1xcblxcbmNsYXNzIFNjcmliZUF1ZGlvUHJvY2Vzc29yIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29yIHtcXG4gIGNvbnN0cnVjdG9yKCkge1xcbiAgICBzdXBlcigpO1xcbiAgICB0aGlzLmJ1ZmZlciA9IFtdO1xcbiAgICB0aGlzLmJ1ZmZlclNpemUgPSA0MDk2OyAvLyBCdWZmZXIgc2l6ZSBmb3Igb3B0aW1hbCBjaHVuayB0cmFuc21pc3Npb25cXG4gIH1cXG5cXG4gIHByb2Nlc3MoaW5wdXRzKSB7XFxuICAgIGNvbnN0IGlucHV0ID0gaW5wdXRzWzBdO1xcbiAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xcbiAgICAgIGNvbnN0IGNoYW5uZWxEYXRhID0gaW5wdXRbMF07IC8vIEdldCBmaXJzdCBjaGFubmVsIChtb25vKVxcblxcbiAgICAgIC8vIEFkZCBpbmNvbWluZyBhdWRpbyB0byBidWZmZXJcXG4gICAgICB0aGlzLmJ1ZmZlci5wdXNoKC4uLmNoYW5uZWxEYXRhKTtcXG5cXG4gICAgICAvLyBXaGVuIGJ1ZmZlciByZWFjaGVzIHRocmVzaG9sZCwgY29udmVydCBhbmQgc2VuZFxcbiAgICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPj0gdGhpcy5idWZmZXJTaXplKSB7XFxuICAgICAgICBjb25zdCBmbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYnVmZmVyKTtcXG4gICAgICAgIGNvbnN0IGludDE2QXJyYXkgPSBuZXcgSW50MTZBcnJheShmbG9hdDMyQXJyYXkubGVuZ3RoKTtcXG5cXG4gICAgICAgIC8vIENvbnZlcnQgRmxvYXQzMiBbLTEsIDFdIHRvIEludDE2IFstMzI3NjgsIDMyNzY3XVxcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbG9hdDMyQXJyYXkubGVuZ3RoOyBpKyspIHtcXG4gICAgICAgICAgLy8gQ2xhbXAgdGhlIHZhbHVlIHRvIHByZXZlbnQgb3ZlcmZsb3dcXG4gICAgICAgICAgY29uc3Qgc2FtcGxlID0gTWF0aC5tYXgoLTEsIE1hdGgubWluKDEsIGZsb2F0MzJBcnJheVtpXSkpO1xcbiAgICAgICAgICAvLyBTY2FsZSB0byBQQ00xNiByYW5nZVxcbiAgICAgICAgICBpbnQxNkFycmF5W2ldID0gc2FtcGxlIDwgMCA/IHNhbXBsZSAqIDMyNzY4IDogc2FtcGxlICogMzI3Njc7XFxuICAgICAgICB9XFxuXFxuICAgICAgICAvLyBTZW5kIHRvIG1haW4gdGhyZWFkIGFzIHRyYW5zZmVyYWJsZSBBcnJheUJ1ZmZlclxcbiAgICAgICAgdGhpcy5wb3J0LnBvc3RNZXNzYWdlKFxcbiAgICAgICAgICB7XFxuICAgICAgICAgICAgYXVkaW9EYXRhOiBpbnQxNkFycmF5LmJ1ZmZlclxcbiAgICAgICAgICB9LFxcbiAgICAgICAgICBbaW50MTZBcnJheS5idWZmZXJdXFxuICAgICAgICApO1xcblxcbiAgICAgICAgLy8gQ2xlYXIgYnVmZmVyXFxuICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICByZXR1cm4gdHJ1ZTsgLy8gQ29udGludWUgcHJvY2Vzc2luZ1xcbiAgfVxcbn1cXG5cXG5yZWdpc3RlclByb2Nlc3NvcihcInNjcmliZUF1ZGlvUHJvY2Vzc29yXCIsIFNjcmliZUF1ZGlvUHJvY2Vzc29yKTtcXG5cXG4nKTt2YXIgTyxVOyFmdW5jdGlvbihlKXtlLlBDTV84MDAwPVwicGNtXzgwMDBcIixlLlBDTV8xNjAwMD1cInBjbV8xNjAwMFwiLGUuUENNXzIyMDUwPVwicGNtXzIyMDUwXCIsZS5QQ01fMjQwMDA9XCJwY21fMjQwMDBcIixlLlBDTV80NDEwMD1cInBjbV80NDEwMFwiLGUuUENNXzQ4MDAwPVwicGNtXzQ4MDAwXCIsZS5VTEFXXzgwMDA9XCJ1bGF3XzgwMDBcIn0oT3x8KE89e30pKSxmdW5jdGlvbihlKXtlLk1BTlVBTD1cIm1hbnVhbFwiLGUuVkFEPVwidmFkXCJ9KFV8fChVPXt9KSk7Y2xhc3MgTHtzdGF0aWMgZ2V0V2ViU29ja2V0VXJpKGU9TC5ERUZBVUxUX0JBU0VfVVJJKXtyZXR1cm5gJHtlfS92MS9zcGVlY2gtdG8tdGV4dC9yZWFsdGltZWB9c3RhdGljIGJ1aWxkV2ViU29ja2V0VXJpKGUpe2NvbnN0IHQ9TC5nZXRXZWJTb2NrZXRVcmkoZS5iYXNlVXJpKSxuPW5ldyBVUkxTZWFyY2hQYXJhbXM7aWYobi5hcHBlbmQoXCJtb2RlbF9pZFwiLGUubW9kZWxJZCksbi5hcHBlbmQoXCJ0b2tlblwiLGUudG9rZW4pLHZvaWQgMCE9PWUuY29tbWl0U3RyYXRlZ3kmJm4uYXBwZW5kKFwiY29tbWl0X3N0cmF0ZWd5XCIsZS5jb21taXRTdHJhdGVneSksdm9pZCAwIT09ZS5hdWRpb0Zvcm1hdCYmbi5hcHBlbmQoXCJhdWRpb19mb3JtYXRcIixlLmF1ZGlvRm9ybWF0KSx2b2lkIDAhPT1lLnZhZFNpbGVuY2VUaHJlc2hvbGRTZWNzKXtpZihlLnZhZFNpbGVuY2VUaHJlc2hvbGRTZWNzPD0uM3x8ZS52YWRTaWxlbmNlVGhyZXNob2xkU2Vjcz4zKXRocm93IG5ldyBFcnJvcihcInZhZFNpbGVuY2VUaHJlc2hvbGRTZWNzIG11c3QgYmUgYmV0d2VlbiAwLjMgYW5kIDMuMFwiKTtuLmFwcGVuZChcInZhZF9zaWxlbmNlX3RocmVzaG9sZF9zZWNzXCIsZS52YWRTaWxlbmNlVGhyZXNob2xkU2Vjcy50b1N0cmluZygpKX1pZih2b2lkIDAhPT1lLnZhZFRocmVzaG9sZCl7aWYoZS52YWRUaHJlc2hvbGQ8LjF8fGUudmFkVGhyZXNob2xkPi45KXRocm93IG5ldyBFcnJvcihcInZhZFRocmVzaG9sZCBtdXN0IGJlIGJldHdlZW4gMC4xIGFuZCAwLjlcIik7bi5hcHBlbmQoXCJ2YWRfdGhyZXNob2xkXCIsZS52YWRUaHJlc2hvbGQudG9TdHJpbmcoKSl9aWYodm9pZCAwIT09ZS5taW5TcGVlY2hEdXJhdGlvbk1zKXtpZihlLm1pblNwZWVjaER1cmF0aW9uTXM8PTUwfHxlLm1pblNwZWVjaER1cmF0aW9uTXM+MmUzKXRocm93IG5ldyBFcnJvcihcIm1pblNwZWVjaER1cmF0aW9uTXMgbXVzdCBiZSBiZXR3ZWVuIDUwIGFuZCAyMDAwXCIpO24uYXBwZW5kKFwibWluX3NwZWVjaF9kdXJhdGlvbl9tc1wiLGUubWluU3BlZWNoRHVyYXRpb25Ncy50b1N0cmluZygpKX1pZih2b2lkIDAhPT1lLm1pblNpbGVuY2VEdXJhdGlvbk1zKXtpZihlLm1pblNpbGVuY2VEdXJhdGlvbk1zPD01MHx8ZS5taW5TaWxlbmNlRHVyYXRpb25Ncz4yZTMpdGhyb3cgbmV3IEVycm9yKFwibWluU2lsZW5jZUR1cmF0aW9uTXMgbXVzdCBiZSBiZXR3ZWVuIDUwIGFuZCAyMDAwXCIpO24uYXBwZW5kKFwibWluX3NpbGVuY2VfZHVyYXRpb25fbXNcIixlLm1pblNpbGVuY2VEdXJhdGlvbk1zLnRvU3RyaW5nKCkpfXZvaWQgMCE9PWUubGFuZ3VhZ2VDb2RlJiZuLmFwcGVuZChcImxhbmd1YWdlX2NvZGVcIixlLmxhbmd1YWdlQ29kZSksdm9pZCAwIT09ZS5pbmNsdWRlVGltZXN0YW1wcyYmbi5hcHBlbmQoXCJpbmNsdWRlX3RpbWVzdGFtcHNcIixlLmluY2x1ZGVUaW1lc3RhbXBzP1widHJ1ZVwiOlwiZmFsc2VcIik7Y29uc3Qgbz1uLnRvU3RyaW5nKCk7cmV0dXJuIG8/YCR7dH0/JHtvfWA6dH1zdGF0aWMgY29ubmVjdChlKXtpZighZS5tb2RlbElkKXRocm93IG5ldyBFcnJvcihcIm1vZGVsSWQgaXMgcmVxdWlyZWRcIik7Y29uc3QgdD1uZXcgUChcIm1pY3JvcGhvbmVcImluIGUmJmUubWljcm9waG9uZT8xNmUzOmUuc2FtcGxlUmF0ZSksbj1MLmJ1aWxkV2ViU29ja2V0VXJpKGUpLG89bmV3IFdlYlNvY2tldChuKTtyZXR1cm5cIm1pY3JvcGhvbmVcImluIGUmJmUubWljcm9waG9uZSYmby5hZGRFdmVudExpc3RlbmVyKFwib3BlblwiLCgpPT57TC5zdHJlYW1Gcm9tTWljcm9waG9uZShlLHQpfSksdC5zZXRXZWJTb2NrZXQobyksdH1zdGF0aWMgYXN5bmMgc3RyZWFtRnJvbU1pY3JvcGhvbmUoZSx0KXt0cnl7dmFyIG4sbyxzLGEsaSxyLGMsbCx1O2NvbnN0IGQ9YXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe2F1ZGlvOntkZXZpY2VJZDpudWxsPT0obj1lLm1pY3JvcGhvbmUpP3ZvaWQgMDpuLmRldmljZUlkLGVjaG9DYW5jZWxsYXRpb246bnVsbD09KG89bnVsbD09KHM9ZS5taWNyb3Bob25lKT92b2lkIDA6cy5lY2hvQ2FuY2VsbGF0aW9uKXx8byxub2lzZVN1cHByZXNzaW9uOm51bGw9PShhPW51bGw9PShpPWUubWljcm9waG9uZSk/dm9pZCAwOmkubm9pc2VTdXBwcmVzc2lvbil8fGEsYXV0b0dhaW5Db250cm9sOm51bGw9PShyPW51bGw9PShjPWUubWljcm9waG9uZSk/dm9pZCAwOmMuYXV0b0dhaW5Db250cm9sKXx8cixjaGFubmVsQ291bnQ6bnVsbCE9KGw9bnVsbD09KHU9ZS5taWNyb3Bob25lKT92b2lkIDA6dS5jaGFubmVsQ291bnQpP2w6MSxzYW1wbGVSYXRlOntpZGVhbDoxNmUzfX19KSxoPW5ldyBBdWRpb0NvbnRleHQoe3NhbXBsZVJhdGU6MTZlM30pO2F3YWl0IHgoaC5hdWRpb1dvcmtsZXQpO2NvbnN0IHA9aC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShkKSxtPW5ldyBBdWRpb1dvcmtsZXROb2RlKGgsXCJzY3JpYmVBdWRpb1Byb2Nlc3NvclwiKTttLnBvcnQub25tZXNzYWdlPWU9Pntjb25zdHthdWRpb0RhdGE6bn09ZS5kYXRhLG89bmV3IFVpbnQ4QXJyYXkobik7bGV0IHM9XCJcIjtmb3IobGV0IGU9MDtlPG8ubGVuZ3RoO2UrKylzKz1TdHJpbmcuZnJvbUNoYXJDb2RlKG9bZV0pO2NvbnN0IGE9YnRvYShzKTt0LnNlbmQoe2F1ZGlvQmFzZTY0OmF9KX0scC5jb25uZWN0KG0pLFwic3VzcGVuZGVkXCI9PT1oLnN0YXRlJiZhd2FpdCBoLnJlc3VtZSgpLHQuX2F1ZGlvQ2xlYW51cD0oKT0+e2QuZ2V0VHJhY2tzKCkuZm9yRWFjaChlPT57ZS5zdG9wKCl9KSxwLmRpc2Nvbm5lY3QoKSxtLmRpc2Nvbm5lY3QoKSxoLmNsb3NlKCl9fWNhdGNoKGUpe3Rocm93IGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gc3RhcnQgbWljcm9waG9uZSBzdHJlYW1pbmc6XCIsZSksZX19fUwuREVGQVVMVF9CQVNFX1VSST1cIndzczovL2FwaS5lbGV2ZW5sYWJzLmlvXCI7Y2xhc3MgTiBleHRlbmRzIHJ7c3RhdGljIHN0YXJ0U2Vzc2lvbihlKXtyZXR1cm4gZS50ZXh0T25seT9rLnN0YXJ0U2Vzc2lvbihlKTpBLnN0YXJ0U2Vzc2lvbihlKX19ZXhwb3J0e08gYXMgQXVkaW9Gb3JtYXQsVSBhcyBDb21taXRTdHJhdGVneSxOIGFzIENvbnZlcnNhdGlvbixNIGFzIElucHV0LFIgYXMgT3V0cHV0LFAgYXMgUmVhbHRpbWVDb25uZWN0aW9uLEYgYXMgUmVhbHRpbWVFdmVudHMsTCBhcyBTY3JpYmUsayBhcyBUZXh0Q29udmVyc2F0aW9uLEEgYXMgVm9pY2VDb252ZXJzYXRpb24sYiBhcyBXZWJSVENDb25uZWN0aW9uLG0gYXMgV2ViU29ja2V0Q29ubmVjdGlvbix5IGFzIGNyZWF0ZUNvbm5lY3Rpb24sVCBhcyBwb3N0T3ZlcmFsbEZlZWRiYWNrfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpYi5tb2Rlcm4uanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@elevenlabs/client/dist/lib.modern.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@elevenlabs/react/dist/lib.modern.js":
/*!***********************************************************!*\
  !*** ./node_modules/@elevenlabs/react/dist/lib.modern.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AudioFormat: () => (/* reexport safe */ _elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.AudioFormat),\n/* harmony export */   CommitStrategy: () => (/* reexport safe */ _elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.CommitStrategy),\n/* harmony export */   RealtimeEvents: () => (/* reexport safe */ _elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents),\n/* harmony export */   getLivekitUrlForLocation: () => (/* binding */ v),\n/* harmony export */   getOriginForLocation: () => (/* binding */ d),\n/* harmony export */   parseLocation: () => (/* binding */ c),\n/* harmony export */   postOverallFeedback: () => (/* reexport safe */ _elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.postOverallFeedback),\n/* harmony export */   useConversation: () => (/* binding */ m),\n/* harmony export */   useScribe: () => (/* binding */ a)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @elevenlabs/client */ \"(ssr)/./node_modules/@elevenlabs/client/dist/lib.modern.js\");\nfunction u(){return u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)({}).hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},u.apply(null,arguments)}function a(i={}){const{onSessionStarted:a,onPartialTranscript:s,onCommittedTranscript:c,onCommittedTranscriptWithTimestamps:d,onError:v,onAuthError:m,onQuotaExceededError:g,onCommitThrottledError:p,onTranscriberError:T,onUnacceptedTermsError:h,onRateLimitedError:C,onInputError:S,onQueueOverflowError:E,onResourceExhaustedError:M,onSessionTimeLimitExceededError:I,onChunkSizeExceededError:D,onInsufficientAudioActivityError:w,onConnect:R,onDisconnect:b,token:y,modelId:A,baseUri:f,commitStrategy:O,vadSilenceThresholdSecs:U,vadThreshold:k,minSpeechDurationMs:F,minSilenceDurationMs:_,languageCode:P,microphone:x,audioFormat:N,sampleRate:V,autoConnect:L=!1,includeTimestamps:q}=i,B=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),[H,$]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"disconnected\"),[Q,W]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\"),[X,j]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),[z,K]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>()=>{var n;null==(n=B.current)||n.close()},[]);const Y=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async(n={})=>{if(B.current)console.warn(\"Already connected\");else try{var e,r;$(\"connecting\"),K(null);const o=n.token||y,i=n.modelId||A;if(!o)throw new Error(\"Token is required\");if(!i)throw new Error(\"Model ID is required\");const u=n.microphone||x,L=n.audioFormat||N,H=n.sampleRate||V;let Q;const X=null!=(e=null!=(r=n.includeTimestamps)?r:q)?e:!(!n.onCommittedTranscriptWithTimestamps&&!d);if(u)Q=_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.Scribe.connect({token:o,modelId:i,baseUri:n.baseUri||f,commitStrategy:n.commitStrategy||O,vadSilenceThresholdSecs:n.vadSilenceThresholdSecs||U,vadThreshold:n.vadThreshold||k,minSpeechDurationMs:n.minSpeechDurationMs||F,minSilenceDurationMs:n.minSilenceDurationMs||_,languageCode:n.languageCode||P,microphone:u,includeTimestamps:X});else{if(!L||!H)throw new Error(\"Either microphone options or (audioFormat + sampleRate) must be provided\");Q=_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.Scribe.connect({token:o,modelId:i,baseUri:n.baseUri||f,commitStrategy:n.commitStrategy||O,vadSilenceThresholdSecs:n.vadSilenceThresholdSecs||U,vadThreshold:n.vadThreshold||k,minSpeechDurationMs:n.minSpeechDurationMs||F,minSilenceDurationMs:n.minSilenceDurationMs||_,languageCode:n.languageCode||P,includeTimestamps:X,audioFormat:L,sampleRate:H})}B.current=Q,Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.SESSION_STARTED,()=>{$(\"connected\"),null==a||a()}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.PARTIAL_TRANSCRIPT,n=>{const e=n;W(e.text),$(\"transcribing\"),null==s||s(e)}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.COMMITTED_TRANSCRIPT,n=>{const e=n,r={id:`${Date.now()}-${Math.random()}`,text:e.text,timestamp:Date.now(),isFinal:!0};j(n=>[...n,r]),W(\"\"),null==c||c(e)}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.COMMITTED_TRANSCRIPT_WITH_TIMESTAMPS,n=>{const e=n,r={id:`${Date.now()}-${Math.random()}`,text:e.text,timestamp:Date.now(),isFinal:!0,words:e.words};j(n=>[...n,r]),W(\"\"),null==d||d(e)}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.ERROR,n=>{const e=n;K(e.error),$(\"error\"),null==v||v(new Error(e.error))}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.AUTH_ERROR,n=>{const e=n;K(e.error),$(\"error\"),null==m||m(e)}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.QUOTA_EXCEEDED,n=>{const e=n;K(e.error),$(\"error\"),null==g||g(e)}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.COMMIT_THROTTLED,n=>{const e=n;K(e.error),$(\"error\"),null==p||p(e)}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.TRANSCRIBER_ERROR,n=>{const e=n;K(e.error),$(\"error\"),null==T||T(e)}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.UNACCEPTED_TERMS,n=>{const e=n;K(e.error),$(\"error\"),null==h||h(e)}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.RATE_LIMITED,n=>{const e=n;K(e.error),$(\"error\"),null==C||C(e)}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.INPUT_ERROR,n=>{const e=n;K(e.error),$(\"error\"),null==S||S(e)}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.QUEUE_OVERFLOW,n=>{const e=n;K(e.error),$(\"error\"),null==E||E(e)}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.RESOURCE_EXHAUSTED,n=>{const e=n;K(e.error),$(\"error\"),null==M||M(e)}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.SESSION_TIME_LIMIT_EXCEEDED,n=>{const e=n;K(e.error),$(\"error\"),null==I||I(e)}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.CHUNK_SIZE_EXCEEDED,n=>{const e=n;K(e.error),$(\"error\"),null==D||D(e)}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.INSUFFICIENT_AUDIO_ACTIVITY,n=>{const e=n;K(e.error),$(\"error\"),null==w||w(e)}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.OPEN,()=>{null==R||R()}),Q.on(_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.RealtimeEvents.CLOSE,()=>{$(\"disconnected\"),B.current=null,null==b||b()})}catch(n){const e=n instanceof Error?n.message:\"Failed to connect\";throw K(e),$(\"error\"),n}},[y,A,f,O,U,k,F,_,P,x,N,V,q,a,s,c,d,v,m,g,p,T,h,C,S,E,M,I,D,w,R,b]),Z=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{var n;null==(n=B.current)||n.close(),B.current=null,$(\"disconnected\")},[]),G=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((n,e)=>{if(!B.current)throw new Error(\"Not connected to Scribe\");B.current.send(u({audioBase64:n},e))},[]),J=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{if(!B.current)throw new Error(\"Not connected to Scribe\");B.current.commit()},[]),nn=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{j([]),W(\"\")},[]),en=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>B.current,[]);return (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{L&&Y()},[L,Y]),{status:H,isConnected:\"connected\"===H||\"transcribing\"===H,isTranscribing:\"transcribing\"===H,partialTranscript:Q,committedTranscripts:X,error:z,connect:Y,disconnect:Z,sendAudio:G,commit:J,clearTranscripts:nn,getConnection:en}}const s=[\"micMuted\",\"volume\",\"serverLocation\"];function c(n=\"us\"){switch(n){case\"eu-residency\":case\"in-residency\":case\"us\":case\"global\":return n;default:return console.warn(`[ConversationalAI] Invalid server-location: ${n}. Defaulting to \"us\"`),\"us\"}}function d(n){return{us:\"wss://api.elevenlabs.io\",\"eu-residency\":\"wss://api.eu.residency.elevenlabs.io\",\"in-residency\":\"wss://api.in.residency.elevenlabs.io\",global:\"wss://api.elevenlabs.io\"}[n]}function v(n){return{us:\"wss://livekit.rtc.elevenlabs.io\",\"eu-residency\":\"wss://livekit.rtc.eu.residency.elevenlabs.io\",\"in-residency\":\"wss://livekit.rtc.in.residency.elevenlabs.io\",global:\"wss://livekit.rtc.elevenlabs.io\"}[n]}function m(o={}){const{micMuted:t,volume:l,serverLocation:a}=o,m=function(n,e){if(null==n)return{};var r={};for(var o in n)if({}.hasOwnProperty.call(n,o)){if(-1!==e.indexOf(o))continue;r[o]=n[o]}return r}(o,s),g=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),p=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),T=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),[h,C]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"disconnected\"),[S,E]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[M,I]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"listening\"),D=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(t),w=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(l);return D.current=t,w.current=l,(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{var n;void 0!==t&&(null==g||null==(n=g.current)||n.setMicMuted(t))},[t]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{var n;void 0!==l&&(null==g||null==(n=g.current)||n.setVolume({volume:l}))},[l]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>()=>{var n;T.current=!0,p.current?p.current.then(n=>n.endSession()):null==(n=g.current)||n.endSession()},[]),{startSession:async n=>{var e;if(null!=(e=g.current)&&e.isOpen())return g.current.getId();if(p.current)return(await p.current).getId();T.current=!1;try{var r,o,t,l,s,h,S,M,R,b;const e=c((null==n?void 0:n.serverLocation)||a),y=d(e),A=v(e);if(p.current=_elevenlabs_client__WEBPACK_IMPORTED_MODULE_1__.Conversation.startSession(u({},null!=m?m:{},null!=n?n:{},{origin:y,livekitUrl:(null==n?void 0:n.livekitUrl)||(null==m?void 0:m.livekitUrl)||A,overrides:u({},null!=(r=null==m?void 0:m.overrides)?r:{},null!=(o=null==n?void 0:n.overrides)?o:{},{client:u({},null!=(t=null==m||null==(l=m.overrides)?void 0:l.client)?t:{},null!=(s=null==n||null==(h=n.overrides)?void 0:h.client)?s:{},{source:(null==n||null==(S=n.overrides)||null==(S=S.client)?void 0:S.source)||(null==m||null==(M=m.overrides)||null==(M=M.client)?void 0:M.source)||\"react_sdk\",version:(null==n||null==(R=n.overrides)||null==(R=R.client)?void 0:R.version)||(null==m||null==(b=m.overrides)||null==(b=b.client)?void 0:b.version)||\"0.12.3\"})}),onConnect:(null==n?void 0:n.onConnect)||(null==m?void 0:m.onConnect),onDisconnect:(null==n?void 0:n.onDisconnect)||(null==m?void 0:m.onDisconnect),onError:(null==n?void 0:n.onError)||(null==m?void 0:m.onError),onMessage:(null==n?void 0:n.onMessage)||(null==m?void 0:m.onMessage),onAudio:(null==n?void 0:n.onAudio)||(null==m?void 0:m.onAudio),onDebug:(null==n?void 0:n.onDebug)||(null==m?void 0:m.onDebug),onUnhandledClientToolCall:(null==n?void 0:n.onUnhandledClientToolCall)||(null==m?void 0:m.onUnhandledClientToolCall),onVadScore:(null==n?void 0:n.onVadScore)||(null==m?void 0:m.onVadScore),onInterruption:(null==n?void 0:n.onInterruption)||(null==m?void 0:m.onInterruption),onAgentToolRequest:(null==n?void 0:n.onAgentToolRequest)||(null==m?void 0:m.onAgentToolRequest),onAgentToolResponse:(null==n?void 0:n.onAgentToolResponse)||(null==m?void 0:m.onAgentToolResponse),onConversationMetadata:(null==n?void 0:n.onConversationMetadata)||(null==m?void 0:m.onConversationMetadata),onMCPToolCall:(null==n?void 0:n.onMCPToolCall)||(null==m?void 0:m.onMCPToolCall),onMCPConnectionStatus:(null==n?void 0:n.onMCPConnectionStatus)||(null==m?void 0:m.onMCPConnectionStatus),onAsrInitiationMetadata:(null==n?void 0:n.onAsrInitiationMetadata)||(null==m?void 0:m.onAsrInitiationMetadata),onAgentChatResponsePart:(null==n?void 0:n.onAgentChatResponsePart)||(null==m?void 0:m.onAgentChatResponsePart),onModeChange:({mode:e})=>{var r;I(e),null==(r=(null==n?void 0:n.onModeChange)||(null==m?void 0:m.onModeChange))||r({mode:e})},onStatusChange:({status:e})=>{var r;C(e),null==(r=(null==n?void 0:n.onStatusChange)||(null==m?void 0:m.onStatusChange))||r({status:e})},onCanSendFeedbackChange:({canSendFeedback:e})=>{var r;E(e),null==(r=(null==n?void 0:n.onCanSendFeedbackChange)||(null==m?void 0:m.onCanSendFeedbackChange))||r({canSendFeedback:e})}})),g.current=await p.current,T.current)throw await g.current.endSession(),g.current=null,p.current=null,new Error(\"Session cancelled during connection\");return void 0!==D.current&&g.current.setMicMuted(D.current),void 0!==w.current&&g.current.setVolume({volume:w.current}),g.current.getId()}finally{p.current=null}},endSession:async()=>{T.current=!0;const n=p.current,e=g.current;if(g.current=null,n){const e=await n;await e.endSession()}else await(null==e?void 0:e.endSession())},setVolume:({volume:n})=>{var e;null==(e=g.current)||e.setVolume({volume:n})},getInputByteFrequencyData:()=>{var n;return null==(n=g.current)?void 0:n.getInputByteFrequencyData()},getOutputByteFrequencyData:()=>{var n;return null==(n=g.current)?void 0:n.getOutputByteFrequencyData()},getInputVolume:()=>{var n,e;return null!=(n=null==(e=g.current)?void 0:e.getInputVolume())?n:0},getOutputVolume:()=>{var n,e;return null!=(n=null==(e=g.current)?void 0:e.getOutputVolume())?n:0},sendFeedback:n=>{var e;null==(e=g.current)||e.sendFeedback(n)},getId:()=>{var n;return null==(n=g.current)?void 0:n.getId()},sendContextualUpdate:n=>{var e;null==(e=g.current)||e.sendContextualUpdate(n)},sendUserMessage:n=>{var e;null==(e=g.current)||e.sendUserMessage(n)},sendUserActivity:()=>{var n;null==(n=g.current)||n.sendUserActivity()},sendMCPToolApprovalResult:(n,e)=>{var r;null==(r=g.current)||r.sendMCPToolApprovalResult(n,e)},changeInputDevice:async n=>{if(g.current&&\"changeInputDevice\"in g.current)return await g.current.changeInputDevice(n);throw new Error(\"Device switching is only available for voice conversations\")},changeOutputDevice:async n=>{if(g.current&&\"changeOutputDevice\"in g.current)return await g.current.changeOutputDevice(n);throw new Error(\"Device switching is only available for voice conversations\")},status:h,canSendFeedback:S,micMuted:t,isSpeaking:\"speaking\"===M}}\n//# sourceMappingURL=lib.modern.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGVsZXZlbmxhYnMvcmVhY3QvZGlzdC9saWIubW9kZXJuLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQTZQLGFBQWEsd0RBQXdELFlBQVksbUJBQW1CLEtBQUssbUJBQW1CLGtCQUFrQix3Q0FBd0MsU0FBUyx5QkFBeUIsZUFBZSxFQUFFLE1BQU0sNm9CQUE2b0IsS0FBSyw2Q0FBQyxhQUFhLCtDQUFDLHVCQUF1QiwrQ0FBQyxXQUFXLCtDQUFDLFdBQVcsK0NBQUMsT0FBTyxnREFBQyxVQUFVLE1BQU0sK0JBQStCLEtBQUssUUFBUSxrREFBQyxXQUFXLElBQUksK0NBQStDLFNBQVMsUUFBUSx3QkFBd0Isa0NBQWtDLDJDQUEyQyw4Q0FBOEMsNkRBQTZELE1BQU0sb0dBQW9HLE9BQU8sc0RBQUMsVUFBVSwwVEFBMFQsRUFBRSxLQUFLLHNHQUFzRyxFQUFFLHNEQUFDLFVBQVUsd1VBQXdVLEVBQUUsaUJBQWlCLDhEQUFDLHNCQUFzQiw0QkFBNEIsT0FBTyw4REFBQyx3QkFBd0IsVUFBVSwwQ0FBMEMsT0FBTyw4REFBQywwQkFBMEIsYUFBYSxNQUFNLFdBQVcsR0FBRyxjQUFjLCtDQUErQyxtQ0FBbUMsT0FBTyw4REFBQywwQ0FBMEMsYUFBYSxNQUFNLFdBQVcsR0FBRyxjQUFjLDZEQUE2RCxtQ0FBbUMsT0FBTyw4REFBQyxXQUFXLFVBQVUscURBQXFELE9BQU8sOERBQUMsZ0JBQWdCLFVBQVUsb0NBQW9DLE9BQU8sOERBQUMsb0JBQW9CLFVBQVUsb0NBQW9DLE9BQU8sOERBQUMsc0JBQXNCLFVBQVUsb0NBQW9DLE9BQU8sOERBQUMsdUJBQXVCLFVBQVUsb0NBQW9DLE9BQU8sOERBQUMsc0JBQXNCLFVBQVUsb0NBQW9DLE9BQU8sOERBQUMsa0JBQWtCLFVBQVUsb0NBQW9DLE9BQU8sOERBQUMsaUJBQWlCLFVBQVUsb0NBQW9DLE9BQU8sOERBQUMsb0JBQW9CLFVBQVUsb0NBQW9DLE9BQU8sOERBQUMsd0JBQXdCLFVBQVUsb0NBQW9DLE9BQU8sOERBQUMsaUNBQWlDLFVBQVUsb0NBQW9DLE9BQU8sOERBQUMseUJBQXlCLFVBQVUsb0NBQW9DLE9BQU8sOERBQUMsaUNBQWlDLFVBQVUsb0NBQW9DLE9BQU8sOERBQUMsV0FBVyxhQUFhLE9BQU8sOERBQUMsWUFBWSw4Q0FBOEMsRUFBRSxTQUFTLHlEQUF5RCx5QkFBeUIsc0VBQXNFLGtEQUFDLE1BQU0sTUFBTSxnRUFBZ0UsT0FBTyxrREFBQyxTQUFTLHlEQUF5RCxrQkFBa0IsY0FBYyxLQUFLLE9BQU8sa0RBQUMsTUFBTSx5REFBeUQsbUJBQW1CLFFBQVEsa0RBQUMsTUFBTSxZQUFZLFFBQVEsa0RBQUMsbUJBQW1CLE9BQU8sZ0RBQUMsTUFBTSxPQUFPLFNBQVMsZ09BQWdPLCtDQUErQyxtQkFBbUIsVUFBVSxxRUFBcUUsMkVBQTJFLEVBQUUsNkJBQTZCLGNBQWMsT0FBTywwS0FBMEssSUFBSSxjQUFjLE9BQU8sME1BQTBNLElBQUksZUFBZSxFQUFFLE1BQU0scUNBQXFDLG1CQUFtQixvQkFBb0IsU0FBUyxvQkFBb0IsMkJBQTJCLDhCQUE4QixVQUFVLFNBQVMsUUFBUSw2Q0FBQyxTQUFTLDZDQUFDLFNBQVMsNkNBQUMsV0FBVywrQ0FBQyx1QkFBdUIsK0NBQUMsV0FBVywrQ0FBQyxnQkFBZ0IsNkNBQUMsTUFBTSw2Q0FBQyxJQUFJLCtCQUErQixnREFBQyxNQUFNLE1BQU0sNkRBQTZELE1BQU0sZ0RBQUMsTUFBTSxNQUFNLHdEQUF3RCxTQUFTLEdBQUcsTUFBTSxnREFBQyxVQUFVLE1BQU0sNkZBQTZGLE1BQU0sdUJBQXVCLE1BQU0sNERBQTRELDZDQUE2QyxhQUFhLElBQUksd0JBQXdCLDhEQUE4RCxhQUFhLDREQUFDLGtCQUFrQixhQUFhLGFBQWEsRUFBRSxrR0FBa0csMENBQTBDLDBDQUEwQyxFQUFFLFdBQVcsOERBQThELDhEQUE4RCxFQUFFLDhUQUE4VCxFQUFFLDgzQ0FBODNDLE9BQU8sSUFBSSxNQUFNLG9GQUFvRixPQUFPLEVBQUUsa0JBQWtCLFNBQVMsSUFBSSxNQUFNLHdGQUF3RixTQUFTLEVBQUUsMkJBQTJCLGtCQUFrQixJQUFJLE1BQU0sMEdBQTBHLGtCQUFrQixHQUFHLHlKQUF5SixxR0FBcUcsaUJBQWlCLG9CQUFvQixRQUFRLGdCQUFnQixzQkFBc0IsYUFBYSw4QkFBOEIscUJBQXFCLGdCQUFnQixxQkFBcUIsMENBQTBDLGFBQWEsU0FBUyxJQUFJLE1BQU0sa0NBQWtDLFNBQVMsRUFBRSxnQ0FBZ0MsTUFBTSxnRUFBZ0UsaUNBQWlDLE1BQU0saUVBQWlFLHFCQUFxQixRQUFRLG1FQUFtRSxzQkFBc0IsUUFBUSxvRUFBb0Usa0JBQWtCLE1BQU0sdUNBQXVDLFlBQVksTUFBTSw0Q0FBNEMsMEJBQTBCLE1BQU0sK0NBQStDLHFCQUFxQixNQUFNLDBDQUEwQyx1QkFBdUIsTUFBTSwwQ0FBMEMsbUNBQW1DLE1BQU0sc0RBQXNELDZCQUE2QiwwRkFBMEYsOEVBQThFLDhCQUE4Qiw0RkFBNEYsOEVBQThFLGtFQUF5TDtBQUNoblYiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYWpheVxcT25lRHJpdmVcXERvY3VtZW50c1xcSW50ZXJ2aWV3X0NvZGVcXGFpLWludGVydmlldy1lZHlzb3ItbWFpblxcYWktaW50ZXJ2aWV3LWVkeXNvci1tYWluXFxzdHVkZW50LXNpZGVcXHN0dWRlbnQtc2lkZVxcbm9kZV9tb2R1bGVzXFxAZWxldmVubGFic1xccmVhY3RcXGRpc3RcXGxpYi5tb2Rlcm4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0e3VzZVJlZiBhcyBuLHVzZVN0YXRlIGFzIGUsdXNlRWZmZWN0IGFzIHIsdXNlQ2FsbGJhY2sgYXMgb31mcm9tXCJyZWFjdFwiO2ltcG9ydHtTY3JpYmUgYXMgdCxSZWFsdGltZUV2ZW50cyBhcyBsLENvbnZlcnNhdGlvbiBhcyBpfWZyb21cIkBlbGV2ZW5sYWJzL2NsaWVudFwiO2V4cG9ydHtBdWRpb0Zvcm1hdCxDb21taXRTdHJhdGVneSxSZWFsdGltZUV2ZW50cyxwb3N0T3ZlcmFsbEZlZWRiYWNrfWZyb21cIkBlbGV2ZW5sYWJzL2NsaWVudFwiO2Z1bmN0aW9uIHUoKXtyZXR1cm4gdT1PYmplY3QuYXNzaWduP09iamVjdC5hc3NpZ24uYmluZCgpOmZ1bmN0aW9uKG4pe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciByPWFyZ3VtZW50c1tlXTtmb3IodmFyIG8gaW4gcikoe30pLmhhc093blByb3BlcnR5LmNhbGwocixvKSYmKG5bb109cltvXSl9cmV0dXJuIG59LHUuYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIGEoaT17fSl7Y29uc3R7b25TZXNzaW9uU3RhcnRlZDphLG9uUGFydGlhbFRyYW5zY3JpcHQ6cyxvbkNvbW1pdHRlZFRyYW5zY3JpcHQ6YyxvbkNvbW1pdHRlZFRyYW5zY3JpcHRXaXRoVGltZXN0YW1wczpkLG9uRXJyb3I6dixvbkF1dGhFcnJvcjptLG9uUXVvdGFFeGNlZWRlZEVycm9yOmcsb25Db21taXRUaHJvdHRsZWRFcnJvcjpwLG9uVHJhbnNjcmliZXJFcnJvcjpULG9uVW5hY2NlcHRlZFRlcm1zRXJyb3I6aCxvblJhdGVMaW1pdGVkRXJyb3I6QyxvbklucHV0RXJyb3I6UyxvblF1ZXVlT3ZlcmZsb3dFcnJvcjpFLG9uUmVzb3VyY2VFeGhhdXN0ZWRFcnJvcjpNLG9uU2Vzc2lvblRpbWVMaW1pdEV4Y2VlZGVkRXJyb3I6SSxvbkNodW5rU2l6ZUV4Y2VlZGVkRXJyb3I6RCxvbkluc3VmZmljaWVudEF1ZGlvQWN0aXZpdHlFcnJvcjp3LG9uQ29ubmVjdDpSLG9uRGlzY29ubmVjdDpiLHRva2VuOnksbW9kZWxJZDpBLGJhc2VVcmk6Zixjb21taXRTdHJhdGVneTpPLHZhZFNpbGVuY2VUaHJlc2hvbGRTZWNzOlUsdmFkVGhyZXNob2xkOmssbWluU3BlZWNoRHVyYXRpb25NczpGLG1pblNpbGVuY2VEdXJhdGlvbk1zOl8sbGFuZ3VhZ2VDb2RlOlAsbWljcm9waG9uZTp4LGF1ZGlvRm9ybWF0Ok4sc2FtcGxlUmF0ZTpWLGF1dG9Db25uZWN0Okw9ITEsaW5jbHVkZVRpbWVzdGFtcHM6cX09aSxCPW4obnVsbCksW0gsJF09ZShcImRpc2Nvbm5lY3RlZFwiKSxbUSxXXT1lKFwiXCIpLFtYLGpdPWUoW10pLFt6LEtdPWUobnVsbCk7cigoKT0+KCk9Pnt2YXIgbjtudWxsPT0obj1CLmN1cnJlbnQpfHxuLmNsb3NlKCl9LFtdKTtjb25zdCBZPW8oYXN5bmMobj17fSk9PntpZihCLmN1cnJlbnQpY29uc29sZS53YXJuKFwiQWxyZWFkeSBjb25uZWN0ZWRcIik7ZWxzZSB0cnl7dmFyIGUscjskKFwiY29ubmVjdGluZ1wiKSxLKG51bGwpO2NvbnN0IG89bi50b2tlbnx8eSxpPW4ubW9kZWxJZHx8QTtpZighbyl0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiBpcyByZXF1aXJlZFwiKTtpZighaSl0aHJvdyBuZXcgRXJyb3IoXCJNb2RlbCBJRCBpcyByZXF1aXJlZFwiKTtjb25zdCB1PW4ubWljcm9waG9uZXx8eCxMPW4uYXVkaW9Gb3JtYXR8fE4sSD1uLnNhbXBsZVJhdGV8fFY7bGV0IFE7Y29uc3QgWD1udWxsIT0oZT1udWxsIT0ocj1uLmluY2x1ZGVUaW1lc3RhbXBzKT9yOnEpP2U6ISghbi5vbkNvbW1pdHRlZFRyYW5zY3JpcHRXaXRoVGltZXN0YW1wcyYmIWQpO2lmKHUpUT10LmNvbm5lY3Qoe3Rva2VuOm8sbW9kZWxJZDppLGJhc2VVcmk6bi5iYXNlVXJpfHxmLGNvbW1pdFN0cmF0ZWd5Om4uY29tbWl0U3RyYXRlZ3l8fE8sdmFkU2lsZW5jZVRocmVzaG9sZFNlY3M6bi52YWRTaWxlbmNlVGhyZXNob2xkU2Vjc3x8VSx2YWRUaHJlc2hvbGQ6bi52YWRUaHJlc2hvbGR8fGssbWluU3BlZWNoRHVyYXRpb25NczpuLm1pblNwZWVjaER1cmF0aW9uTXN8fEYsbWluU2lsZW5jZUR1cmF0aW9uTXM6bi5taW5TaWxlbmNlRHVyYXRpb25Nc3x8XyxsYW5ndWFnZUNvZGU6bi5sYW5ndWFnZUNvZGV8fFAsbWljcm9waG9uZTp1LGluY2x1ZGVUaW1lc3RhbXBzOlh9KTtlbHNle2lmKCFMfHwhSCl0aHJvdyBuZXcgRXJyb3IoXCJFaXRoZXIgbWljcm9waG9uZSBvcHRpb25zIG9yIChhdWRpb0Zvcm1hdCArIHNhbXBsZVJhdGUpIG11c3QgYmUgcHJvdmlkZWRcIik7UT10LmNvbm5lY3Qoe3Rva2VuOm8sbW9kZWxJZDppLGJhc2VVcmk6bi5iYXNlVXJpfHxmLGNvbW1pdFN0cmF0ZWd5Om4uY29tbWl0U3RyYXRlZ3l8fE8sdmFkU2lsZW5jZVRocmVzaG9sZFNlY3M6bi52YWRTaWxlbmNlVGhyZXNob2xkU2Vjc3x8VSx2YWRUaHJlc2hvbGQ6bi52YWRUaHJlc2hvbGR8fGssbWluU3BlZWNoRHVyYXRpb25NczpuLm1pblNwZWVjaER1cmF0aW9uTXN8fEYsbWluU2lsZW5jZUR1cmF0aW9uTXM6bi5taW5TaWxlbmNlRHVyYXRpb25Nc3x8XyxsYW5ndWFnZUNvZGU6bi5sYW5ndWFnZUNvZGV8fFAsaW5jbHVkZVRpbWVzdGFtcHM6WCxhdWRpb0Zvcm1hdDpMLHNhbXBsZVJhdGU6SH0pfUIuY3VycmVudD1RLFEub24obC5TRVNTSU9OX1NUQVJURUQsKCk9PnskKFwiY29ubmVjdGVkXCIpLG51bGw9PWF8fGEoKX0pLFEub24obC5QQVJUSUFMX1RSQU5TQ1JJUFQsbj0+e2NvbnN0IGU9bjtXKGUudGV4dCksJChcInRyYW5zY3JpYmluZ1wiKSxudWxsPT1zfHxzKGUpfSksUS5vbihsLkNPTU1JVFRFRF9UUkFOU0NSSVBULG49Pntjb25zdCBlPW4scj17aWQ6YCR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpfWAsdGV4dDplLnRleHQsdGltZXN0YW1wOkRhdGUubm93KCksaXNGaW5hbDohMH07aihuPT5bLi4ubixyXSksVyhcIlwiKSxudWxsPT1jfHxjKGUpfSksUS5vbihsLkNPTU1JVFRFRF9UUkFOU0NSSVBUX1dJVEhfVElNRVNUQU1QUyxuPT57Y29uc3QgZT1uLHI9e2lkOmAke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKX1gLHRleHQ6ZS50ZXh0LHRpbWVzdGFtcDpEYXRlLm5vdygpLGlzRmluYWw6ITAsd29yZHM6ZS53b3Jkc307aihuPT5bLi4ubixyXSksVyhcIlwiKSxudWxsPT1kfHxkKGUpfSksUS5vbihsLkVSUk9SLG49Pntjb25zdCBlPW47SyhlLmVycm9yKSwkKFwiZXJyb3JcIiksbnVsbD09dnx8dihuZXcgRXJyb3IoZS5lcnJvcikpfSksUS5vbihsLkFVVEhfRVJST1Isbj0+e2NvbnN0IGU9bjtLKGUuZXJyb3IpLCQoXCJlcnJvclwiKSxudWxsPT1tfHxtKGUpfSksUS5vbihsLlFVT1RBX0VYQ0VFREVELG49Pntjb25zdCBlPW47SyhlLmVycm9yKSwkKFwiZXJyb3JcIiksbnVsbD09Z3x8ZyhlKX0pLFEub24obC5DT01NSVRfVEhST1RUTEVELG49Pntjb25zdCBlPW47SyhlLmVycm9yKSwkKFwiZXJyb3JcIiksbnVsbD09cHx8cChlKX0pLFEub24obC5UUkFOU0NSSUJFUl9FUlJPUixuPT57Y29uc3QgZT1uO0soZS5lcnJvciksJChcImVycm9yXCIpLG51bGw9PVR8fFQoZSl9KSxRLm9uKGwuVU5BQ0NFUFRFRF9URVJNUyxuPT57Y29uc3QgZT1uO0soZS5lcnJvciksJChcImVycm9yXCIpLG51bGw9PWh8fGgoZSl9KSxRLm9uKGwuUkFURV9MSU1JVEVELG49Pntjb25zdCBlPW47SyhlLmVycm9yKSwkKFwiZXJyb3JcIiksbnVsbD09Q3x8QyhlKX0pLFEub24obC5JTlBVVF9FUlJPUixuPT57Y29uc3QgZT1uO0soZS5lcnJvciksJChcImVycm9yXCIpLG51bGw9PVN8fFMoZSl9KSxRLm9uKGwuUVVFVUVfT1ZFUkZMT1csbj0+e2NvbnN0IGU9bjtLKGUuZXJyb3IpLCQoXCJlcnJvclwiKSxudWxsPT1FfHxFKGUpfSksUS5vbihsLlJFU09VUkNFX0VYSEFVU1RFRCxuPT57Y29uc3QgZT1uO0soZS5lcnJvciksJChcImVycm9yXCIpLG51bGw9PU18fE0oZSl9KSxRLm9uKGwuU0VTU0lPTl9USU1FX0xJTUlUX0VYQ0VFREVELG49Pntjb25zdCBlPW47SyhlLmVycm9yKSwkKFwiZXJyb3JcIiksbnVsbD09SXx8SShlKX0pLFEub24obC5DSFVOS19TSVpFX0VYQ0VFREVELG49Pntjb25zdCBlPW47SyhlLmVycm9yKSwkKFwiZXJyb3JcIiksbnVsbD09RHx8RChlKX0pLFEub24obC5JTlNVRkZJQ0lFTlRfQVVESU9fQUNUSVZJVFksbj0+e2NvbnN0IGU9bjtLKGUuZXJyb3IpLCQoXCJlcnJvclwiKSxudWxsPT13fHx3KGUpfSksUS5vbihsLk9QRU4sKCk9PntudWxsPT1SfHxSKCl9KSxRLm9uKGwuQ0xPU0UsKCk9PnskKFwiZGlzY29ubmVjdGVkXCIpLEIuY3VycmVudD1udWxsLG51bGw9PWJ8fGIoKX0pfWNhdGNoKG4pe2NvbnN0IGU9biBpbnN0YW5jZW9mIEVycm9yP24ubWVzc2FnZTpcIkZhaWxlZCB0byBjb25uZWN0XCI7dGhyb3cgSyhlKSwkKFwiZXJyb3JcIiksbn19LFt5LEEsZixPLFUsayxGLF8sUCx4LE4sVixxLGEscyxjLGQsdixtLGcscCxULGgsQyxTLEUsTSxJLEQsdyxSLGJdKSxaPW8oKCk9Pnt2YXIgbjtudWxsPT0obj1CLmN1cnJlbnQpfHxuLmNsb3NlKCksQi5jdXJyZW50PW51bGwsJChcImRpc2Nvbm5lY3RlZFwiKX0sW10pLEc9bygobixlKT0+e2lmKCFCLmN1cnJlbnQpdGhyb3cgbmV3IEVycm9yKFwiTm90IGNvbm5lY3RlZCB0byBTY3JpYmVcIik7Qi5jdXJyZW50LnNlbmQodSh7YXVkaW9CYXNlNjQ6bn0sZSkpfSxbXSksSj1vKCgpPT57aWYoIUIuY3VycmVudCl0aHJvdyBuZXcgRXJyb3IoXCJOb3QgY29ubmVjdGVkIHRvIFNjcmliZVwiKTtCLmN1cnJlbnQuY29tbWl0KCl9LFtdKSxubj1vKCgpPT57aihbXSksVyhcIlwiKX0sW10pLGVuPW8oKCk9PkIuY3VycmVudCxbXSk7cmV0dXJuIHIoKCk9PntMJiZZKCl9LFtMLFldKSx7c3RhdHVzOkgsaXNDb25uZWN0ZWQ6XCJjb25uZWN0ZWRcIj09PUh8fFwidHJhbnNjcmliaW5nXCI9PT1ILGlzVHJhbnNjcmliaW5nOlwidHJhbnNjcmliaW5nXCI9PT1ILHBhcnRpYWxUcmFuc2NyaXB0OlEsY29tbWl0dGVkVHJhbnNjcmlwdHM6WCxlcnJvcjp6LGNvbm5lY3Q6WSxkaXNjb25uZWN0Olosc2VuZEF1ZGlvOkcsY29tbWl0OkosY2xlYXJUcmFuc2NyaXB0czpubixnZXRDb25uZWN0aW9uOmVufX1jb25zdCBzPVtcIm1pY011dGVkXCIsXCJ2b2x1bWVcIixcInNlcnZlckxvY2F0aW9uXCJdO2Z1bmN0aW9uIGMobj1cInVzXCIpe3N3aXRjaChuKXtjYXNlXCJldS1yZXNpZGVuY3lcIjpjYXNlXCJpbi1yZXNpZGVuY3lcIjpjYXNlXCJ1c1wiOmNhc2VcImdsb2JhbFwiOnJldHVybiBuO2RlZmF1bHQ6cmV0dXJuIGNvbnNvbGUud2FybihgW0NvbnZlcnNhdGlvbmFsQUldIEludmFsaWQgc2VydmVyLWxvY2F0aW9uOiAke259LiBEZWZhdWx0aW5nIHRvIFwidXNcImApLFwidXNcIn19ZnVuY3Rpb24gZChuKXtyZXR1cm57dXM6XCJ3c3M6Ly9hcGkuZWxldmVubGFicy5pb1wiLFwiZXUtcmVzaWRlbmN5XCI6XCJ3c3M6Ly9hcGkuZXUucmVzaWRlbmN5LmVsZXZlbmxhYnMuaW9cIixcImluLXJlc2lkZW5jeVwiOlwid3NzOi8vYXBpLmluLnJlc2lkZW5jeS5lbGV2ZW5sYWJzLmlvXCIsZ2xvYmFsOlwid3NzOi8vYXBpLmVsZXZlbmxhYnMuaW9cIn1bbl19ZnVuY3Rpb24gdihuKXtyZXR1cm57dXM6XCJ3c3M6Ly9saXZla2l0LnJ0Yy5lbGV2ZW5sYWJzLmlvXCIsXCJldS1yZXNpZGVuY3lcIjpcIndzczovL2xpdmVraXQucnRjLmV1LnJlc2lkZW5jeS5lbGV2ZW5sYWJzLmlvXCIsXCJpbi1yZXNpZGVuY3lcIjpcIndzczovL2xpdmVraXQucnRjLmluLnJlc2lkZW5jeS5lbGV2ZW5sYWJzLmlvXCIsZ2xvYmFsOlwid3NzOi8vbGl2ZWtpdC5ydGMuZWxldmVubGFicy5pb1wifVtuXX1mdW5jdGlvbiBtKG89e30pe2NvbnN0e21pY011dGVkOnQsdm9sdW1lOmwsc2VydmVyTG9jYXRpb246YX09byxtPWZ1bmN0aW9uKG4sZSl7aWYobnVsbD09bilyZXR1cm57fTt2YXIgcj17fTtmb3IodmFyIG8gaW4gbilpZih7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4sbykpe2lmKC0xIT09ZS5pbmRleE9mKG8pKWNvbnRpbnVlO3Jbb109bltvXX1yZXR1cm4gcn0obyxzKSxnPW4obnVsbCkscD1uKG51bGwpLFQ9bighMSksW2gsQ109ZShcImRpc2Nvbm5lY3RlZFwiKSxbUyxFXT1lKCExKSxbTSxJXT1lKFwibGlzdGVuaW5nXCIpLEQ9bih0KSx3PW4obCk7cmV0dXJuIEQuY3VycmVudD10LHcuY3VycmVudD1sLHIoKCk9Pnt2YXIgbjt2b2lkIDAhPT10JiYobnVsbD09Z3x8bnVsbD09KG49Zy5jdXJyZW50KXx8bi5zZXRNaWNNdXRlZCh0KSl9LFt0XSkscigoKT0+e3ZhciBuO3ZvaWQgMCE9PWwmJihudWxsPT1nfHxudWxsPT0obj1nLmN1cnJlbnQpfHxuLnNldFZvbHVtZSh7dm9sdW1lOmx9KSl9LFtsXSkscigoKT0+KCk9Pnt2YXIgbjtULmN1cnJlbnQ9ITAscC5jdXJyZW50P3AuY3VycmVudC50aGVuKG49Pm4uZW5kU2Vzc2lvbigpKTpudWxsPT0obj1nLmN1cnJlbnQpfHxuLmVuZFNlc3Npb24oKX0sW10pLHtzdGFydFNlc3Npb246YXN5bmMgbj0+e3ZhciBlO2lmKG51bGwhPShlPWcuY3VycmVudCkmJmUuaXNPcGVuKCkpcmV0dXJuIGcuY3VycmVudC5nZXRJZCgpO2lmKHAuY3VycmVudClyZXR1cm4oYXdhaXQgcC5jdXJyZW50KS5nZXRJZCgpO1QuY3VycmVudD0hMTt0cnl7dmFyIHIsbyx0LGwscyxoLFMsTSxSLGI7Y29uc3QgZT1jKChudWxsPT1uP3ZvaWQgMDpuLnNlcnZlckxvY2F0aW9uKXx8YSkseT1kKGUpLEE9dihlKTtpZihwLmN1cnJlbnQ9aS5zdGFydFNlc3Npb24odSh7fSxudWxsIT1tP206e30sbnVsbCE9bj9uOnt9LHtvcmlnaW46eSxsaXZla2l0VXJsOihudWxsPT1uP3ZvaWQgMDpuLmxpdmVraXRVcmwpfHwobnVsbD09bT92b2lkIDA6bS5saXZla2l0VXJsKXx8QSxvdmVycmlkZXM6dSh7fSxudWxsIT0ocj1udWxsPT1tP3ZvaWQgMDptLm92ZXJyaWRlcyk/cjp7fSxudWxsIT0obz1udWxsPT1uP3ZvaWQgMDpuLm92ZXJyaWRlcyk/bzp7fSx7Y2xpZW50OnUoe30sbnVsbCE9KHQ9bnVsbD09bXx8bnVsbD09KGw9bS5vdmVycmlkZXMpP3ZvaWQgMDpsLmNsaWVudCk/dDp7fSxudWxsIT0ocz1udWxsPT1ufHxudWxsPT0oaD1uLm92ZXJyaWRlcyk/dm9pZCAwOmguY2xpZW50KT9zOnt9LHtzb3VyY2U6KG51bGw9PW58fG51bGw9PShTPW4ub3ZlcnJpZGVzKXx8bnVsbD09KFM9Uy5jbGllbnQpP3ZvaWQgMDpTLnNvdXJjZSl8fChudWxsPT1tfHxudWxsPT0oTT1tLm92ZXJyaWRlcyl8fG51bGw9PShNPU0uY2xpZW50KT92b2lkIDA6TS5zb3VyY2UpfHxcInJlYWN0X3Nka1wiLHZlcnNpb246KG51bGw9PW58fG51bGw9PShSPW4ub3ZlcnJpZGVzKXx8bnVsbD09KFI9Ui5jbGllbnQpP3ZvaWQgMDpSLnZlcnNpb24pfHwobnVsbD09bXx8bnVsbD09KGI9bS5vdmVycmlkZXMpfHxudWxsPT0oYj1iLmNsaWVudCk/dm9pZCAwOmIudmVyc2lvbil8fFwiMC4xMi4zXCJ9KX0pLG9uQ29ubmVjdDoobnVsbD09bj92b2lkIDA6bi5vbkNvbm5lY3QpfHwobnVsbD09bT92b2lkIDA6bS5vbkNvbm5lY3QpLG9uRGlzY29ubmVjdDoobnVsbD09bj92b2lkIDA6bi5vbkRpc2Nvbm5lY3QpfHwobnVsbD09bT92b2lkIDA6bS5vbkRpc2Nvbm5lY3QpLG9uRXJyb3I6KG51bGw9PW4/dm9pZCAwOm4ub25FcnJvcil8fChudWxsPT1tP3ZvaWQgMDptLm9uRXJyb3IpLG9uTWVzc2FnZToobnVsbD09bj92b2lkIDA6bi5vbk1lc3NhZ2UpfHwobnVsbD09bT92b2lkIDA6bS5vbk1lc3NhZ2UpLG9uQXVkaW86KG51bGw9PW4/dm9pZCAwOm4ub25BdWRpbyl8fChudWxsPT1tP3ZvaWQgMDptLm9uQXVkaW8pLG9uRGVidWc6KG51bGw9PW4/dm9pZCAwOm4ub25EZWJ1Zyl8fChudWxsPT1tP3ZvaWQgMDptLm9uRGVidWcpLG9uVW5oYW5kbGVkQ2xpZW50VG9vbENhbGw6KG51bGw9PW4/dm9pZCAwOm4ub25VbmhhbmRsZWRDbGllbnRUb29sQ2FsbCl8fChudWxsPT1tP3ZvaWQgMDptLm9uVW5oYW5kbGVkQ2xpZW50VG9vbENhbGwpLG9uVmFkU2NvcmU6KG51bGw9PW4/dm9pZCAwOm4ub25WYWRTY29yZSl8fChudWxsPT1tP3ZvaWQgMDptLm9uVmFkU2NvcmUpLG9uSW50ZXJydXB0aW9uOihudWxsPT1uP3ZvaWQgMDpuLm9uSW50ZXJydXB0aW9uKXx8KG51bGw9PW0/dm9pZCAwOm0ub25JbnRlcnJ1cHRpb24pLG9uQWdlbnRUb29sUmVxdWVzdDoobnVsbD09bj92b2lkIDA6bi5vbkFnZW50VG9vbFJlcXVlc3QpfHwobnVsbD09bT92b2lkIDA6bS5vbkFnZW50VG9vbFJlcXVlc3QpLG9uQWdlbnRUb29sUmVzcG9uc2U6KG51bGw9PW4/dm9pZCAwOm4ub25BZ2VudFRvb2xSZXNwb25zZSl8fChudWxsPT1tP3ZvaWQgMDptLm9uQWdlbnRUb29sUmVzcG9uc2UpLG9uQ29udmVyc2F0aW9uTWV0YWRhdGE6KG51bGw9PW4/dm9pZCAwOm4ub25Db252ZXJzYXRpb25NZXRhZGF0YSl8fChudWxsPT1tP3ZvaWQgMDptLm9uQ29udmVyc2F0aW9uTWV0YWRhdGEpLG9uTUNQVG9vbENhbGw6KG51bGw9PW4/dm9pZCAwOm4ub25NQ1BUb29sQ2FsbCl8fChudWxsPT1tP3ZvaWQgMDptLm9uTUNQVG9vbENhbGwpLG9uTUNQQ29ubmVjdGlvblN0YXR1czoobnVsbD09bj92b2lkIDA6bi5vbk1DUENvbm5lY3Rpb25TdGF0dXMpfHwobnVsbD09bT92b2lkIDA6bS5vbk1DUENvbm5lY3Rpb25TdGF0dXMpLG9uQXNySW5pdGlhdGlvbk1ldGFkYXRhOihudWxsPT1uP3ZvaWQgMDpuLm9uQXNySW5pdGlhdGlvbk1ldGFkYXRhKXx8KG51bGw9PW0/dm9pZCAwOm0ub25Bc3JJbml0aWF0aW9uTWV0YWRhdGEpLG9uQWdlbnRDaGF0UmVzcG9uc2VQYXJ0OihudWxsPT1uP3ZvaWQgMDpuLm9uQWdlbnRDaGF0UmVzcG9uc2VQYXJ0KXx8KG51bGw9PW0/dm9pZCAwOm0ub25BZ2VudENoYXRSZXNwb25zZVBhcnQpLG9uTW9kZUNoYW5nZTooe21vZGU6ZX0pPT57dmFyIHI7SShlKSxudWxsPT0ocj0obnVsbD09bj92b2lkIDA6bi5vbk1vZGVDaGFuZ2UpfHwobnVsbD09bT92b2lkIDA6bS5vbk1vZGVDaGFuZ2UpKXx8cih7bW9kZTplfSl9LG9uU3RhdHVzQ2hhbmdlOih7c3RhdHVzOmV9KT0+e3ZhciByO0MoZSksbnVsbD09KHI9KG51bGw9PW4/dm9pZCAwOm4ub25TdGF0dXNDaGFuZ2UpfHwobnVsbD09bT92b2lkIDA6bS5vblN0YXR1c0NoYW5nZSkpfHxyKHtzdGF0dXM6ZX0pfSxvbkNhblNlbmRGZWVkYmFja0NoYW5nZTooe2NhblNlbmRGZWVkYmFjazplfSk9Pnt2YXIgcjtFKGUpLG51bGw9PShyPShudWxsPT1uP3ZvaWQgMDpuLm9uQ2FuU2VuZEZlZWRiYWNrQ2hhbmdlKXx8KG51bGw9PW0/dm9pZCAwOm0ub25DYW5TZW5kRmVlZGJhY2tDaGFuZ2UpKXx8cih7Y2FuU2VuZEZlZWRiYWNrOmV9KX19KSksZy5jdXJyZW50PWF3YWl0IHAuY3VycmVudCxULmN1cnJlbnQpdGhyb3cgYXdhaXQgZy5jdXJyZW50LmVuZFNlc3Npb24oKSxnLmN1cnJlbnQ9bnVsbCxwLmN1cnJlbnQ9bnVsbCxuZXcgRXJyb3IoXCJTZXNzaW9uIGNhbmNlbGxlZCBkdXJpbmcgY29ubmVjdGlvblwiKTtyZXR1cm4gdm9pZCAwIT09RC5jdXJyZW50JiZnLmN1cnJlbnQuc2V0TWljTXV0ZWQoRC5jdXJyZW50KSx2b2lkIDAhPT13LmN1cnJlbnQmJmcuY3VycmVudC5zZXRWb2x1bWUoe3ZvbHVtZTp3LmN1cnJlbnR9KSxnLmN1cnJlbnQuZ2V0SWQoKX1maW5hbGx5e3AuY3VycmVudD1udWxsfX0sZW5kU2Vzc2lvbjphc3luYygpPT57VC5jdXJyZW50PSEwO2NvbnN0IG49cC5jdXJyZW50LGU9Zy5jdXJyZW50O2lmKGcuY3VycmVudD1udWxsLG4pe2NvbnN0IGU9YXdhaXQgbjthd2FpdCBlLmVuZFNlc3Npb24oKX1lbHNlIGF3YWl0KG51bGw9PWU/dm9pZCAwOmUuZW5kU2Vzc2lvbigpKX0sc2V0Vm9sdW1lOih7dm9sdW1lOm59KT0+e3ZhciBlO251bGw9PShlPWcuY3VycmVudCl8fGUuc2V0Vm9sdW1lKHt2b2x1bWU6bn0pfSxnZXRJbnB1dEJ5dGVGcmVxdWVuY3lEYXRhOigpPT57dmFyIG47cmV0dXJuIG51bGw9PShuPWcuY3VycmVudCk/dm9pZCAwOm4uZ2V0SW5wdXRCeXRlRnJlcXVlbmN5RGF0YSgpfSxnZXRPdXRwdXRCeXRlRnJlcXVlbmN5RGF0YTooKT0+e3ZhciBuO3JldHVybiBudWxsPT0obj1nLmN1cnJlbnQpP3ZvaWQgMDpuLmdldE91dHB1dEJ5dGVGcmVxdWVuY3lEYXRhKCl9LGdldElucHV0Vm9sdW1lOigpPT57dmFyIG4sZTtyZXR1cm4gbnVsbCE9KG49bnVsbD09KGU9Zy5jdXJyZW50KT92b2lkIDA6ZS5nZXRJbnB1dFZvbHVtZSgpKT9uOjB9LGdldE91dHB1dFZvbHVtZTooKT0+e3ZhciBuLGU7cmV0dXJuIG51bGwhPShuPW51bGw9PShlPWcuY3VycmVudCk/dm9pZCAwOmUuZ2V0T3V0cHV0Vm9sdW1lKCkpP246MH0sc2VuZEZlZWRiYWNrOm49Pnt2YXIgZTtudWxsPT0oZT1nLmN1cnJlbnQpfHxlLnNlbmRGZWVkYmFjayhuKX0sZ2V0SWQ6KCk9Pnt2YXIgbjtyZXR1cm4gbnVsbD09KG49Zy5jdXJyZW50KT92b2lkIDA6bi5nZXRJZCgpfSxzZW5kQ29udGV4dHVhbFVwZGF0ZTpuPT57dmFyIGU7bnVsbD09KGU9Zy5jdXJyZW50KXx8ZS5zZW5kQ29udGV4dHVhbFVwZGF0ZShuKX0sc2VuZFVzZXJNZXNzYWdlOm49Pnt2YXIgZTtudWxsPT0oZT1nLmN1cnJlbnQpfHxlLnNlbmRVc2VyTWVzc2FnZShuKX0sc2VuZFVzZXJBY3Rpdml0eTooKT0+e3ZhciBuO251bGw9PShuPWcuY3VycmVudCl8fG4uc2VuZFVzZXJBY3Rpdml0eSgpfSxzZW5kTUNQVG9vbEFwcHJvdmFsUmVzdWx0OihuLGUpPT57dmFyIHI7bnVsbD09KHI9Zy5jdXJyZW50KXx8ci5zZW5kTUNQVG9vbEFwcHJvdmFsUmVzdWx0KG4sZSl9LGNoYW5nZUlucHV0RGV2aWNlOmFzeW5jIG49PntpZihnLmN1cnJlbnQmJlwiY2hhbmdlSW5wdXREZXZpY2VcImluIGcuY3VycmVudClyZXR1cm4gYXdhaXQgZy5jdXJyZW50LmNoYW5nZUlucHV0RGV2aWNlKG4pO3Rocm93IG5ldyBFcnJvcihcIkRldmljZSBzd2l0Y2hpbmcgaXMgb25seSBhdmFpbGFibGUgZm9yIHZvaWNlIGNvbnZlcnNhdGlvbnNcIil9LGNoYW5nZU91dHB1dERldmljZTphc3luYyBuPT57aWYoZy5jdXJyZW50JiZcImNoYW5nZU91dHB1dERldmljZVwiaW4gZy5jdXJyZW50KXJldHVybiBhd2FpdCBnLmN1cnJlbnQuY2hhbmdlT3V0cHV0RGV2aWNlKG4pO3Rocm93IG5ldyBFcnJvcihcIkRldmljZSBzd2l0Y2hpbmcgaXMgb25seSBhdmFpbGFibGUgZm9yIHZvaWNlIGNvbnZlcnNhdGlvbnNcIil9LHN0YXR1czpoLGNhblNlbmRGZWVkYmFjazpTLG1pY011dGVkOnQsaXNTcGVha2luZzpcInNwZWFraW5nXCI9PT1NfX1leHBvcnR7diBhcyBnZXRMaXZla2l0VXJsRm9yTG9jYXRpb24sZCBhcyBnZXRPcmlnaW5Gb3JMb2NhdGlvbixjIGFzIHBhcnNlTG9jYXRpb24sbSBhcyB1c2VDb252ZXJzYXRpb24sYSBhcyB1c2VTY3JpYmV9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGliLm1vZGVybi5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@elevenlabs/react/dist/lib.modern.js\n");

/***/ })

};
;